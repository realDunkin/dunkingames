var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var h=0;h<f&&c<e;)if(b[c++]!=a[h++])return!1;return h>=f}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6-impl","es3");function Materials(){}Materials.prototype={};Materials.PLAYER=0;Materials.HOOK=1;Materials.TARGET=2;Materials.GROUND=3;Materials.WOOD=4;Materials.STONE=5;Materials.METAL=6;Materials.SOFT=7;Materials.HARD=8;
Materials.WATER=9;Materials.ANIM1=10;Materials.ANIM2=11;Materials.MATERIAL=0;Materials.DENSITY=1;Materials.FRICTION=2;Materials.RESTITUTION=3;Materials.material=[[Materials.PLAYER,10,.9,.1],[Materials.HOOK,1,0,0],[Materials.TARGET,.9,.3,.1],[Materials.GROUND,.9,.3,.1],[Materials.WOOD,.9,.3,.1],[Materials.STONE,1.1,.3,.1],[Materials.METAL,1.1,.3,.1],[Materials.SOFT,.9,.3,.1],[Materials.HARD,1.1,.3,.1],[Materials.WATER,1,0,0],[Materials.ANIM1,.9,.3,.1],[Materials.ANIM2,.9,.3,.1]];function BodyType(){}BodyType.prototype={};var b2BodyType=box2d.b2BodyType;BodyType.STATIC=b2BodyType.b2_staticBody;BodyType.KINEMATIC=b2BodyType.b2_kinematicBody;BodyType.DYNAMIC=b2BodyType.b2_dynamicBody;function GeomType(){}GeomType.prototype={};GeomType.POLYGON=0;GeomType.CIRCLE=1;function JointType(){}JointType.prototype={};JointType.REVOLUTE=1;JointType.PRISMATIC=2;JointType.DISTANCE=3;JointType.PULLEY=4;JointType.GEAR=6;JointType.LINE=7;JointType.WELD=8;JointType.FRICTION=9;function LevelStatus(){}LevelStatus.PLAY=0;LevelStatus.WIN=1;LevelStatus.WAIT=2;function Body(){}Body.prototype={};
Body.Create=function(a,b,c,d,e,f,h,k,p,m,l,n,q,r,g){p=p?p:1;h=h?h:!1;m=m?m:!1;l=l?l:!1;n=n?n:!1;q=!0!==q?q:!0;r=r?r:0;g=g?g:0;gameGlobal.physics.box2d.enable(a);c==BodyType.KINEMATIC&&(a.body.kinematic=!0);c==BodyType.STATIC&&(a.body.static=!0);h&&(a.body.clearFixtures(),a.body.loadPolygon("physicsData",k,a,p));switch(e){case GeomType.CIRCLE:a.body.setCircle(f[0])}h?a.body.density=c==BodyType.DYNAMIC?d[Materials.DENSITY]:0:(a.body.fixedRotation=l,a.body.mass=c==BodyType.DYNAMIC?d[Materials.DENSITY]:
0);a.body.bullet=m;a.body.allowSleep=q;a.body.linearDamping=r;a.body.angularDamping=g;a.body.sensor=n;a.body.userData=d[0];a.body.setCollisionCategory(2);a.body.friction=d[Materials.FRICTION];a.body.restitution=d[Materials.RESTITUTION]};Body.Destroy=function(a){a&&gameGlobal.physics.box2d.world.DestroyBody(a)};Body.GetMaterial=function(a){if(a)var b=a.userData;return b};Body.GetBodyAtPoint=function(a,b,c){return gameGlobal.physics.box2d.getBodiesAtPoint(a.x,a.y,c?c:!1,b?b:!1)};
Body.GetBodyAtPointXY=function(a,b,c,d){return gameGlobal.physics.box2d.getBodiesAtPoint(a,b,d?d:!1,c?c:!1)};Body.GetTouchingBody=function(a){a=a.data.GetContactList();console.log(" Body: contact edge body = "+a);if(a){var b=a.other;console.log(" Body cbody = "+b.sprite.key)}return b};Body.ScalePolygon=function(a){};function Joint(){}Joint.prototype={};Joint.CreateDistance=function(a,b,c,d,e,f,h,k){e=e?e:50;f=f?f:0;h=h?h:!1;k=k?k:0;c||(c=new b2Vec2(.5,.5));d||(d=new b2Vec2(.5,.5));a=gameGlobal.physics.box2d.distanceJoint(a,b,e,c.x,c.y,d.x,d.y,f,k);a.collideCollected=h;return a};Joint.CreateWeld=function(a,b,c,d,e,f){return d?gameGlobal.physics.box2d.weldJoint(a,b,c.x,c.y,d.x,d.y,e?e:0,f?f:0):gameGlobal.physics.box2d.weldJoint(a,b,c)};
Joint.CreatePivot=function(a,b,c,d,e,f){return gameGlobal.physics.box2d.pivotJoint(a,b,c.x,c.y,d.x,d.y,e,f)};Joint.CreatePrismatic=function(a,b,c,d,e,f,h,k,p,m,l,n,q){return gameGlobal.physics.box2d.prismaticJoint(a,b,e,f,c.x,c.y,d.x,d.y,k?k:0,p?p:0,h?h:!1,l?l:0,n?n:0,m?m:!1,q?q:0)};
Joint.CreateRevolute=function(a,b,c,d,e,f,h,k,p,m){var l=m=null,n=null,q=null;c&&(m=c.x,l=c.y);d&&(n=d.x,q=d.y);return c||d?gameGlobal.physics.box2d.revoluteJoint(a,b,m,l,n,q,e?e:0,f?f:0,h?h:!1,k?k:0,(p?p:0).limitEnabled):gameGlobal.physics.box2d.revoluteJoint(a,b)};Joint.Destroy=function(a){a&&gameGlobal.physics.box2d.world.DestroyJoint(a)};function Globals(){}"function"!==typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return this.slice(-a.length)===a});"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return this.substring(0,a.length)===a});Globals.PHYSSCALE=30;Globals.Status;
var currentVersion="1.6.7",showVersion=!1,b2Vec2=box2d.b2Vec2,b2PolygonShape=box2d.b2PolygonShape,b2FixtureDef=box2d.b2FixtureDef,b2CircleShape=box2d.b2CircleShape,b2AABB=box2d.b2AABB,b2Fixture=box2d.b2Fixture,b2Body=box2d.b2Body,b2Joint=box2d.b2Joint,b2WeldJointDef=box2d.b2WeldJointDef,b2DistanceJointDef=box2d.b2DistanceJointDef,b2LineJointDef=box2d.b2LineJointDef,b2WorldManifold=box2d.b2WorldManifold,b2RevoluteJointDef=box2d.b2RevoluteJointDef,b2DefaultListener=box2d.b2_defaultListener,b2World=
box2d.b2World,b2BodyDef=box2d.b2BodyDef,b2MouseJointDef=box2d.b2MouseJointDef,b2DebugDraw=box2d.b2DebugDraw,worldGlobal=box2d.b2World,virCamGlobal,gameGlobal,pStats,bPlayer,playerSprite,bHook,target,pauseSprite,groundBody,frameRate=30,worldScale=30,currLevel=5,maxLevelReached=20,totalLevel=25,currClick=0,yourIQ=101,nameOfTheGame="iqball",gameInfo,menuWidth=109.6,cursor,menuCursor,gameMenu,levelMenu,gameObjects=[],gameJoints=[],levelComplete=!1,gameOver=!1,pause=!1,soundOn=!0,gameInProgress=!1,inMenu=
!1,cursorOverMenu=!0,outOfGame=!0,enableDebugDraw=!1,enableLog=!1,sGroup,siteLock=!1,siteLockCheck=!0,unLockAllLevels=!1,allowedDomain=[document.location.origin, document.location.href, document.location.host],currentDomain=document.location.host,parentDomain="",referrer=document.referrer;""!==referrer&&(parentDomain=referrer.split("/")[2]);siteLockCheck&&(0>allowedDomain.indexOf(currentDomain)||""!==parentDomain&&0>allowedDomain.indexOf(parentDomain))&&(siteLock=!0);
window.unlockAllLevels=function(){unLockAllLevels=!0;inMenu&&(levelMenu=new MainMenu(this.IQBall.game),levelMenu.create())};enableLog||(console.log=function(){});function restartGame(){gameObjects=[];gameJoints=[];inMenu=gameInProgress=pause=gameOver=levelComplete=!1;outOfGame=cursorOverMenu=!0;groundBody=pauseSprite=target=bHook=playerSprite=bPlayer=pStats=gameGlobal=null;window.location.href=window.location.href}
function updateStorage(){console.log("updateStorage");var a=loadGameInfo(nameOfTheGame)[currLevel];void 0!=a&&a<=currClick?0==a?storeGameInfo(nameOfTheGame,currLevel,currClick):storeGameInfo(nameOfTheGame,currLevel,a):storeGameInfo(nameOfTheGame,currLevel,currClick);storeGameInfo(nameOfTheGame,currLevel+1,"")};var noOfClicks,level,gamesInfo={},info;gamesInfo[nameOfTheGame]=totalLevel;console.log(getCookieVal("info"));
void 0!=getCookieVal("info")&&""!=getCookieVal("info")?(info=JSON.parse(getCookieVal("info")),void 0==info[nameOfTheGame]&&(level=1,noOfClicks=0,info[nameOfTheGame]={},info[nameOfTheGame]["max-levels"]=gamesInfo[nameOfTheGame],info[nameOfTheGame]["current-level"]=1,info[nameOfTheGame].maxLevelReached=1,info[nameOfTheGame][level]=noOfClicks,setCookieVal("info",JSON.stringify(info),30))):(level=1,noOfClicks=0,info={},info[nameOfTheGame]={},info[nameOfTheGame]["max-levels"]=gamesInfo[nameOfTheGame],
info[nameOfTheGame]["current-level"]=1,info[nameOfTheGame].maxLevelReached=1,info[nameOfTheGame][level]=noOfClicks,setCookieVal("info",JSON.stringify(info),30));maxLevelReached=info[nameOfTheGame].maxLevelReached;window.loadGameInfo=function(a){JSON.parse(getCookieVal("info"));var b=JSON.parse(getCookieVal("info"));return b=b[a]};
window.storeGameInfo=function(a,b,c){c=c?c:0;var d=JSON.parse(getCookieVal("info"));if(void 0!=d){var e=d[a].maxLevelReached;d[a]["current-level"]=b;b>e&&(d[a].maxLevelReached=b);""!=c&&(d[a][b]=c);setCookieVal("info",JSON.stringify(d),30)}};window.updateMaxLevelReached=function(a,b){var c=JSON.parse(getCookieVal("info")),d=c[a].maxLevelReached;void 0!=c&&b>d&&(c[a].maxLevelReached=b,setCookieVal("info",JSON.stringify(c),30))};
function setCookieVal(a,b,c){if("undefined"!==typeof Storage)console.log("Storing into localstorage"),localStorage.setItem(a,b);else{var d=new Date;d.setTime(d.getTime()+864E5*c);c="expires="+d.toGMTString();document.cookie=a+"="+b+";"+c+";"}}
function getCookieVal(a){if("undefined"!==typeof Storage)return console.log("Fetching from localstorage"),localStorage.getItem(a);a+="=";for(var b=decodeURIComponent(document.cookie).split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""}function checkCookie(){var a=getCookieVal("info");if(""!=a)return a;setCookieVal("info",a,30)};function getGameObject(a){var b=gameGlobal.level.getPosition(a+"X");var c=gameGlobal.level.getPosition(a+"Y");var d=gameGlobal.level.getPosition(a+"scaleX");var e=gameGlobal.level.getPosition(a+"scaleY");var f=gameGlobal.level.getPosition(a+"angle");var h=gameGlobal.level.getPosition(a+"static");var k=gameGlobal.level.getPosition(a+"visible"),p=gameGlobal.level.getPosition(a+"forceFactor"),m=gameGlobal.level.getPosition(a+"mass"),l=gameGlobal.level.getPosition(a+"friction"),n=gameGlobal.level.getPosition(a+
"restitution"),q=gameGlobal.level.getPosition(a+"angularDamping"),r=gameGlobal.level.getPosition(a+"hookOffset");if(b&&c||a.startsWith("dist")||a.startsWith("tardist")){switch(a){case "ground":case "ground1":case "ground2":case "ground3":case "ground4":case "ground5":case "ground6":case "ground7":case "ground8":case "ground9":var g=new GroundBox(b,c,d,e,f,a);(e=gameGlobal.level.getGroundSpriteKey("ground"))&&a==e&&(groundBody=g,console.log("sprite = "+g+"ground body ="+groundBody));break;case "hardBox":case "hardBox1":case "hardBox2":case "hardBox3":case "hardBox4":g=
new HardBox(b,c,d,e,0,a);(e=gameGlobal.level.getGroundSpriteKey("ground"))&&a==e&&(groundBody=g,console.log("sprite = "+g+"ground body ="+groundBody));break;case "groundTriangle":g=new GroundTriangle(b,c,d,e,f);break;case "groundArc":case "groundArc1":case "groundArc2":case "groundArc3":case "groundArc4":case "groundArc5":case "groundArc6":case "groundArc7":case "groundArc8":case "groundArc9":g=new GroundArc(b,c,d,e,f);break;case "stoneArc":case "stoneArc1":g=new StoneArc(b,c,d,e,f);break;case "groundBall":case "groundBall1":case "groundBall2":case "groundBall3":case "groundBall4":case "groundBall5":case "groundBall6":g=
new GroundBall(b,c,d,e,f,a);break;case "stoneBall":g=new StoneBall(b,c,d,e,f,a);break;case "millHouse":g=new MillHouse(b,c,d,e);break;case "millWheel":g=new MillWheel(b,c,d,e);break;case "coach":g=new Coach(b,c,d,e,a);break;case "coachWheel":case "coachWheel1":g=new CoachWheel(b,c,d,e,a);break;case "trainWheel":case "trainWheel1":case "trainWheel2":case "trainWheel3":case "trainWheel4":g=new TrainWheel(b,c,d,e,a);break;case "carWheel":case "carWheel1":g=new CarWheel(b,c,d,e,a);break;case "ballStone":case "ballStone1":case "ballStone2":case "ballStone3":g=
new BallStone(b,c,d,e,a,h);break;case "ballWood":case "ballWood1":case "ballWood2":g=new BallWood(b,c,d,e,a,m,l,n,q);break;case "ballSoft":g=new BallSoft(b,c,d,e,a);break;case "post":case "postWood1":g=new PostWood(b,c,a);break;case "postMetal":case "postMetal1":g=new PostMetal(b,c,d,e,a);break;case "postMetal1a":case "postMetala":g=new PostMetal2(b,c,d,e,a);break;case "postStone":g=new PostStone(b,c,d,e,a);break;case "post2":g=new PostWood2(b,c,d,e);break;case "wiresoft":case "wiresoft1":g=new WireSoft(b,
c,d,e,f,a);break;case "wiresoft2":g=new WireSoft2(b,c,d,e,f);break;case "wireMetal":case "wireMetal1":case "wireMetal2":g=new WireMetal(b,c,d,e,f,a);break;case "containerMetal":case "containerMetal1":case "containerMetal2":case "containerMetal3":case "containerMetal4":g=new ContainerMetal(b,c,d,e,f,a);break;case "caseWood":case "caseWood1":case "caseWood2":g=new CaseWood(b,c,d,e,f,a,m,l,n);break;case "casewood2s":g=new CaseWood2(b,c,d,e,f,a);break;case "rail":case "rail1":g=new Rail(b,c,d,e,f,a);
break;case "train":g=new Train(b,c,d,e,f,a);break;case "car":g=new Car(b,c,d,e,f,a,m,l,n);break;case "carDoor":g=new CarDoor(b,c,d,e,f,a);break;case "carriage":g=new Carriage(b,c,d,e,f,a);break;case "seeSawBase":g=new SeeSawBase(b,c,d,e,f,a);break;case "plank":g=new Plank(b,c,d,e,f,a,m,l,n);break;case "caseMetal":g=new CaseMetal(b,c,d,e,f,a);break;case "beamMetal50":g=new BeamMetal50(b,c,d,e,f,a,h);break;case "beamMetal200":case "beamMetal200.1":case "beamMetal200.2":g=new BeamMetal200(b,c,d,e,f,
a,h);break;case "beamMetal150":case "beamMetal150.1":case "beamMetal150.2":g=new BeamMetal150(b,c,d,e,f,a,h);break;case "ballRigid":case "ballRigid1":case "ballRigid2":case "ballRigid3":case "ballRigid4":g=new BallRigid(b,c,d,e,a);break;case "beamMetal100":g=new BeamMetal100(b,c,d,e,f,a,h);break;case "beamWood150":g=new BeamWood150(b,c,d,e,f,a,m,l,n);break;case "beamWood50":case "beamWood50.1":case "beamWood50.2":case "beamWood50.3":case "beamWood50.4":case "beamWood50.5":case "beamWood50.6":case "beamWood50.7":case "beamWood50.8":case "beamWood50.9":case "beamWood50.10":case "beamWood50.11":case "beamWood50.12":case "beamWood50.13":case "beamWood50.14":g=
new BeamWood50(b,c,d,e,f,a);break;case "transformer":g=new Transformer(b,c,d,e,a);break;case "hummer":g=new Hummer(b,c,d,e,a);break;case "brick":case "brick1":case "brick2":case "brick3":case "brick4":case "brick5":case "brick6":case "brick7":case "brick8":case "brick9":g=new Brick(b,c,d,e,f,h,a,m,l,n);break;case "brickhuge1":case "brickhuge2":case "brickhuge3":case "brickhuge4":case "brickhuge5":case "brickhuge6":g=new BrickHuge(b,c,d,e,f,h,a);break;case "cannonUp":case "cannonUp1":g=new CannonUp(b,
c,d,e,f,a);break;case "cannonDown":g=new CannonDown(b,c,d,e,f,a);break;case "balloon":g=new Balloon(b,c,d,e,a);break;case "basket":g=new Basket(b,c,d,e,f,a);break;case "vaseLeft":g=new VaseLeft(b,c,d,e,f,a);break;case "vaseRight":g=new VaseRight(b,c,d,e,f,a);break;case "walkerBox":g=new WalkerBox(b,c,d,e,f,a);break;case "walkerSpider":g=new WalkerSpider(b,c,d,e,f,a);break;case "walkerBall":case "walkerBall1":g=new WalkerBall(b,c,d,e,f,a);break;case "walkerLeg":case "walkerLeg1":case "walkerLeg2":case "walkerLeg3":g=
new WalkerLeg(b,c,d,e,f,a);break;case "walkerFoot":case "walkerFoot1":case "walkerFoot2":case "walkerFoot3":g=new WalkerFoot(b,c,d,e,f,a);break;case "walkerFootLeft":case "walkerFootLeft1":g=new WalkerFootLeft(b,c,d,e,f,a);break;case "castle":g=new Castle(b,c,d,e,a);break;case "cannon":g=new CannonBall(b,c,d,e,a);break;case "target":h=gameGlobal.level.getPosition(a+"static");k=gameGlobal.level.getPosition(a+"glow");g=new Target(b,c,d,e,f,a,h,m,l,n,k);break;case "bow":g=new Bow(b,c,d,e,f,a);break;
case "plaitLink":case "plaitLink0":case "plaitLink1":case "plaitLink2":case "plaitLink3":case "plaitLink4":case "plaitLink5":case "plaitLink6":case "plaitLink7":case "plaitLink8":g=new PlaitLink(b,c,d,e,f,a);break;case "bridge":g=new Bridge(b,c,d,e,f,a);break;case "player":a=gameGlobal.level.getPosition(a+"ropeScale");playerSprite=g=new Player(b,c,d,e,a,p,m,l,n,q,r);break;case "weldPin":case "weldPin1":case "weld":case "weld1":case "weld2":case "weld3":case "weld4":g=new Weld(b,c,d,e,f,a,k);break;
case "weldwall":case "weldwall1":case "weldwall2":case "weldwall3":case "weldwall4":case "weldwall5":case "weldwall6":g=new WeldWall(b,c,d,e,f,a,k);break;case "weldVase":g=new WeldVase(b,c,d,e,f,a,k);break;case "dist":case "dist1":case "dist2":case "dist3":case "dist4":case "dist5":case "dist6":case "dist7":case "dist8":case "dist9":case "dist10":case "dist11":case "dist12":case "dist13":case "dist14":case "dist15":case "dist16":case "dist17":case "dist18":case "dist19":case "dist20":case "dist21":case "dist22":case "dist23":case "dist24":case "dist25":case "dist26":case "dist27":case "dist28":case "dist29":case "dist30":case "dist31":case "dist32":case "dist33":case "dist34":case "dist35":b=
gameGlobal.level.getPosition(a+"anchorAX");c=gameGlobal.level.getPosition(a+"anchorAY");k=gameGlobal.level.getPosition(a+"anchorBX");m=gameGlobal.level.getPosition(a+"anchorBY");d=gameGlobal.level.getPosition(a+"anchorAscaleX");e=gameGlobal.level.getPosition(a+"anchorAscaleY");f=gameGlobal.level.getPosition(a+"anchorAangle");l=gameGlobal.level.getPosition(a+"anchorAlength");n=gameGlobal.level.getPosition(a+"anchorAvisible");h=gameGlobal.level.getPosition(a+"anchorBvisible");g=gameGlobal.level.getPosition(a+
"ropevisible");p=gameGlobal.level.getPosition(a+"extendRope");a=gameGlobal.level.getPosition(a+"frequency");g=new Distance(b,c,k,m,d,e,f,l,n,h,g,p,a);break;case "tardist":case "tardist1":case "tardist2":case "tardist3":case "tardist4":case "tardist5":case "tardist6":case "tardist7":case "tardist8":case "tardist9":case "tardist10":case "tardist11":case "tardist12":case "tardist13":case "tardist14":case "tardist15":case "tardist16":case "tardist17":case "tardist18":case "tardist19":case "tardist20":case "tardist21":case "tardist22":case "tardist23":case "tardist24":case "tardist25":case "tardist26":case "tardist27":case "tardist28":case "tardist29":case "tardist30":case "tardist31":case "tardist32":case "tardist33":case "tardist34":case "tardist35":case "tardist36":b=
gameGlobal.level.getPosition(a+"anchorAX");c=gameGlobal.level.getPosition(a+"anchorAY");k=gameGlobal.level.getPosition(a+"anchorBX");m=gameGlobal.level.getPosition(a+"anchorBY");d=gameGlobal.level.getPosition(a+"anchorAscaleX");e=gameGlobal.level.getPosition(a+"anchorAscaleY");f=gameGlobal.level.getPosition(a+"anchorAangle");l=gameGlobal.level.getPosition(a+"anchorAlength");n=gameGlobal.level.getPosition(a+"anchorAvisible");h=gameGlobal.level.getPosition(a+"anchorBvisible");g=gameGlobal.level.getPosition(a+
"ropevisible");p=gameGlobal.level.getPosition(a+"extendRope");a=gameGlobal.level.getPosition(a+"frequency");g=new TargetJoint(b,c,k,m,d,e,f,l,n,h,g,p,a);break;case "revoluteMill":g=new RevoluteMill(b,c,d,e,k);break;case "revoluteCastle":g=new RevoluteCastle(b,c,d,e,k,a);break;case "revolutePin":case "revolute":case "revolute0":case "revolute1":case "revolute2":case "revolute3":case "revolute4":case "revolute5":case "revolute6":case "revolute7":case "revolute8":case "revolute9":case "revolute10":case "revolute11":case "revolute12":case "revolute13":case "revolute14":case "revolute15":f=
gameGlobal.level.getPosition(a+"speed");m=gameGlobal.level.getPosition(a+"torque");l=gameGlobal.level.getPosition(a+"motor");g=new Revolute(b,c,d,e,k,a,l,f,m);break;case "revoluteBridge":case "revoluteBridge0":case "revoluteBridge1":case "revoluteBridge2":case "revoluteBridge3":case "revoluteBridge4":case "revoluteBridge5":case "revoluteBridge6":case "revoluteBridge7":case "revoluteBridge8":case "revoluteBridge9":case "revoluteBridge10":case "revoluteBridge11":case "revoluteBridge12":case "revoluteBridge13":case "revoluteBridge14":case "revoluteBridge15":g=
new RevoluteBridge(b,c,d,e,k,a);break;case "revoluteTrainMinus":case "revoluteTrainMinus1":case "revoluteTrainMinus2":g=new RevoluteTrainMinus(b,c,d,e,k,a);break;case "revoluteWalker":g=new RevoluteWalker(b,c,d,e,k,a);break;case "revoluteCarMinus":case "revoluteCarMinus1":case "revoluteCarMinus2":g=new RevoluteCarMinus(b,c,d,e,k,a);break;case "stoneBox":case "stoneBox1":case "stoneBox2":case "stoneBox3":case "stoneBox4":case "stoneBox5":case "stoneBox6":case "stoneBox7":case "stoneBox8":case "stoneBox9":case "stoneBox10":case "stoneBox11":case "stoneBox12":case "stoneBox13":case "stoneBox14":case "stoneBox15":case "stoneBox16":case "stoneBox17":g=
new StoneBox(b,c,d,e,f,a);(e=gameGlobal.level.getGroundSpriteKey("ground"))&&a==e&&(groundBody=g);break;case "ballTarget1":case "ballTarget2":case "ballTarget3":case "ballTarget4":case "ballTarget5":case "ballTarget6":case "ballTarget7":case "ballTarget8":case "ballTarget9":case "ballTarget10":case "ballTarget11":case "ballTarget12":case "ballTarget13":case "ballTarget14":case "ballTarget15":case "ballTarget16":g=new BallTarget(b,c,d,e,f,a,m,l,n)}return g}}function CreateDistanceJoints(a){};function GameText(){}GameText.prototype={};GameText.CreateStandardTextFromKey=function(a,b,c){var d=a.level.getGameText(b),e=a.level.getPosition(b+"X");b=a.level.getPosition(b+"Y");return GameText.CreateStandardText(a,d.text,18,c,e,b)};
GameText.CreateStandardText=function(a,b,c,d,e,f,h){h=h?h:"";""!=h&&void 0!=h?(c={font:"65px TavridaAd Bold",fill:"#4F4CC2",wordWrap:!1,align:"left"},a=a.add.text(e,f,b,c),a.fontSize=25,a.fill=h,a.fontWeight="bold",a.stroke="white",a.strokeThickness=2):(c={font:"65px TavridaAd Bold",fill:"#4F4CC2"},a=a.add.text(e,f,b,c),a.fontSize=20,a.fontWeight="bold",a.fill=1==d?"#4F4CC2":2==d?"#228B22":"#FFFFFF");return a};
GameText.CreateStatisticsText=function(a,b,c,d,e){if(""!=e.color&&void 0!=e.color){var f={font:"65px TavridaAd Bold",fill:e.color,wordWrap:!1,align:"left"};f=a.add.text(c,d,b,f);f.fontSize=e.fontSize;f.fill=e.color;""!=e.strokeColor&&void 0!=e.strokeColor&&(f.stroke=e.strokeColor);0<e.strokeThickness&&(f.strokeThickness=e.strokeThickness)}return f};function YourIQ(){}YourIQ.prototype.GetIQ=function(a){a=[2,3,4,4,2,7,6,8,4,11,3,5,3,10,6,9,10,6,6,5,5,7,9,9,6];for(var b=0,c=loadGameInfo(nameOfTheGame),d=0;d<maxLevelReached-1;d++){var e=c[d+1];if(void 0==e||NaN==e)e=0;0!=e&&(b+=Math.max(a[d]-e,0))}return 100+b};function Pause(a){this.sprite;this.game=a}Pause.prototype={preload:function(){},create:function(){this.sprite=this.game.add.sprite(0,0,"pausebg");this.sprite.visible=!1},pause:function(){this.sprite.visible=!0;this.game.canvas.style.cursor="default";this.game.paused=!0},unPause:function(){this.sprite.visible=!1;this.game.paused=!1;this.game.canvas.style.cursor="none";cursorOverMenu=!1;cursor&&cursor.update();pause=!1},update:function(){},shutdown:function(){this.sprite.destroy()}};function VirCamera(){this.sprite;this.x;this.y;this.scaleY=this.scaleX=1}VirCamera.prototype={preload:function(){},create:function(){var a=gameGlobal;this.sprite=a.add.sprite(0,0,"vircamera");this.sprite.visible=!1;this.x=a.width/2;this.y=a.height/2;this.scaleY=this.scaleX=1},update:function(){}};function PlayerStats(){this.levelStats={};this.yourIQText}
PlayerStats.prototype={preload:function(){},create:function(){var a=gameGlobal,b=a.width,c=a.height-50+5;this.clickSprite=a.add.sprite(7,385.5,"click");styleObject={fontSize:27,color:"#71A212",strokeColor:"white",strokeThickness:4};this.clickCount=GameText.CreateStatisticsText(a," ",this.clickSprite.width+7,c+12.3,styleObject);styleObject={fontSize:26,color:"#4F4CC2",strokeColor:"white",strokeThickness:3};1==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-62,c+12.6,styleObject):
4==currLevel||6==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-68,c+12.6,styleObject):7==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-65,c+12.6,styleObject):8==currLevel||9==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-67,c+12.6,styleObject):10==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-78,c+12.6,styleObject):11==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,
0+b-72,c+12.6,styleObject):12==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-74,c+12.6,styleObject):13==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-74,c+12.6,styleObject):15==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-73,c+12.6,styleObject):17==currLevel?this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-72,c+12.6,styleObject):20==currLevel?(styleObject={fontSize:23,color:"#4F4CC2",strokeColor:"white",
strokeThickness:3},this.levelCount=GameText.CreateStatisticsText(a,""+currLevel,0+b-70,c+12.6,styleObject)):this.levelCount=22==currLevel||23==currLevel||25==currLevel?GameText.CreateStatisticsText(a,""+currLevel,0+b-78,c+12.6,styleObject):24==currLevel?GameText.CreateStatisticsText(a,""+currLevel,0+b-79,c+12.6,styleObject):2==(""+currLevel).length?GameText.CreateStatisticsText(a,""+currLevel,0+b-76,c+12.6,styleObject):GameText.CreateStatisticsText(a,""+currLevel,0+b-66,c+12.6,styleObject);20==currLevel?
(styleObject={fontSize:23,color:"#6F9F12",strokeColor:"white",strokeThickness:3,tabs:1},this.separator=GameText.CreateStatisticsText(a,"/",0+b-40,c+12.6,styleObject),styleObject={fontSize:23,color:"#6F9F12",strokeColor:"white",strokeThickness:3,tabs:1},this.numOfLevels=GameText.CreateStatisticsText(a,""+totalLevel,0+b-29,c+12.6,styleObject)):(styleObject={fontSize:26,color:"#6F9F12",strokeColor:"white",strokeThickness:3,tabs:1},this.separator=GameText.CreateStatisticsText(a,"/",0+b-50,c+12.6,styleObject),
styleObject={fontSize:26,color:"#6F9F12",strokeColor:"white",strokeThickness:3,tabs:1},this.numOfLevels=GameText.CreateStatisticsText(a,""+totalLevel,0+b-38,c+12.6,styleObject));styleObject={fontSize:30,color:"#4F4CC2",strokeColor:"white",strokeThickness:3};this.yourIQText=GameText.CreateStatisticsText(a,"Your IQ is: ",a.width/2,a.height/2,styleObject);this.yourIQText.visible=!1},update:function(){this.clickCount.setText(""+currClick)},save:function(a,b,c){this.levelStats[a]=b;this.yourIQText.visible=
!1},showIQText:function(a){1>=maxLevelReached||(this.yourIQText.visible=!0,a=new YourIQ,this.yourIQText.text=a.GetIQ(),this.yourIQText.setText("Your IQ is: "+this.yourIQText.text),this.yourIQText.addColor("#73A413",12),this.levelCount.addColor("#6F9F12",(""+currLevel).length),this.yourIQText.visible=1==currLevel?!1:!0)},hideIQText:function(a){this.yourIQText.visible=!1},getStats:function(){return this.levelStats},loadStats:function(a){this.levelStats=a},shutdown:function(){this.clickSprite.destroy();
this.yourIQText=this.numOfLevels=this.separator=this.levelCount=this.clickCount=null}};function Level(a,b){this.currentLevel=1;this.jsonData;this.levelData;this.game=b;console.log("levelNumber = "+a)}
Level.prototype={setCurrentLevel:function(a){this.currentLevel=a},init:function(){this.startLevel(0)},startLevel:function(a){this.setCurrentLevel(a);if(null==a||0>a)a=1;this.levelData=this.jsonData.levels[a];this.loadImage();this.loadGameObjects();this.loadAtlas();this.loadAudio();this.game.load.physics("physicsData","assets/physics.json")},getGroundSpriteKey:function(a){return this.levelData[a]},loadAtlas:function(){var a=this.levelData.atlas;if(a){var a=a[0],b;for(b in a)b.endsWith("Json")||this.game.load.atlas(b,
a[b],a[b+"Json"])}},getGameText:function(a){var b=this.levelData.gameText;if(b)return b=b[0],console.log(" game text  data "+JSON.stringify(b)),{text:b[a],font:b[a+"Font"],size:b[a+"FontSize"],fill:b[a+"Fill"]}},loadAudio:function(){var a=this.levelData.audio;if(a){var a=a[0],b;for(b in a)this.game.load.audio(b,a[b])}},loadImage:function(){var a=this.levelData.sprites;if(a){var a=a[0],b;for(b in a){var c=a[b];"sun"==b||b.startsWith("dist")||b.startsWith("tardist")||b.startsWith("mouseAnim")||this.game.load.image(b,
c)}}},loadGameObjects:function(){var a=this.levelData.gameObjects;if(a){var a=a[0],b;for(b in a){var c=a[b];console.log("key **** = "+b+" value ***** = "+c);"sun"==b||b.startsWith("dist")||b.startsWith("tardist")||b.startsWith("mouseAnim")||this.game.load.image(b,c)}}},getGameObjects:function(){return this.levelData.gameObjects[0]},getSprites:function(){return this.levelData.sprites[0]},loadScreenPositions:function(){var a=this.levelData.position;if(a){var a=a[0],b;for(b in a)b.endsWith("Y")||b.replace(/.$/,
"Y")}},getPosition:function(a){var b=this.levelData.position;if(b){var b=b[0],c;b&&(c=b[a]);return c}},endLevel:function(){}};function createSunAnimation(a,b,c,d,e,f){e=e?e:1;f=f?f:1;a=a.add.sprite(c,d,"sunAnim");a.scale.x=e;a.scale.y=f;a.animations.add("sun",Phaser.Animation.generateFrameNames("sun",1,472,"",4),3,!0);a.animations.play("sun",b,!0);return a}function createMouseAnimation(a,b,c,d){a=a.add.sprite(c,d,"mouseAnim");a.animations.add("mouse",Phaser.Animation.generateFrameNames("mouse",1,46,"",4),3,!0);a.animations.play("mouse",b,!0);return a}
function createCongratsAnimation(a,b,c,d){a=a.add.sprite(c,d,"congratsAnim");a.animations.add("congrats",Phaser.Animation.generateFrameNames("Congratulations",15,70,"",4),3,!0);a.animations.play("congrats",b,!1);return a}function createSparkAnimation(a,b,c,d){return a.add.sprite(c,d,"sparkAnim")}function playSparkAnimation(a,b){var c=a.animations.add("spark",Phaser.Animation.generateFrameNames("Spark",1,22,"",4),3,!0);a.animations.play("spark",b,!1);c.onComplete.add(sparkAnimationComplete,this)}
function sparkAnimationComplete(a,b){b.stop();a.x=-100;a.y=-100}function createBubbleAnimation(a,b){a=a.add.sprite(337,310,"bubbleAnim");var c=a.animations.add("bubble",Phaser.Animation.generateFrameNames("bubble",1,33,"",4),3,!0);a.scale.x=1.05;a.scale.y=1.05;a.animations.play("bubble",b,!0);c.onLoop.add(sparkAnimationComplete,this);return a}function animationLooped(a,b){3==b.loopCount&&(b.loop=!1,a.x=-100,a.y=-100)}
function playLoaderAnimmation(a){a=a.add.sprite(440,237,"preloaderDots");a.frame=0;a.animations.add("dots",[0,1,2],3,!0);a.animations.play("dots");return a};function MainMenu(a){this.game=a;this.sunFrameSpeed=20;this.spriteOver={};this.lockIcon={};this.spriteNormal={};this.clickInLevels={};this.spriteMenuGroup;this.menuGroup=this.game.add.group();this.menuGroup.name="mainMenuGroup";this.startDragging=this.mousePointerPreviousPositionSet=this.mousePointerPreviousPosition=0;this.mouseUpStatus=1;this.clickedPostion=0;this.swipingMenuSettings={};this.swipingMenuSettings.swipeSpeed=10;this.swipingMenuSettings.elasticSwipeSpeed=10;this.swipingMenuSettings.swipeSpeedOnLoad=
3E3;this.swipingMenuSettings.offset=400;this.swipingMenuSettings.furtheroffset=18.2;this.swipingMenuSettings.leftBoundary=-2100;this.swipingMenuSettings.rightBoundary=-20;this.swipingMenuSettings.leftTweeningInProgress=0;this.swipingMenuSettings.rightTweeningInProgress=0;this.elasticTweeningStarted=this.swipingMenuSettings.tweeningInProgress=0;this.tweenObject="";this.reverseCount=0;this.swipingMenuSettings.elasticTweeningPosition=0;this.swipingMenuSettings.elasticTweeningLeftPosition=-2118.2;this.swipingMenuSettings.elasticTweeningRightPosition=
-1.8000000000000114}
MainMenu.prototype={init:function(a){this.highestScore=this.highestScore||0;this.highestScore=Math.max(a||0,this.highestScore)},create:function(){gameGlobal=this.game;var a={fontSize:13,color:"#FFFFFF"};this.versionText="";showVersion&&(this.versionText=GameText.CreateStatisticsText(this.game,"v "+currentVersion,this.game.width-45,this.game.height-20,a),this.versionText.font="Arial",this.versionText.fontWeight="bold");this.bg=this.game.add.sprite(-2,-8.28,"plainbg");this.framework=this.game.add.sprite(0,
0,"framework");this.menubg=this.game.add.sprite(-40.25,29.5,"menubg");this.iqballTitle=this.game.add.sprite(238.55,19.45,"iqballTitle");this.selectText=GameText.CreateStatisticsText(this.game,"select level",7.2,87,{fontSize:19,color:"#30525f",strokeColor:"",strokeThickness:0});this.dragText=this.game.add.sprite(534.2,216.5,"clickDragText");this.menuFilm=this.game.add.sprite(-18,105.2,"film");this.menuFilm.inputEnabled=!0;this.menuFilm.scale.x=.986;this.menuFilm.scale.y=.946;this.menuFilm.events.onInputOut.add(this.menuFilmOut,
this);this.menuFilm.events.onInputOver.add(this.menuFilmOver,this);this.menuFilm.events.onInputDown.add(this.menuFilmDown,this);this.menuFilm.events.onInputUp.add(this.menuFilmUp,this);this.menuGroup.add(this.bg);this.menuGroup.add(this.menubg);this.menuGroup.add(this.iqballTitle);this.menuGroup.add(this.selectText);this.menuGroup.add(this.dragText);showVersion&&this.menuGroup.add(this.versionText);yourIQObj=new YourIQ;yourIQ=yourIQObj.GetIQ();this.game.canvas.style.cursor="none";this.loadLevelMenu();
this.displayGameMenu();this.switchCursor()},switchCursor:function(){menuCursor=new Cursor(this.game);menuCursor.create();menuCursor.enableArrow();cursor&&cursor.kill()},displayGameMenu:function(){GameMenu.CreateGameMenu(!1)},loadLevelMenu:function(){var a=10001;var b=-32;this.yPos=90;this.spriteMenuGroup=this.game.add.group();this.spriteMenuGroup.add(this.menuFilm);var c=this.game.add.tween(this.spriteMenuGroup);this.tweenFilmOnLoad=c;var d=maxLevelReached=loadGameInfo(nameOfTheGame).maxLevelReached;
gameInfo=loadGameInfo(nameOfTheGame);var e=loadGameInfo(nameOfTheGame)["current-level"];currLevel=e?e:currLevel;inMenu=!0;for(e=0;e<totalLevel;e++){var f="lev_"+a,h=this.game.add.sprite(b+30,this.yPos+25,f);this.spriteNormal[f]=h;var k=this.game.add.sprite(b+30,this.yPos+25,"lev_"+(+a+1));k.visible=!1;this.spriteOver[f]=k;var p=this.game.add.sprite(b+41,this.yPos+36,"lock");p.visible=!0;p.width=99;this.lockIcon[f]=p;var f={fontSize:13,color:"#ffffff"};if(0==e)var m=GameText.CreateStatisticsText(this.game,
"Level #1",b+menuWidth-45,this.yPos+17,f);else 10>e?(tempLevel=e+1,m=GameText.CreateStatisticsText(this.game,"#"+tempLevel,b+menuWidth-25.5,this.yPos+17,f)):(tempLevel=e+1,m=GameText.CreateStatisticsText(this.game,"#"+tempLevel,b+menuWidth-30,this.yPos+17,f));m.font="Arial";m.fontWeight="bold";var l=gameInfo[e+1];l=void 0!=l&&0<l?l:"";clickText=0==e?GameText.CreateStatisticsText(this.game,"Clicks: "+l,b+menuWidth-46,this.yPos+105,f):24==e?GameText.CreateStatisticsText(this.game,l,b+menuWidth-23,this.yPos+
105,f):10>l?GameText.CreateStatisticsText(this.game,l,b+menuWidth-22,this.yPos+105,f):GameText.CreateStatisticsText(this.game,l,b+menuWidth-25,this.yPos+105,f);clickText.font="Arial";clickText.fontWeight="bold";h.inputEnabled=!0;h.events.onInputDown.add(this.menuDown,this);h.events.onInputUp.add(this.menuUp,this);this.game.input.addMoveCallback(this.onDragStart,this);unLockAllLevels&&(d=25);e<d&&(h.events.onInputOut.add(this.menuOut,this),h.events.onInputOver.add(this.menuOver,this),p.visible=!1,
p.scale.set(1.1));this.spriteMenuGroup.add(h);this.spriteMenuGroup.add(k);this.spriteMenuGroup.add(m);this.spriteMenuGroup.add(p);this.spriteMenuGroup.add(clickText);b+=menuWidth;a+=1E4}5<currLevel&&(a=100*currLevel,a=22>currLevel?this.spriteMenuGroup.x-a:this.swipingMenuSettings.leftBoundary-this.swipingMenuSettings.furtheroffset,c.to({x:a},this.swipingMenuSettings.swipeSpeedOnLoad,"Linear",!0,0),c.onComplete.add(function(){this.startDragging=1},this));this.menuGroup.add(this.spriteMenuGroup)},unLockLevel:function(){var a=
"lev_"+10001*(+currLevel+1)+".png";this.lockIcon[a].visible=!1;a=this.spriteNormal[a];a.events.onInputDown.add(this.menuDown,this);a.events.onInputOut.add(this.menuOut,this);a.events.onInputOver.add(this.menuOver,this);a.events.onInputUp.add(this.menuUp,this)},onMainMenuGroupEvent:function(a,b){},onDragStart:function(a,b){this.game.input.activePointer.isDown&&this.tweenFilmOnLoad.isRunning&&this.tweenFilmOnLoad.stop();this.tweenObject||(this.tweenObject=this.game.add.tween(this.spriteMenuGroup));
var c=0;a=this.spriteMenuGroup.x;var d=this.mousePointerPreviousPosition-b;this.game.input.activePointer.isDown?c=this.mousePointerPreviousPosition>b?this.mousePointerPreviousPosition-b:b-this.mousePointerPreviousPosition:this.mouseupPosition&&(c=this.mousePointerPreviousPosition>this.mouseupPosition?this.mousePointerPreviousPosition-this.mouseupPosition:this.mouseupPosition-this.mousePointerPreviousPosition);0<d?1==this.swipingMenuSettings.rightTweeningInProgress&&this.tweenObject&&this.tweenObject.isRunning&&
(this.tweenObject.stop(),this.swipingMenuSettings.rightTweeningInProgress=0,0==this.mouseUpStatus&&(this.startDragging=1,this.elasticTweeningStarted=0)):0>d&&1==this.swipingMenuSettings.leftTweeningInProgress&&this.tweenObject&&this.tweenObject.isRunning&&(this.tweenObject.stop(),this.swipingMenuSettings.leftTweeningInProgress=0,0==this.mouseUpStatus&&(this.startDragging=1,this.elasticTweeningStarted=0));1==this.startDragging&&(this.tweenObject&&!this.tweenObject.isRunning&&(this.tweenObject=this.game.add.tween(this.spriteMenuGroup),
this.tweenObject.start()),b<this.mousePointerPreviousPosition?a>this.swipingMenuSettings.leftBoundary?(a=this.spriteMenuGroup.x,a-=c,a<this.swipingMenuSettings.leftBoundary&&(a=this.swipingMenuSettings.leftBoundary-this.swipingMenuSettings.furtheroffset),this.mousePointerPreviousPosition=b,this.swipingMenuSettings.leftTweeningInProgress=1,this.swipingMenuSettings.tweeningInProgress=1,this.startDragging=0,this.tweenObject.isRunning&&this.tweenObject.stop(),this.tweenObject.to({x:a},this.swipingMenuSettings.swipeSpeed,
"Linear",!0,0),this.tweenObject.start(),this.tweenObject.onComplete.add(function(){1!=this.mouseUpStatus&&(this.startDragging=1,this.swipingMenuSettings.leftTweeningInProgress=0)},this)):this.game.device.desktop&&(a=this.swipingMenuSettings.leftBoundary-40,this.swipingMenuSettings.elasticTweeningPosition=this.swipingMenuSettings.elasticTweeningLeftPosition,this.tweenObject.isRunning&&1==this.elasticTweeningStarted&&this.tweenObject.stop(),1!=this.mouseUpStatus&&(this.tweenObject=this.game.add.tween(this.spriteMenuGroup),
this.mousePointerPreviousPosition=b,this.swipingMenuSettings.rightTweeningInProgress=1,this.startDragging=0,this.tweenObject.start(),this.elasticTweeningStarted=1,this.tweenObject.to({x:a},this.swipingMenuSettings.swipeSpeed,"Linear",!0,0),this.tweenObject.onComplete.add(function(){this.startDragging=1;this.swipingMenuSettings.rightTweeningInProgress=0},this))):b>this.mousePointerPreviousPosition?a<this.swipingMenuSettings.rightBoundary?(a+=c,a>this.swipingMenuSettings.rightBoundary&&(a=this.swipingMenuSettings.rightBoundary+
this.swipingMenuSettings.furtheroffset),this.mousePointerPreviousPosition=b,this.swipingMenuSettings.rightTweeningInProgress=1,this.swipingMenuSettings.tweeningInProgress=1,this.startDragging=0,this.tweenObject.isRunning&&this.tweenObject.stop(),this.tweenObject.to({x:a},this.swipingMenuSettings.swipeSpeed,"Linear",!0,0),this.tweenObject.start(),this.tweenObject.onComplete.add(function(){1!=this.mouseUpStatus&&(this.startDragging=1,this.swipingMenuSettings.rightTweeningInProgress=0)},this)):this.game.device.desktop&&
(a=this.swipingMenuSettings.rightBoundary+30,this.swipingMenuSettings.elasticTweeningPosition=this.swipingMenuSettings.elasticTweeningRightPosition,this.tweenObject.isRunning&&1==this.elasticTweeningStarted&&this.tweenObject.stop(),1!=this.mouseUpStatus&&(this.tweenObject=this.game.add.tween(this.spriteMenuGroup),this.mousePointerPreviousPosition=b,this.swipingMenuSettings.rightTweeningInProgress=1,this.startDragging=0,this.tweenObject.start(),this.elasticTweeningStarted=1,this.tweenObject.to({x:a},
this.swipingMenuSettings.swipeSpeed,"Linear",!0,0),this.tweenObject.onComplete.add(function(){this.startDragging=1;this.swipingMenuSettings.rightTweeningInProgress=0},this))):this.mousePointerPreviousPosition=b)},menuFilmUp:function(a,b){this.startDragging=0;this.mouseUpStatus=1;this.mouseupPosition=this.mousePointerCurrentPosition=b.x},menuUp:function(a,b){this.startDragging=0;this.mouseUpStatus=1;this.mouseupPosition=this.mousePointerCurrentPosition=b.x;if(this.game.device.desktop)this.tweenObject&&
(this.tweenObject.isRunning?this.tweenObject.isRunning&&1==this.elasticTweeningStarted&&(this.tweenObject.stop(),this.tweenObject=this.game.add.tween(this.spriteMenuGroup),this.tweenObject.start(),this.elasticTweeningStarted=0,this.tweenObject.to({x:this.swipingMenuSettings.elasticTweeningPosition},this.swipingMenuSettings.swipeSpeed,"Linear",!0,0),this.tweenObject.onComplete.add(function(){this.startDragging=1;this.swipingMenuSettings.rightTweeningInProgress=0},this)):(this.startDragging=0,this.swipingMenuSettings.rightTweeningInProgress=
0,this.swipingMenuSettings.leftTweeningInProgress=0,this.clickedPostion==this.mousePointerCurrentPosition&&this.selectLevel(a,b),1==this.elasticTweeningStarted&&(this.tweenObject.stop(),this.tweenObject=this.game.add.tween(this.spriteMenuGroup),this.tweenObject.start(),this.elasticTweeningStarted=0,this.tweenObject.to({x:this.swipingMenuSettings.elasticTweeningPosition},this.swipingMenuSettings.swipeSpeed,"Linear",!0,0),this.tweenObject.onComplete.add(function(){this.startDragging=1;this.swipingMenuSettings.rightTweeningInProgress=
0},this))));else{var c=0,c=this.clickedPostion>this.mousePointerCurrentPosition?this.clickedPostion-this.mousePointerCurrentPosition:this.mousePointerCurrentPosition-this.clickedPostion;this.clickedPostion===this.mousePointerCurrentPosition?this.selectLevel(a,b):this.game.device.android&&10>c&&this.selectLevel(a,b)}},menuFilmDown:function(a,b){this.mousePointerPreviousPosition=b.x;this.startDragging=1;this.mouseUpStatus=0},menuDown:function(a,b){this.clickedPostion=this.mousePointerPreviousPosition=
b.x;this.startDragging=1;this.mouseUpStatus=0;soundOn&&(this.game.btnClickMusic.play(),this.game.btnClickMusic.volume=.22)},menuFilmOut:function(a,b){},menuFilmOver:function(a,b){},menuOver:function(a,b){soundOn&&(this.game.btnOverMusic.play(),this.game.btnOverMusic.volume=.22);a=this.spriteOver[a.key];for(var c in this.spriteOver)this.spriteOver.hasOwnProperty(c)&&(this.spriteOver[c].visible=!1);a&&(a.visible=!0,this.game.world.bringToTop(a))},menuOut:function(a,b){if(a=this.spriteOver[a.key])a.visible=
!1},selectLevel:function(a,b){a=this.getLevelClicked(a);a>maxLevelReached&&!0!==unLockAllLevels||(currLevel=a,storeGameInfo(nameOfTheGame,currLevel,""),this.game.state.start("Game"),this.shutdown())},getLevelClicked:function(a){a=a.key;var b=a.indexOf("_"),b=b+1;if(-1!=b){var c=a.substr(b);c=Math.round(c/1E4)}return c},update:function(){},actionOnClick:function(){},fadePicture:function(){this.game.add.tween(this.coolmath).to({alpha:0},100,Phaser.Easing.Linear.None,!0);this.state.start("Game")},shutdown:function(){0<
this.spriteMenuGroup.children.length&&this.spriteMenuGroup.destroy();menuCursor&&menuCursor.shutdown();this.menuGroup&&(this.menuGroup.destroy(),this.menuGroup=null);this.framework&&this.framework.destroy()}};function GameMenu(){this.menuItems=["Back","Restart","Pause","Menu","SoundOn"]}var over_sprite,over_anim;
GameMenu.prototype={preload:function(){},create:function(){this.menuNormalObjects={};this.menuOverObjects={};this.menuClickedObjects={};var a=gameGlobal;this.game=gameGlobal;var b=this;this.gameMenuGroup=a.add.group();this.gameMenuGroup.name="gameMenuGroup";this.sprite3="";for(var c=a.width-41.8*this.menuItems.length,d=0;d<this.menuItems.length;d++){var e=this.menuItems[d];var f=this.menuItems[d]+"0001";var h=a.add.sprite(c,2,f);h.inputEnabled=!0;"SoundOn0001"===f&&h.events.onInputDown.add(this.soundMenuDown,
this);"Pause"===this.menuItems[d]?(h.events.onInputUp.add(this.gameMenuDown,this),h.events.onInputDown.add(this.pauseMenuDown,this)):h.events.onInputDown.add(this.gameMenuDown,this);h.events.onInputOut.add(this.gameMenuOut,this);h.events.onInputOver.add(this.gameMenuOver,this);this.menuNormalObjects[e]=h;this.gameMenuGroup.add(h);var k=c-4;var p=-.5;k=a.add.sprite(k,p,this.menuItems[d]+"0002");this.menuOverObjects[e]=k;p=this.menuItems[d]+"0003";var m=2,l=c;"SoundOn"===this.menuItems[d]&&(m=-1,l=
c-1);var n=a.add.sprite(l,m,p);this.menuClickedObjects[e]=n;"SoundOn"===e&&(m=this.menuItems[d]+"0004",p=1,this.sprite3=a.add.sprite(c,p,m),this.sprite3.inputEnabled=!0,this.sprite3.input.priorityID=2,this.sprite3.events.onInputOver.add(this.gameMenuDownToggle1,this),this.sprite3.events.onInputUp.add(this.gameMenuDown3,this),this.sprite3.events.onInputDown.add(this.gameMenuDown4,this),this.sprite3.visible=!1,this.sprite2=a.add.sprite(c,2,f),this.sprite2.inputEnabled=!0,this.sprite2.events.onInputOver.add(this.gameMenuDownToggle2,
this),this.sprite2.events.onInputDown.add(this.gameMenuDownSprit2,this),this.sprite2.events.onInputUp.add(this.gameMenuDownSprit2,this),this.sprite2.visible=!1);this.gameMenuGroup.add(k);this.gameMenuGroup.add(n);n.inputEnabled=!0;n.input.priorityID=2;"Pause"!=e&&"SoundOn"!=e&&"Menu"!=e||n.events.onInputDown.add(this.gameMenuDownToggle,this);"SoundOn"==e&&n.events.onInputOut.add(this.gameMenuOut,this);k.visible=!1;n.visible=!1;c+=40;document.body.addEventListener("mouseleave",function(a){if(!b.game.input.activePointer.withinGame){cursorOverMenu=
!1;for(var c in b.menuOverObjects)b.menuOverObjects[c].visible=!1,a=b.menuNormalObjects[c],"SoundOn"===c?soundOn?a.visible=!0:(b.menuNormalObjects[c].visible=!1,b.menuOverObjects[c].visible=!1,b.menuClickedObjects[c].visible=!1,b.sprite3.visible=!0):a.visible=!0,over_sprite&&(over_sprite.visible=!1),over_anim=null}});document.body.addEventListener("mouseover",function(a){"canvas"!==a.target.localName&&(b.menuOverObjects.SoundOn.visible=!1,soundOn?(b.sprite3.visible=!1,sprite3=b.menuNormalObjects.SoundOn,
sprite3.visible=!1,b.sprite2.visible=!0,over_sprite&&(over_sprite.visible=!1),over_anim=null):(n=b.menuClickedObjects.SoundOn,n.visible=!1,b.sprite3.visible=!0))})}this.gameMenuGroup.inputEnableChildren=!0;this.gameMenuGroup.onChildInputDown.add(this.onGroupEventDownOver,this);this.gameMenuGroup.onChildInputOver.add(this.onGroupEventDownOver,this);this.gameMenuGroup.onChildInputOut.add(this.onGroupEventOut,this);this.setSoundState();this.game.device.desktop?this.game.input.addMoveCallback(this.mouseMoveCall,
this):(this.game.input.onUp.add(this.onUp,this),this.game.input.addMoveCallback(this.inputUp,this),h.events.onInputDown.add(this.mobUp,this),h.events.onInputUp.add(this.mobUp,this),"SoundOn"===e&&this.sprite3.events.onInputDown.add(this.mobUp,this))},onUp:function(){cursorOverMenu=!1},mouseMoveCall:function(){if(!cursorOverMenu)for(var a in this.menuOverObjects){this.menuOverObjects[a].visible=!1;var b=this.menuNormalObjects[a];"SoundOn"===a?soundOn?b.visible=!0:(this.menuClickedObjects[a].visible=
!1,this.sprite3.visible=!0):b.visible=!0;over_sprite&&(over_sprite.visible=!1);over_anim=null}},mobUp:function(a,b){for(var c in this.menuOverObjects)a.key!==c&&(this.menuOverObjects[c].visible&&(this.menuOverObjects[c].visible=!1,this.menuNormalObjects[c].visible=!0),over_sprite&&(over_sprite.visible=!1),over_anim=null)},inputUp:function(){if(!cursorOverMenu)for(var a in this.menuOverObjects)if(this.menuOverObjects[a].visible){this.menuOverObjects[a].visible=!1;var b=this.menuNormalObjects[a];"SoundOn"===
a?soundOn?b.visible=!0:gameObj.sprite3.visible=!0:b.visible=!0;over_sprite&&(over_sprite.visible=!1);over_anim=null}},soundMenuDown:function(){cursorOverMenu=!0;gameGlobal.btnClickMusic.play();gameGlobal.btnClickMusic.volume=.22},gameMenuDown3:function(a,b){cursor&&cursor.enableArrow();cursorOverMenu=!0;var c=this.getMenuKey(a.key);c&&(a=this.menuNormalObjects[c],b=this.menuClickedObjects[c],c=this.menuOverObjects[c],this.sprite3.visible=!1,a.visible=!1,b.visible=!0,c.visible=!1)},gameMenuDown4:function(a,
b){cursor&&cursor.enableArrow();cursorOverMenu=!0},setSoundState:function(){var a=this.menuOverObjects.SoundOn,b=this.menuClickedObjects.SoundOn,c=this.menuNormalObjects.SoundOn;a&&b&&c&&(soundOn?(a.visible=!1,b.visible=!1,c.visible=!0):(a.visible=!1,b.visible=!1,c.visible=!1,this.sprite3.visible=!0))},onGroupEventDownOver:function(){cursor&&cursor.enableArrow();cursorOverMenu=!0},onGroupEventOut:function(){cursorOverMenu=!1;cursor&&(inMenu?cursor.enableArrow():cursor.enableSpike())},refresh:function(){},
gameMenuOver:function(a,b){cursorOverMenu=!0;soundOn&&(gameGlobal.btnOverMusic.play(),gameGlobal.btnOverMusic.volume=.22);b=this.getMenuKey(a.key);if("SoundOn"==b){a=this.menuOverObjects[b];var c=this.menuClickedObjects[b],d=this.menuNormalObjects[b];this.sprite2.visible=!1;soundOn||(a.visible=!1,c.visible=!0,d.visible=!1,this.sprite3.visible=!1)}b&&(a=this.menuOverObjects[b],a.visible=!0,this.enableAnimation(b,a))},enableAnimation:function(a,b){over_sprite&&over_sprite.destroy();switch(a){case "SoundOn":if(this.sprite3.visible)break;
over_sprite=this.game.add.sprite(b.x+20,b.y+20,"sound_on_over_anim");over_sprite.anchor.set(.5);over_anim=over_sprite.animations.add("sound_on_anim");over_anim.play(30,!0);break;case "Pause":over_sprite=this.game.add.sprite(b.x+20,b.y+22.5,"pause_over_anim");over_sprite.anchor.set(.5);over_anim=over_sprite.animations.add("pause_anim");over_anim.play(30,!1);break;case "Restart":over_sprite=this.game.add.sprite(b.x+22,b.y+20,"restart_over_anim");over_sprite.anchor.set(.5);over_anim=over_sprite.animations.add("restart_anim");
over_anim.play(30,!0);break;case "Menu":over_sprite=this.game.add.sprite(b.x+20,b.y+20,"menu_over_anim");over_sprite.anchor.set(.5);over_anim=over_sprite.animations.add("menu_anim");over_anim.play(30,!0);break;case "Back":over_sprite=this.game.add.sprite(b.x+20,b.y+22,"back_over_anim"),over_sprite.anchor.set(.5),over_anim=over_sprite.animations.add("back_anim"),over_anim.play(30,!1)}},getMenuKey:function(a){var b=a.indexOf("0"),c;b&&(c=a.substr(0,b));return c},gameMenuOut:function(a,b){var c=this.getMenuKey(a.key);
c&&(b=this.menuOverObjects[c],b.visible=!1,a.visible=!0,"SoundOn"==c&&(b=this.menuOverObjects[c],a=this.menuClickedObjects[c],c=this.menuNormalObjects[c],soundOn?(b.visible=!1,a.visible=!1,c.visible=!0,this.sprite3.visible=!1):(b.visible=!1,a.visible=!1,c.visible=!1,this.sprite3.visible=!0)));over_sprite&&over_sprite.destroy();over_anim=null},gameMenuDown:function(a,b){cursorOverMenu=!0;a.key.indexOf("SoundOn");soundOn&&(gameGlobal.btnClickMusic.play(),gameGlobal.btnClickMusic.volume=.22);var c=this.getMenuKey(a.key);
if(c&&"Pause"!==c)if("SoundOn"==c){b=this.menuOverObjects[c];a=this.menuClickedObjects[c];var d=this.menuNormalObjects[c];soundOn&&(b.visible=!1,a.visible=!0,d.visible=!1,this.sprite3.visible=!1)}else b=this.menuClickedObjects[c],b.visible=!0,a.visible=!1;else c&&(b=this.menuOverObjects[c],b.visible=!1,a.visible=!0);switch(c){case "SoundOn":soundOn&&(gameGlobal.btnClickMusic.play(),gameGlobal.btnClickMusic.volume=.22,gameGlobal.btnClickMusic.onStop.addOnce(function(){gameGlobal.sound.pauseAll()},
this));soundOn=!1;break;case "Pause":this.game.pause.pause();pause=!0;break;case "Restart":this.restartLevel();break;case "Menu":this.displayLevelMenu(!0);break;case "Back":this.navigateBack()}},pauseMenuDown:function(a,b){soundOn&&(gameGlobal.btnClickMusic.play(),gameGlobal.btnClickMusic.volume=.22);for(var c in this.menuOverObjects)a.key!==c&&(this.menuOverObjects[c].visible&&(this.menuOverObjects[c].visible=!1,this.menuNormalObjects[c].visible=!0),over_sprite&&(over_sprite.visible=!1),over_anim=
null)},displayLevelMenu:function(){levelMenu&&levelMenu.shutdown();levelMenu=new MainMenu(gameGlobal);levelMenu.create()},navigateBack:function(){levelMenu.menuGroup.visible=!1;this.gameMenuGroup.visible=!1;GameMenu.CreateGameMenu(!0);inMenu=!1;levelMenu.shutdown()},resetState:function(){},restartLevel:function(){pause=!1;cursor&&cursor.enableSpike();this.game.state.start("Game")},restartGame:function(){pause=!1;this.resetState();this.gameMenuGroup.visible=!1;this.game.state.start("GameLaunch")},
enableAll:function(a){a={Back:!0,Menu:!0,Pause:!0,Restart:!0,SoundOn:!0};this.enable(a)},hideAll:function(a){a={Back:!1,Menu:!1,Pause:!1,Restart:!1,SoundOn:!1};this.enable(a)},enable:function(a){for(var b=0;b<this.menuItems.length;b++){var c=this.menuItems[b],d=this.menuNormalObjects[c],e=this.menuClickedObjects[c],f=this.menuOverObjects[c],h=a[c];h||(h=!1);if(0==h)d.visible=h,e.visible=h,f.visible=h;else{d.visible=h;e.visible=!1;if("Pause"==c||"SoundOn"==c)1==pause&&(e.visible=!0,d.visible=!1),0==
soundOn&&(e.visible=!0,d.visible=!1);"Back"==c&&1==h&&(f.x=d.x=e.x=this.game.width-90)}}},gameMenuOverToggle:function(a,b){if(b=this.getMenuKey(a.key))this.menuNormalObjects[b].visible=!0,a.visible=!1},gameMenuOutToggle:function(a,b){},gameMenuDownToggle:function(a,b){cursorOverMenu=!0;if(b=this.getMenuKey(a.key))this.menuNormalObjects[b].visible=!0,a.visible=!1;switch(b){case "SoundOn":soundOn=!0;gameGlobal.sound&&gameGlobal.sound.resumeAll();break;case "Pause":this.game.pause.unPause();cursorOverMenu=
!0;pause=!1;break;case "Restart":this.restartLevel();break;case "Menu":this.displayLevelMenu();levelMenu.menuGroup.visible=!0;break;case "Back":this.navigateBack()}},gameMenuDownToggle2:function(a,b){cursor&&cursor.enableArrow();cursorOverMenu=!0;if(a=this.getMenuKey(a.key)){b=this.menuNormalObjects[a];var c=this.menuClickedObjects[a],d=this.menuOverObjects[a];this.sprite2.visible=!1;d.visible=!0;b.visible=!0;c.visible=!1;this.enableAnimation(a,d)}},gameMenuDownSprit2:function(){cursorOverMenu=!0},
gameMenuDownToggle1:function(a,b){cursor&&cursor.enableArrow();cursorOverMenu=!0;var c=this.getMenuKey(a.key);c&&(a=this.menuNormalObjects[c],b=this.menuClickedObjects[c],c=this.menuOverObjects[c],this.sprite3.visible=!1,a.visible=!1,b.visible=!0,c.visible=!1)},update:function(){},shutdown:function(){over_sprite&&over_sprite.destroy();for(var a=0;a<this.menuItems.length;a++){var b=this.menuItems[a],c=this.menuNormalObjects[b],d=this.menuClickedObjects[b],b=this.menuOverObjects[b];c&&c.destroy();d&&
d.destroy();b&&b.destroy()}this.gameMenuGroup&&(this.gameMenuGroup.destroy(),this.gameMenuGroup=null)}};GameMenu.CreateGameMenu=function(a){gameMenu&&gameMenu.shutdown();gameMenu=new GameMenu;1==a?gameMenu.menuItems=["Restart","Pause","Menu","SoundOn"]:(gameMenu.menuItems=["Back","SoundOn"],gameInProgress||(gameMenu.menuItems=["SoundOn"]));gameMenu.create()};var IQBall=IQBall||{};IQBall.Boot=function(){};
IQBall.Boot.prototype={preload:function(){this.load.image("sitelock_bg","assets/images/sitelock/sitelock_bg.png");this.load.image("sitelock_textandrobot","assets/images/sitelock/textandrobot.png");this.load.image("sitelock_play","assets/images/sitelock/play.png");this.load.image("sitelock_play_hover","assets/images/sitelock/play_hover.png");this.load.image("preloaderBackground","assets/images/background/preloader_background.jpg");this.load.image("preloaderBar","assets/images/background/preloader_bar.png");
this.load.image("preloaderBg","assets/images/background/loading-bg.png");this.load.image("preloaderBarText","assets/images/background/loading-text.png");this.load.spritesheet("preloaderDots","assets/images/background/dotssprite.png",53,11);this.load.atlas("head","assets/images/parts/Head.png","assets/images/parts/head.json");this.load.text("levels","assets/levels.json");this.load.image("pausebg","assets/images/background/Pause.png");this.load.spritesheet("pointer","assets/images/sprites/Pointer.png",
72,72,18);this.load.spritesheet("pause_over_anim","assets/images/menu/pause_over_seq.png",23,19,8);this.load.spritesheet("sound_on_over_anim","assets/images/menu/sound_on_over_seq.png",24,25,23);this.load.spritesheet("menu_over_anim","assets/images/menu/menu_over_seq.png",19,19,46);this.load.spritesheet("restart_over_anim","assets/images/menu/restart_over_seq.png",24,24,40);this.load.spritesheet("back_over_anim","assets/images/menu/back_over_seq.png",17,27,12);this.load.spritesheet("fireworks_anim",
"assets/images/sprites/firework.png",251,251,17)},create:function(){if(siteLock)this.game.device.desktop?(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.minWidth=gameWidth/2,this.scale.minHeight=gameHeight/2,this.scale.maxWidth=gameWidth,this.scale.maxHeight=gameHeight,this.scale.pageAlignHorizontally=!1,this.scale.pageAlignVertically=!1):(this.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.scale.maxWidth=gameWidth,this.scale.maxHeight=gameHeight,this.scale.pageAlignHorizontally=
!0,this.scale.pageAlignVertically=!0),this.sitelock_bg=this.game.add.sprite(0,0,"sitelock_bg"),this.sitelock_textandrobot=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"sitelock_textandrobot"),this.sitelock_textandrobot.x=this.scale.width/2-this.sitelock_textandrobot.width/2,this.sitelock_play=this.game.add.button(this.game.world.centerX,this.sitelock_textandrobot.y,"sitelock_play",this.sitelockOnClick,this,2,1,0),this.sitelock_textandrobot.y=this.scale.height/2-this.sitelock_textandrobot.height/
2-this.sitelock_play.height/2,this.sitelock_play.x=this.scale.width/2-this.sitelock_play.width/2,this.sitelock_play.y=this.sitelock_textandrobot.y+this.sitelock_play.height+150,this.sitelock_play.width=158,this.sitelock_play.height=62,this.sitelock_play.onInputOver.add(this.sitelock_play_over,this),this.sitelock_play.onInputOut.add(this.sitelock_play_out,this),this.sitelock_play.inputEnabled=!0,this.sitelock_play.input.useHandCursor=!0;else{var a=this;this.game.stage.backgroundColor="#ffffff";this.stage.disableVisibilityChange=
!0;this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;if(this.game.device.desktop)this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.minWidth=gameWidth/2,this.scale.minHeight=gameHeight/2,this.scale.maxWidth=gameWidth,this.scale.maxHeight=gameHeight,this.scale.pageAlignHorizontally=!1,this.scale.pageAlignVertically=!1;else{this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;this.scale.minWidth=gameWidth/2;this.scale.minHeight=gameHeight/2;this.scale.maxWidth=2048;var b=this;this.scale.maxHeight=
!0===b.game.device.iPad?1228:736;this.scale.pageAlignHorizontally=!0;this.scale.pageAlignVertically=!0;this.scale.forceOrientation(!0,!1);this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this);this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this);this.scale.refresh();this.scale.isLandscape?this.leaveIncorrectOrientation():this.enterIncorrectOrientation();window.addEventListener("orientationchange",function(){if(screen.width<screen.height){b.scale.scaleMode=
Phaser.ScaleManager.EXACT_FIT;b.enterIncorrectOrientation();var a=450;!0===b.game.device.iPad&&(a=515);setTimeout(function(){document.getElementById("orientation").style.width=window.innerWidth+"px";document.getElementById("orientation").style.height=window.innerHeight+"px"},a)}else b.leaveIncorrectOrientation(),b.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;if(!0===b.game.device.iPhone||!0===b.game.device.iPad)window.matchMedia("(orientation: portrait)").matches&&(b.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,
b.enterIncorrectOrientation(),setTimeout(function(){document.getElementById("orientation").style.width=window.innerWidth+"px";document.getElementById("orientation").style.height=window.innerHeight+"px"},500)),window.matchMedia("(orientation: landscape)").matches&&(b.leaveIncorrectOrientation(),b.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL)})}document.body.addEventListener("mousedown",function(b){"canvas"!==b.target.localName&&"undefined"!==typeof a.game.pause&&(a.game.pause.pause(),pause=!0)});window.parent.document.body.addEventListener("mousedown",
function(b){"canvas"!==b.target.localName&&"undefined"!==typeof a.game.pause&&(a.game.pause.pause(),pause=!0)});window.onblur=function(){"undefined"!==typeof a.game.pause&&(a.game.pause.pause(),pause=!0)};this.state.start("Preload")}},sitelock_play_over:function(){this.sitelock_play.loadTexture("sitelock_play_hover")},sitelock_play_out:function(){this.sitelock_play.loadTexture("sitelock_play")},sitelockOnClick:function(){window.open(this.game.device.desktop?document.location.href:document.location.href,
"_blank")},enterIncorrectOrientation:function(){this.scale.refresh();document.getElementById("orientation").style.display="block";document.getElementById("orientation").style.width=window.innerWidth+"px";document.getElementById("orientation").style.height=window.innerHeight+"px"},leaveIncorrectOrientation:function(){document.getElementById("orientation").style.display="none"}};IQBall=IQBall||{};IQBall.Preload=function(){};
IQBall.Preload.prototype={init:function(){},preload:function(){this.background=this.add.sprite(0,0,"preloaderBg");this.preloadBar=this.add.sprite(200,200,"preloaderBarText");this.load.setPreloadSprite(this.preloadBar);playLoaderAnimmation(this);this.loadGameAssets();this.loadGameMenuAssets();for(var a=["Back","Menu","Pause","Restart","SoundOn"],b=0;b<a.length;b++)this.loadMainMenuAssets(a[b]);this.test=this.game.add.text(-20,-20,".",{font:"65px TavridaAd Bold"});this.test.fontSize=25;this.test.fill=
"red";this.test.fontWeight="bold";this.test.stroke="white";this.test.strokeThickness=2;gameInfo=loadGameInfo(nameOfTheGame)},loadGameAssets:function(){this.game.level=new Level(1,this);this.game.level.jsonData=JSON.parse(this.game.cache.getText("levels"));this.game.level.init()},loadGameMenuAssets:function(){for(var a=10001,b=0;b<totalLevel;b++){var c="lev_"+a;this.game.load.image(c,"assets/images/sprites/menu/"+c+".png");c="lev_"+(a+1);this.game.load.image(c,"assets/images/sprites/menu/"+c+".png");
a+=1E4}},loadMainMenuAssets:function(a){for(var b=0;4>b;b++){var c=1+b;this.game.load.image(a+"000"+c,"assets/images/menu/"+a+"000"+c+".png")}},create:function(){pause=gameOver=levelComplete=!1;soundOn=!0;cursorOverMenu=inMenu=gameInProgress=!1;this.state.start("GameLaunch")}};IQBall=IQBall||{};IQBall.GameLaunch=function(){this.sunFrameSpeed=30};
IQBall.GameLaunch.prototype={init:function(a){this.highestScore=this.highestScore||0;this.highestScore=Math.max(a||0,this.highestScore);a=loadGameInfo(nameOfTheGame);void 0!=a.maxLevelReached&&""!=a.maxLevelReached&&(currLevel=a.maxLevelReached)},create:function(){gameGlobal=this.game;this.bg=this.game.add.sprite(0,0,"plainbg");this.bgscene=this.game.add.sprite(12,5,"scene");this.iqballTitle=this.game.add.sprite(227,15,"iqballTitle");this.earth=this.game.add.sprite(-5,361,"earth");this.front=this.game.add.sprite(-8,
342,"front");this.playerRopeTarget=this.game.add.sprite(125,322,"playerRopeTarget");this.bgscene.anchor.setTo(.1,-.07);this.game.bgscene=this.bgscene;this.playBtn=this.game.add.button(262,178,"playNormal",this.actionOnClick,this,2,1,0);this.playBtn.width=102;this.playBtn.height=55;this.playBtn.onInputOver.add(this.over,this);this.playBtn.onInputOut.add(this.out,this);this.playBtn.onInputUp.add(this.up,this);this.playBtn.onInputDown.add(this.down,this);this.playBtn.inputEnabled=!0;this.playBtn.input.useHandCursor=
!0;this.sun=createSunAnimation(this,this.sunFrameSpeed,222,72);this.sky=this.game.add.sprite(73,64,"sky");this.createSoundAndMusic()},update:function(){this.game.input.activePointer.justPressed()},up:function(){},over:function(){this.playBtn.loadTexture("playOver")},down:function(){this.playBtn.loadTexture("playDown")},out:function(){this.playBtn.loadTexture("playNormal")},createSoundAndMusic:function(){"object"!==typeof this.game.gameMusic&&(this.game.gameMusic=this.game.add.audio("music"));this.game.btnClickMusic=
this.game.add.audio("buttonClick");this.game.btnOverMusic=this.game.add.audio("buttonOver");this.game.hookFly=this.game.add.audio("hookFly");this.game.hookHard=this.game.add.audio("hookHard");this.game.hookSoft=this.game.add.audio("hookSoft");this.game.setLevel=this.game.add.audio("setLevel");this.game.winner=this.game.add.audio("winner")},actionOnClick:function(){soundOn&&(this.game.btnClickMusic.play(),this.game.btnClickMusic.volume=.22);this.coolmath=this.game.add.sprite(0,0,"coolmath");this.game.time.events.add(2*
Phaser.Timer.SECOND,this.fadePicture,this)},fadePicture:function(){this.game.add.tween(this.coolmath).to({alpha:0},100,Phaser.Easing.Linear.None,!0);soundOn&&!this.game.gameMusic.isPlaying&&(this.game.gameMusic.loopFull(),this.game.gameMusic.volume=.1);1==maxLevelReached?this.state.start("Game"):(this.shutdown(),levelMenu=new MainMenu(this.game),levelMenu.create())},shutdown:function(){console.log(" clean up of game launch sprite");this.playBtn.destroy();this.bgscene.kill();this.bg.kill();this.earth.destroy();
this.front.destroy();this.playerRopeTarget.destroy();this.sun.animations.stop();this.sun.destroy()}};IQBall=IQBall||{};IQBall.Game=function(){this.sunFrameSpeed=30;this.timestep=1/frameRate;this.fireCount=0};
IQBall.Game.prototype={preload:function(){this.background=this.add.sprite(0,0,"preloaderBg");this.preloadBar=this.add.sprite(200,200,"preloaderBarText");this.plAnim=playLoaderAnimmation(this);this.game.physics.startSystem(Phaser.Physics.BOX2D);this.game.physics.box2d.debugDraw.shapes=!0;this.game.physics.box2d.debugDraw.joints=!0;this.game.physics.box2d.gravity.y=500;this.game.physics.box2d.setBoundsToWorld();this.game.level.startLevel(currLevel);gameOver=!1;currClick=0;yourIQ=100;this.fireCount=
0},create:function(){gameGlobal=this.game;gameInProgress=!0;cursorOverMenu=inMenu=!1;this.createSprites();this.levelInit();this.game.sparkAnimSprite=createSparkAnimation(this.game,50,-100,-100);this.addEventHandlers();GameMenu.CreateGameMenu(!0);this.game.pause=new Pause(this.game);this.game.pause.create();pStats=new PlayerStats;pStats.create();cursor&&cursor.shutdown();cursor=new Cursor(this.game);cursor.create()},addEventHandlers:function(){this.game.input.onDown.add(this.handleInputDownEvent,this)},
handleInputDownEvent:function(){pause=!1;this.game.pause.unPause()},levelComplete:function(){pStats.save(currLevel,currClick,yourIQ);soundOn&&!this.game.gameMusic.isPlaying&&(this.game.gameMusic.loopFull(),this.game.gameMusic.volume=.1);updateMaxLevelReached(nameOfTheGame,currLevel+1);maximumLevelReached=currLevel+1;pause=!1;maximumLevelReached>totalLevel?(gameOver=!0,createCongratsAnimation(this.game,8,0,0),this.game.time.events.add(8*Phaser.Timer.SECOND,this.endOfGame,this),soundOn&&(this.game.setLevel.stop(),
this.game.winner.play())):this.endOfLevel()},endOfLevel:function(){this.state.start("LevelComplete");cmgAdBreakCall();},endOfGame:function(){updateStorage();restartGame()},createSprites:function(){var a=this.game.level.getSprites(),b;for(b in a){var c=this.game.level.getPosition(b+"X");var d=this.game.level.getPosition(b+"Y");var a=this.game.level.getPosition(b+"scaleX"),e=this.game.level.getPosition(b+"scaleY");"sun"==b?this.sun=createSunAnimation(this,this.sunFrameSpeed,c,d,a,e):(c=this.game.add.sprite(c,d,b),a&&
(c.scale.x=a),e&&(c.scale.y=e))}},levelInit:function(){soundOn&&(gameGlobal.setLevel.play(),gameGlobal.setLevel.volume=.22);gameGlobal=this.game;gameObjects=[];gameJoints=[];gameSprites=[];levelComplete=!1;var a=this.game.level.getGameObjects(),b;for(b in a)if(a=getGameObject(b))a.create(),a.bJoint?gameJoints.push(a):gameObjects.push(a);else if(b.endsWith("sprite")){var c=this.game.level.getPosition(b+"X"),d=this.game.level.getPosition(b+"Y"),a=this.game.level.getPosition(b+"scaleX"),e=this.game.level.getPosition(b+
"scaleY");if(1==currLevel&&(this.game.device.desktop&&"tutorialTextDesktopsprite"==b&&(this.mouseSprite=this.game.add.sprite(205,150,"mouse"),this.mouseSpriteAnim=createMouseAnimation(this.game,25,282,230),this.tutorial=this.game.add.sprite(315,202,"tutorialTextDesktopsprite")),this.game.device.desktop||"tutorialTextsprite"!=b||(this.tutorial=this.game.add.sprite(265,240,"tutorialTextsprite")),"tutorialTextDesktopsprite"==b||"tutorialTextsprite"==b))continue;c=this.game.add.sprite(c,d,b);a&&(c.scale.x=
a);e&&(c.scale.y=e);gameSprites.push(c)}target&&bPlayer&&target.setCallback(bPlayer);17==currLevel&&(this.bsprite=createBubbleAnimation(this,30))},update:function(){this.game.input.activePointer.withinGame||(outOfGame=!0,cursor&&cursor.kill(),menuCursor&&menuCursor.kill());if(!(pause||gameOver||inMenu))if(levelComplete)pause=!0,this.levelComplete();else{for(var a=0;a<gameObjects.length;a++)gameObjects[a].update();for(a=0;a<gameJoints.length;a++){var b=gameJoints[a];b&&b.jointName&&("WeldWall"==b.jointName||
"WeldVase"==b.jointName||"RevoluteBridge"==b.jointName)&&kill?"RevoluteBridge"==b.jointName?1==b.bridgeBrokenJoint&&(b.shutdown(),gameJoints[a]=null):(b.shutdown(),gameJoints[a]=null):gameJoints[a]&&gameJoints[a].update()}null!=pStats&&pStats.update()}},render:function(){enableDebugDraw&&this.game.debug.box2dWorld();pause&&this.game.pause.pause()},shutdown:function(){console.log("Game: before level shutdown");for(var a=this.game.level.getSprites(),b=0;b<a.length;b++)a[b]&&(console.log("destroying image sprites.."+
a[b]),a[b].destroy());for(b=0;b<gameSprites.length;b++)console.log("destroying game sprites.."),gameSprites[b]&&(console.log("destroying game sprites.."+gameSprites[b]),gameSprites[b].destroy());for(b=0;b<gameObjects.length;b++)gameObjects[b]&&(gameObjects[b].shutdown(),gameObjects[b].sprite&&(console.log("destroying  sprites of game objects.."+gameObjects[b].sprite.key),gameObjects[b].sprite.destroy()));for(b=0;b<gameJoints.length;b++)gameJoints[b]&&gameJoints[b].joint&&(console.log("destroying  joints of game objects.."),
Joint.Destroy(gameJoints[b].joint)),gameJoints[b]=null;this.sun&&(this.sun.animations.stop(),this.sun.destroy());cursor&&cursor.shutdown();this.game.sparkAnim&&this.game.sparkAnim.destroy();this.mouseSprite&&(this.mouseSpriteAnim.destroy(),this.mouseSprite.destroy());this.tutorial&&this.tutorial.destroy();this.game.sparkAnimSprite&&this.game.sparkAnimSprite.destroy();this.bsprite&&this.bsprite.destroy();this.background&&this.background.destroy();this.preloadBar&&this.preloadBar.destroy();this.plAnim&&
this.plAnim.destroy();this.game.pause&&this.game.pause.shutdown();pStats&&(pStats.shutdown(),pStats=null);playerSprite&&playerSprite.shutdown()}};IQBall=IQBall||{};IQBall.LevelComplete=function(){};IQBall.LevelComplete.prototype={init:function(){},create:function(){this.bg=this.game.add.sprite(0,0,"plainbg");updateStorage();this.game.time.events.add(0*Phaser.Timer.SECOND,this.fadePicture,this);this.preloadBar=this.add.sprite(0,0,"preloaderBar");this.load.setPreloadSprite(this.preloadBar)},fadePicture:function(){maxLevelReached=currLevel+=1;currLevel<=totalLevel&&this.state.start("Game")}};
