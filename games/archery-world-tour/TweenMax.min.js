(window._gsQueue||(window._gsQueue=[])).push((function(){"use strict";var t,e,a,i,s,o,r,n,l,h,m,d,c,g,u,p;window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],(function(t,e,a){var i=[].slice,s=function(t,e,i){a.call(this,t,e,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},o=function(t){return t.jquery||t.length&&t!==window&&t[0]&&(t[0]===window||t[0].nodeType&&t[0].style&&!t.nodeType)},r=s.prototype=a.to({},.1,{}),n=[];s.version="1.10.2",r.constructor=s,r.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=a.killTweensOf,s.getTweensOf=a.getTweensOf,s.ticker=a.ticker,r.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},r.updateTo=function(t,e){var i,s=this.ratio;for(i in e&&this.timeline&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[i]=t[i];if(this._initted)if(e)this._initted=!1;else if(this._notifyPluginsOfEnabled&&this._firstPT&&a._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._time;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var r,n=1/(1-s),l=this._firstPT;l;)r=l.s+l.c,l.c*=n,l.s=r-l.c,l=l._next}return this},r.render=function(t,e,a){var i,s,o,r,l,h,m,d=this._dirty?this.totalDuration():this._totalDuration,c=this._time,g=this._totalTime,u=this._cycle;if(t>=d?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=this._duration,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,s="onComplete"),0===this._duration&&((0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&(a=!0,this._rawPrevTime>0&&(s="onReverseComplete",e&&(t=-1))),this._rawPrevTime=t)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==g||0===this._duration&&this._rawPrevTime>0)&&(s="onReverseComplete",i=this._reversed),0>t?(this._active=!1,0===this._duration&&(this._rawPrevTime>=0&&(a=!0),this._rawPrevTime=t)):this._initted||(a=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(r=this._duration+this._repeatDelay,this._cycle=this._totalTime/r>>0,0!==this._cycle&&this._cycle===this._totalTime/r&&this._cycle--,this._time=this._totalTime-this._cycle*r,this._yoyo&&0!=(1&this._cycle)&&(this._time=this._duration-this._time),this._time>this._duration?this._time=this._duration:0>this._time&&(this._time=0)),this._easeType?(l=this._time/this._duration,(1===(h=this._easeType)||3===h&&l>=.5)&&(l=1-l),3===h&&(l*=2),1===(m=this._easePower)?l*=l:2===m?l*=l*l:3===m?l*=l*l*l:4===m&&(l*=l*l*l*l),this.ratio=1===h?1-l:2===h?l:.5>this._time/this._duration?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/this._duration)),c!==this._time||a){if(!this._initted){if(this._init(),!this._initted)return;this._time&&!i?this.ratio=this._ease.getRatio(this._time/this._duration):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==c&&t>=0&&(this._active=!0),0===g&&(this._startAt&&(t>=0?this._startAt.render(t,e,a):s||(s="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===this._duration)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||n))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>t&&this._startAt&&this._startAt.render(t,e,a),e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n)),this._cycle!==u&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||n)),s&&(this._gc||(0>t&&this._startAt&&!this._onUpdate&&this._startAt.render(t,e,a),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||n)))}else g!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n))},s.to=function(t,e,a){return new s(t,e,a)},s.from=function(t,e,a){return a.runBackwards=!0,a.immediateRender=0!=a.immediateRender,new s(t,e,a)},s.fromTo=function(t,e,a,i){return i.startAt=a,i.immediateRender=0!=i.immediateRender&&0!=a.immediateRender,new s(t,e,i)},s.staggerTo=s.allTo=function(t,e,r,l,h,m,d){l=l||0;var c,g,u,p,v=r.delay||0,f=[],D=function(){r.onComplete&&r.onComplete.apply(r.onCompleteScope||this,arguments),h.apply(d||this,m||n)};for(t instanceof Array||("string"==typeof t&&(t=a.selector(t)||t),o(t)&&(t=i.call(t,0))),c=t.length,u=0;c>u;u++){for(p in g={},r)g[p]=r[p];g.delay=v,u===c-1&&h&&(g.onComplete=D),f[u]=new s(t[u],e,g),v+=l}return f},s.staggerFrom=s.allFrom=function(t,e,a,i,o,r,n){return a.runBackwards=!0,a.immediateRender=0!=a.immediateRender,s.staggerTo(t,e,a,i,o,r,n)},s.staggerFromTo=s.allFromTo=function(t,e,a,i,o,r,n,l){return i.startAt=a,i.immediateRender=0!=i.immediateRender&&0!=a.immediateRender,s.staggerTo(t,e,i,o,r,n,l)},s.delayedCall=function(t,e,a,i,o){return new s(e,0,{delay:t,onComplete:e,onCompleteParams:a,onCompleteScope:i,onReverseComplete:e,onReverseCompleteParams:a,onReverseCompleteScope:i,immediateRender:!1,useFrames:o,overwrite:0})},s.set=function(t,e){return new s(t,0,e)},s.isTweening=function(t){for(var e,i=a.getTweensOf(t),s=i.length;--s>-1;)if((e=i[s])._active||e._startTime===e._timeline._time&&e._timeline._active)return!0;return!1};var l=function(t,e){for(var i=[],s=0,o=t._first;o;)o instanceof a?i[s++]=o:(e&&(i[s++]=o),s=(i=i.concat(l(o,e))).length),o=o._next;return i},h=s.getAllTweens=function(e){return l(t._rootTimeline,e).concat(l(t._rootFramesTimeline,e))};s.killAll=function(t,a,i,s){null==a&&(a=!0),null==i&&(i=!0);var o,r,n,l=h(0!=s),m=l.length,d=a&&i&&s;for(n=0;m>n;n++)r=l[n],(d||r instanceof e||(o=r.target===r.vars.onComplete)&&i||a&&!o)&&(t?r.totalTime(r.totalDuration()):r._enabled(!1,!1))},s.killChildTweensOf=function(t,e){if(null!=t){var r,n,l,h,m,d=a._tweenLookup;if("string"==typeof t&&(t=a.selector(t)||t),o(t)&&(t=i(t,0)),t instanceof Array)for(h=t.length;--h>-1;)s.killChildTweensOf(t[h],e);else{for(l in r=[],d)for(n=d[l].target.parentNode;n;)n===t&&(r=r.concat(d[l].tweens)),n=n.parentNode;for(m=r.length,h=0;m>h;h++)e&&r[h].totalTime(r[h].totalDuration()),r[h]._enabled(!1,!1)}}};var m=function(t,a,i,s){a=!1!==a,i=!1!==i;for(var o,r,n=h(s=!1!==s),l=a&&i&&s,m=n.length;--m>-1;)r=n[m],(l||r instanceof e||(o=r.target===r.vars.onComplete)&&i||a&&!o)&&r.paused(t)};return s.pauseAll=function(t,e,a){m(!0,t,e,a)},s.resumeAll=function(t,e,a){m(!1,t,e,a)},s.globalTimeScale=function(e){var i=t._rootTimeline,s=a.ticker.time;return arguments.length?(e=e||1e-6,i._startTime=s-(s-i._startTime)*i._timeScale/e,i=t._rootFramesTimeline,s=a.ticker.frame,i._startTime=s-(s-i._startTime)*i._timeScale/e,i._timeScale=t._rootTimeline._timeScale=e,e):i._timeScale},r.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},r.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},r.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},r.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},r.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},r.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},r.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},r.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s}),!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],(function(t,e,a){var i=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var a,i,s=this.vars;for(i in s)(a=s[i])instanceof Array&&-1!==a.join("").indexOf("{self}")&&(s[i]=this._swapSelfInParams(a));s.tweens instanceof Array&&this.add(s.tweens,0,s.align,s.stagger)},s=[],o=function(t){var e,a={};for(e in t)a[e]=t[e];return a},r=function(t,e,a,i){t._timeline.pause(t._startTime),e&&e.apply(i||t._timeline,a||s)},n=s.slice,l=i.prototype=new e;return i.version="1.10.2",l.constructor=i,l.kill()._gc=!1,l.to=function(t,e,i,s){return e?this.add(new a(t,e,i),s):this.set(t,i,s)},l.from=function(t,e,i,s){return this.add(a.from(t,e,i),s)},l.fromTo=function(t,e,i,s,o){return e?this.add(a.fromTo(t,e,i,s),o):this.set(t,s,o)},l.staggerTo=function(t,e,s,r,l,h,m,d){var c,g=new i({onComplete:h,onCompleteParams:m,onCompleteScope:d});for("string"==typeof t&&(t=a.selector(t)||t),!(t instanceof Array)&&t.length&&t!==window&&t[0]&&(t[0]===window||t[0].nodeType&&t[0].style&&!t.nodeType)&&(t=n.call(t,0)),r=r||0,c=0;t.length>c;c++)s.startAt&&(s.startAt=o(s.startAt)),g.to(t[c],e,o(s),c*r);return this.add(g,l)},l.staggerFrom=function(t,e,a,i,s,o,r,n){return a.immediateRender=0!=a.immediateRender,a.runBackwards=!0,this.staggerTo(t,e,a,i,s,o,r,n)},l.staggerFromTo=function(t,e,a,i,s,o,r,n,l){return i.startAt=a,i.immediateRender=0!=i.immediateRender&&0!=a.immediateRender,this.staggerTo(t,e,i,s,o,r,n,l)},l.call=function(t,e,i,s){return this.add(a.delayedCall(0,t,e,i),s)},l.set=function(t,e,i){return i=this._parseTimeOrLabel(i,0,!0),null==e.immediateRender&&(e.immediateRender=i===this._time&&!this._paused),this.add(new a(t,0,e),i)},i.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var s,o,r=new i(t),n=r._timeline;for(null==e&&(e=!0),n._remove(r,!0),r._startTime=0,r._rawPrevTime=r._time=r._totalTime=n._time,s=n._first;s;)o=s._next,e&&s instanceof a&&s.target===s.vars.onComplete||r.add(s,s._startTime-s._delay),s=o;return n.add(r,0),r},l.add=function(s,o,r,n){var l,h,m,d,c;if("number"!=typeof o&&(o=this._parseTimeOrLabel(o,0,!0,s)),!(s instanceof t)){if(s instanceof Array){for(r=r||"normal",n=n||0,l=o,h=s.length,m=0;h>m;m++)(d=s[m])instanceof Array&&(d=new i({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===r?l=d._startTime+d.totalDuration()/d._timeScale:"start"===r&&(d._startTime-=d.delay())),l+=n;return this._uncache(!0)}if("string"==typeof s)return this.addLabel(s,o);if("function"!=typeof s)throw"Cannot add "+s+" into the timeline; it is neither a tween, timeline, function, nor a string.";s=a.delayedCall(0,s)}if(e.prototype.add.call(this,s,o),this._gc&&!this._paused&&this._time===this._duration&&this._time<this.duration())for(c=this;c._gc&&c._timeline;)c._timeline.smoothChildTiming?c.totalTime(c._totalTime,!0):c._enabled(!0,!1),c=c._timeline;return this},l.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array){for(var a=e.length;--a>-1;)this.remove(e[a]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},l._remove=function(t,a){return e.prototype._remove.call(this,t,a),this._last?this._time>this._last._startTime&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=0,this},l.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},l.insert=l.insertMultiple=function(t,e,a,i){return this.add(t,e||0,a,i)},l.appendMultiple=function(t,e,a,i){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),a,i)},l.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},l.addPause=function(t,e,a,i){return this.call(r,["{self}",e,a,i],this,t)},l.removeLabel=function(t){return delete this._labels[t],this},l.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},l._parseTimeOrLabel=function(e,a,i,s){var o;if(s instanceof t&&s.timeline===this)this.remove(s);else if(s instanceof Array)for(o=s.length;--o>-1;)s[o]instanceof t&&s[o].timeline===this&&this.remove(s[o]);if("string"==typeof a)return this._parseTimeOrLabel(a,i&&"number"==typeof e&&null==this._labels[a]?e-this.duration():0,i);if(a=a||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(-1===(o=e.indexOf("=")))return null==this._labels[e]?i?this._labels[e]=this.duration()+a:a:this._labels[e]+a;a=parseInt(e.charAt(o-1)+"1",10)*Number(e.substr(o+1)),e=o>1?this._parseTimeOrLabel(e.substr(0,o-1),0,i):this.duration()}return Number(e)+a},l.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},l.stop=function(){return this.paused(!0)},l.gotoAndPlay=function(t,e){return this.play(t,e)},l.gotoAndStop=function(t,e){return this.pause(t,e)},l.render=function(t,e,a){this._gc&&this._enabled(!0,!1);var i,o,r,n,l,h=this._dirty?this.totalDuration():this._totalDuration,m=this._time,d=this._startTime,c=this._timeScale,g=this._paused;if(t>=h?(this._totalTime=this._time=h,this._reversed||this._hasPausedChild()||(o=!0,n="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>0&&(n="onReverseComplete"))),this._rawPrevTime=t,t=h+1e-6):1e-7>t?(this._totalTime=this._time=0,(0!==m||0===this._duration&&this._rawPrevTime>0)&&(n="onReverseComplete",o=this._reversed),0>t?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t):(this._rawPrevTime=t,t=0,this._initted||(l=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==m&&this._first||a||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s)),this._time>=m)for(i=this._first;i&&(r=i._next,!this._paused||g);)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,a):i.render((t-i._startTime)*i._timeScale,e,a)),i=r;else for(i=this._last;i&&(r=i._prev,!this._paused||g);)(i._active||m>=i._startTime&&!i._paused&&!i._gc)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,a):i.render((t-i._startTime)*i._timeScale,e,a)),i=r;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)),n&&(this._gc||(d===this._startTime||c!==this._timeScale)&&(0===this._time||h>=this.totalDuration())&&(o&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this.vars[n].apply(this.vars[n+"Scope"]||this,this.vars[n+"Params"]||s)))}},l._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof i&&t._hasPausedChild())return!0;t=t._next}return!1},l.getChildren=function(t,e,i,s){s=s||-9999999999;for(var o=[],r=this._first,n=0;r;)s>r._startTime||(r instanceof a?!1!==e&&(o[n++]=r):(!1!==i&&(o[n++]=r),!1!==t&&(n=(o=o.concat(r.getChildren(!0,e,i))).length))),r=r._next;return o},l.getTweensOf=function(t,e){for(var i=a.getTweensOf(t),s=i.length,o=[],r=0;--s>-1;)(i[s].timeline===this||e&&this._contains(i[s]))&&(o[r++]=i[s]);return o},l._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},l.shiftChildren=function(t,e,a){a=a||0;for(var i,s=this._first,o=this._labels;s;)s._startTime>=a&&(s._startTime+=t),s=s._next;if(e)for(i in o)o[i]>=a&&(o[i]+=t);return this._uncache(!0)},l._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var a=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),i=a.length,s=!1;--i>-1;)a[i]._kill(t,e)&&(s=!0);return s},l.clear=function(t){var e=this.getChildren(!1,!0,!0),a=e.length;for(this._time=this._totalTime=0;--a>-1;)e[a]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},l.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return this},l._enabled=function(t,a){if(t===this._gc)for(var i=this._first;i;)i._enabled(t,!0),i=i._next;return e.prototype._enabled.call(this,t,a)},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*t,!1):this._time/this.duration()},l.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},l.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,a,i=0,s=this._last,o=999999999999;s;)e=s._prev,s._dirty&&s.totalDuration(),s._startTime>o&&this._sortChildren&&!s._paused?this.add(s,s._startTime-s._delay):o=s._startTime,0>s._startTime&&!s._paused&&(i-=s._startTime,this._timeline.smoothChildTiming&&(this._startTime+=s._startTime/this._timeScale),this.shiftChildren(-s._startTime,!1,-9999999999),o=0),(a=s._startTime+s._totalDuration/s._timeScale)>i&&(i=a),s=e;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},l.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},l.rawTime=function(){return this._paused||0!==this._totalTime&&this._totalTime!==this._totalDuration?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},i}),!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],(function(t,e,a){var i=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},s=[],o=new a(null,null,1,0),r=function(t){for(;t;){if(t._paused)return!0;t=t._timeline}return!1},n=i.prototype=new t;return n.constructor=i,n.kill()._gc=!1,i.version="1.10.2",n.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},n.addCallback=function(t,a,i,s){return this.add(e.delayedCall(0,t,i,s),a)},n.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var a=this.getTweensOf(t,!1),i=a.length,s=this._parseTimeOrLabel(e);--i>-1;)a[i]._startTime===s&&a[i]._enabled(!1,!1);return this},n.tweenTo=function(t,a){a=a||{};var i,r,n={ease:o,overwrite:2,useFrames:this.usesFrames(),immediateRender:!1};for(i in a)n[i]=a[i];return n.time=this._parseTimeOrLabel(t),r=new e(this,Math.abs(Number(n.time)-this._time)/this._timeScale||.001,n),n.onStart=function(){r.target.paused(!0),r.vars.time!==r.target.time()&&r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale),a.onStart&&a.onStart.apply(a.onStartScope||r,a.onStartParams||s)},r},n.tweenFromTo=function(t,e,a){a=a||{},t=this._parseTimeOrLabel(t),a.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},a.immediateRender=!1!==a.immediateRender;var i=this.tweenTo(e,a);return i.duration(Math.abs(i.vars.time-t)/this._timeScale||.001)},n.render=function(t,e,a){this._gc&&this._enabled(!0,!1);var i,o,r,n,l,h,m=this._dirty?this.totalDuration():this._totalDuration,d=this._duration,c=this._time,g=this._totalTime,u=this._startTime,p=this._timeScale,v=this._rawPrevTime,f=this._paused,D=this._cycle;if(t>=m?(this._locked||(this._totalTime=m,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(o=!0,n="onComplete",0===d&&(0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>0&&(n="onReverseComplete"))),this._rawPrevTime=t,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=d,t=d+1e-6)):1e-7>t?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==c||0===d&&this._rawPrevTime>0&&!this._locked)&&(n="onReverseComplete",o=this._reversed),0>t?(this._active=!1,0===d&&this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t):(this._rawPrevTime=t,t=0,this._initted||(l=!0))):(this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(h=d+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!=(1&this._cycle)&&(this._time=d-this._time),this._time>d?(this._time=d,t=d+1e-6):0>this._time?this._time=t=0:t=this._time))),this._cycle!==D&&!this._locked){var I=this._yoyo&&0!=(1&D),_=I===(this._yoyo&&0!=(1&this._cycle)),w=this._totalTime,y=this._cycle,b=this._rawPrevTime,T=this._time;if(this._totalTime=D*d,D>this._cycle?I=!I:this._totalTime+=d,this._time=c,this._rawPrevTime=0===d?v-1e-5:v,this._cycle=D,this._locked=!0,c=I?0:d,this.render(c,e,0===d),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||s),_&&(c=I?d+1e-6:-1e-6,this.render(c,!0,!1)),this._locked=!1,this._paused&&!f)return;this._time=T,this._totalTime=w,this._cycle=y,this._rawPrevTime=b}if(this._time!==c&&this._first||a||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==g&&t>0&&(this._active=!0),0===g&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s)),this._time>=c)for(i=this._first;i&&(r=i._next,!this._paused||f);)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,a):i.render((t-i._startTime)*i._timeScale,e,a)),i=r;else for(i=this._last;i&&(r=i._prev,!this._paused||f);)(i._active||c>=i._startTime&&!i._paused&&!i._gc)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,a):i.render((t-i._startTime)*i._timeScale,e,a)),i=r;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)),n&&(this._locked||this._gc||(u===this._startTime||p!==this._timeScale)&&(0===this._time||m>=this.totalDuration())&&(o&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this.vars[n].apply(this.vars[n+"Scope"]||this,this.vars[n+"Params"]||s)))}else g!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s))},n.getActive=function(t,e,a){null==t&&(t=!0),null==e&&(e=!0),null==a&&(a=!1);var i,s,o=[],n=this.getChildren(t,e,a),l=0,h=n.length;for(i=0;h>i;i++)(s=n[i])._paused||s._timeline._time>=s._startTime&&s._timeline._time<s._startTime+s._totalDuration/s._timeScale&&(r(s._timeline)||(o[l++]=s));return o},n.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,a=this.getLabelsArray(),i=a.length;for(e=0;i>e;e++)if(a[e].time>t)return a[e].name;return null},n.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),a=e.length;--a>-1;)if(t>e[a].time)return e[a].name;return null},n.getLabelsArray=function(){var t,e=[],a=0;for(t in this._labels)e[a++]={time:this._labels[t],name:t};return e.sort((function(t,e){return t.time-e.time})),e},n.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},n.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},n.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},n.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},n.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},n.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},n.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},i}),!0),t=180/Math.PI,e=Math.PI/180,a=[],i=[],s=[],o={},r=function(t,e,a,i){this.a=t,this.b=e,this.c=a,this.d=i,this.da=i-t,this.ca=a-t,this.ba=e-t},n=function(t,e,a,i){var s={a:t},o={},r={},n={c:i},l=(t+e)/2,h=(e+a)/2,m=(a+i)/2,d=(l+h)/2,c=(h+m)/2,g=(c-d)/8;return s.b=l+(t-l)/4,o.b=d+g,s.c=o.a=(s.b+o.b)/2,o.c=r.a=(d+c)/2,r.b=c-g,n.b=m+(i-m)/4,r.c=n.a=(r.b+n.b)/2,[s,o,r,n]},l=function(t,e,o,r,l){var h,m,d,c,g,u,p,v,f,D,I,_,w,y=t.length-1,b=0,T=t[0].a;for(h=0;y>h;h++)m=(g=t[b]).a,d=g.d,c=t[b+1].d,l?(I=a[h],w=.25*((_=i[h])+I)*e/(r?.5:s[h]||.5),v=d-((u=d-(d-m)*(r?.5*e:0!==I?w/I:0))+(((p=d+(c-d)*(r?.5*e:0!==_?w/_:0))-u)*(3*I/(I+_)+.5)/4||0))):v=d-((u=d-.5*(d-m)*e)+(p=d+.5*(c-d)*e))/2,u+=v,p+=v,g.c=f=u,g.b=0!==h?T:T=g.a+.6*(g.c-g.a),g.da=d-m,g.ca=f-m,g.ba=T-m,o?(D=n(m,T,f,d),t.splice(b,1,D[0],D[1],D[2],D[3]),b+=4):b++,T=p;(g=t[b]).b=T,g.c=T+.4*(g.d-T),g.da=g.d-g.a,g.ca=g.c-g.a,g.ba=T-g.a,o&&(D=n(g.a,T,g.c,g.d),t.splice(b,1,D[0],D[1],D[2],D[3]))},h=function(t,e,s,o){var n,l,h,m,d,c,g=[];if(o)for(l=(t=[o].concat(t)).length;--l>-1;)"string"==typeof(c=t[l][e])&&"="===c.charAt(1)&&(t[l][e]=o[e]+Number(c.charAt(0)+c.substr(2)));if(0>(n=t.length-2))return g[0]=new r(t[0][e],0,0,t[-1>n?0:1][e]),g;for(l=0;n>l;l++)h=t[l][e],m=t[l+1][e],g[l]=new r(h,0,0,m),s&&(d=t[l+2][e],a[l]=(a[l]||0)+(m-h)*(m-h),i[l]=(i[l]||0)+(d-m)*(d-m));return g[l]=new r(t[l][e],0,0,t[l+1][e]),g},m=function(t,e,r,n,m,d){var c,g,u,p,v,f,D,I,_={},w=[],y=d||t[0];for(g in m="string"==typeof m?","+m+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==e&&(e=1),t[0])w.push(g);if(t.length>1){for(I=t[t.length-1],D=!0,c=w.length;--c>-1;)if(g=w[c],Math.abs(y[g]-I[g])>.05){D=!1;break}D&&(t=t.concat(),d&&t.unshift(d),t.push(t[1]),d=t[t.length-3])}for(a.length=i.length=s.length=0,c=w.length;--c>-1;)g=w[c],o[g]=-1!==m.indexOf(","+g+","),_[g]=h(t,g,o[g],d);for(c=a.length;--c>-1;)a[c]=Math.sqrt(a[c]),i[c]=Math.sqrt(i[c]);if(!n){for(c=w.length;--c>-1;)if(o[g])for(f=(u=_[w[c]]).length-1,p=0;f>p;p++)v=u[p+1].da/i[p]+u[p].da/a[p],s[p]=(s[p]||0)+v*v;for(c=s.length;--c>-1;)s[c]=Math.sqrt(s[c])}for(c=w.length,p=r?4:1;--c>-1;)u=_[g=w[c]],l(u,e,r,n,o[g]),D&&(u.splice(0,p),u.splice(u.length-p,p));return _},d=function(t,e,a){var i,s,o,n,l,h,m,d,c,g,u,p={},v="cubic"===(e=e||"soft")?3:2,f="soft"===e,D=[];if(f&&a&&(t=[a].concat(t)),null==t||v+1>t.length)throw"invalid Bezier data";for(c in t[0])D.push(c);for(h=D.length;--h>-1;){for(p[c=D[h]]=l=[],g=0,d=t.length,m=0;d>m;m++)i=null==a?t[m][c]:"string"==typeof(u=t[m][c])&&"="===u.charAt(1)?a[c]+Number(u.charAt(0)+u.substr(2)):Number(u),f&&m>1&&d-1>m&&(l[g++]=(i+l[g-2])/2),l[g++]=i;for(d=g-v+1,g=0,m=0;d>m;m+=v)i=l[m],s=l[m+1],o=l[m+2],n=2===v?0:l[m+3],l[g++]=u=3===v?new r(i,s,o,n):new r(i,(2*s+i)/3,(2*s+o)/3,o);l.length=g}return p},c=function(t,e,a){for(var i,s,o,r,n,l,h,m,d,c,g,u=1/a,p=t.length;--p>-1;)for(o=(c=t[p]).a,r=c.d-o,n=c.c-o,l=c.b-o,i=s=0,m=1;a>=m;m++)i=s-(s=((h=u*m)*h*r+3*(d=1-h)*(h*n+d*l))*h),e[g=p*a+m-1]=(e[g]||0)+i*i},g=function(t,e){var a,i,s,o=[],r=[],n=0,l=0,h=(e=e>>0||6)-1,m=[],d=[];for(a in t)c(t[a],o,e);for(i=0;0>i;i++)n+=Math.sqrt(o[i]),d[s=i%e]=n,s===h&&(l+=n,m[s=i/e>>0]=d,r[s]=l,n=0,d=[]);return{length:l,lengths:r,segments:m}},u=window._gsDefine.plugin({propName:"bezier",priority:-1,API:2,global:!0,init:function(t,e,a){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var i,s,o,r,n,l=e.values||[],h={},c=l[0],u=e.autoRotate||a.vars.orientToBezier;for(i in this._autoRotate=u?u instanceof Array?u:[["x","y","rotation",!0===u?0:Number(u)||0]]:null,c)this._props.push(i);for(o=this._props.length;--o>-1;)i=this._props[o],this._overwriteProps.push(i),s=this._func[i]="function"==typeof t[i],h[i]=s?t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(t[i]),n||h[i]!==l[0][i]&&(n=h);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?m(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,n):d(l,e.type,h),this._segCount=this._beziers[i].length,this._timeRes){var p=g(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(u=this._autoRotate)for(u[0]instanceof Array||(this._autoRotate=u=[u]),o=u.length;--o>-1;)for(r=0;3>r;r++)i=u[o][r],this._func[i]="function"==typeof t[i]&&t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)];return!0},set:function(e){var a,i,s,o,r,n,l,h,m,d,c=this._segCount,g=this._func,u=this._target;if(this._timeRes){if(m=this._lengths,d=this._curSeg,e*=this._length,s=this._li,e>this._l2&&c-1>s){for(h=c-1;h>s&&e>=(this._l2=m[++s]););this._l1=m[s-1],this._li=s,this._curSeg=d=this._segments[s],this._s2=d[this._s1=this._si=0]}else if(this._l1>e&&s>0){for(;s>0&&(this._l1=m[--s])>=e;);0===s&&this._l1>e?this._l1=0:s++,this._l2=m[s],this._li=s,this._curSeg=d=this._segments[s],this._s1=d[(this._si=d.length-1)-1]||0,this._s2=d[this._si]}if(a=s,e-=this._l1,s=this._si,e>this._s2&&d.length-1>s){for(h=d.length-1;h>s&&e>=(this._s2=d[++s]););this._s1=d[s-1],this._si=s}else if(this._s1>e&&s>0){for(;s>0&&(this._s1=d[--s])>=e;);0===s&&this._s1>e?this._s1=0:s++,this._s2=d[s],this._si=s}n=(s+(e-this._s1)/(this._s2-this._s1))*this._prec}else n=(e-(a=0>e?0:e>=1?c-1:c*e>>0)*(1/c))*c;for(i=1-n,s=this._props.length;--s>-1;)o=this._props[s],l=(n*n*(r=this._beziers[o][a]).da+3*i*(n*r.ca+i*r.ba))*n+r.a,this._round[o]&&(l=l+(l>0?.5:-.5)>>0),g[o]?u[o](l):u[o]=l;if(this._autoRotate){var p,v,f,D,I,_,w,y=this._autoRotate;for(s=y.length;--s>-1;)o=y[s][2],_=y[s][3]||0,w=!0===y[s][4]?1:t,r=this._beziers[y[s][0]],p=this._beziers[y[s][1]],r&&p&&(r=r[a],p=p[a],v=r.a+(r.b-r.a)*n,v+=((D=r.b+(r.c-r.b)*n)-v)*n,D+=(r.c+(r.d-r.c)*n-D)*n,f=p.a+(p.b-p.a)*n,f+=((I=p.b+(p.c-p.b)*n)-f)*n,I+=(p.c+(p.d-p.c)*n-I)*n,l=Math.atan2(I-f,D-v)*w+_,g[o]?u[o](l):u[o]=l)}}}),p=u.prototype,u.bezierThrough=m,u.cubicToQuadratic=n,u._autoCSS=!0,u.quadraticToCubic=function(t,e,a){return new r(t,(2*e+t)/3,(2*e+a)/3,a)},u._cssRegister=function(){var t=window._gsDefine.globals.CSSPlugin;if(t){var a=t._internals,i=a._parseToProxy,s=a._setPluginRatio,o=a.CSSPropTween;a._registerComplexSpecialProp("bezier",{parser:function(t,a,r,n,l,h){a instanceof Array&&(a={values:a}),h=new u;var m,d,c,g=a.values,p=g.length-1,v=[],f={};if(0>p)return l;for(m=0;p>=m;m++)c=i(t,g[m],n,l,h,p!==m),v[m]=c.end;for(d in a)f[d]=a[d];return f.values=v,(l=new o(t,"bezier",0,0,c.pt,2)).data=c,l.plugin=h,l.setRatio=s,0===f.autoRotate&&(f.autoRotate=!0),!f.autoRotate||f.autoRotate instanceof Array||(m=!0===f.autoRotate?0:Number(f.autoRotate)*e,f.autoRotate=null!=c.end.left?[["left","top","rotation",m,!0]]:null!=c.end.x&&[["x","y","rotation",m,!0]]),f.autoRotate&&(n._transform||n._enableTransforms(!1),c.autoRotate=n._target._gsTransform),h._onInitTween(c.proxy,f,n._tween),l}})}},p._roundProps=function(t,e){for(var a=this._overwriteProps,i=a.length;--i>-1;)(t[a[i]]||t.bezier||t.bezierThrough)&&(this._round[a[i]]=e)},p._kill=function(t){var e,a,i=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],a=i.length;--a>-1;)i[a]===e&&i.splice(a,1);return this._super._kill.call(this,t)},window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],(function(t,e){var a,i,s,o,r=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=r.prototype.setRatio},n={},l=r.prototype=new t("css");l.constructor=r,r.version="1.10.2",r.API=2,r.defaultTransformPerspective=0,l="px",r.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l};var h,m,d,c,g,u,p=/(?:\d|\-\d|\.\d|\-\.\d)+/g,v=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,f=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,D=/[^\d\-\.]/g,I=/(?:\d|\-|\+|=|#|\.)*/g,_=/opacity *= *([^)]*)/,w=/opacity:([^;]*)/,y=/alpha\(opacity *=.+?\)/i,b=/^(rgb|hsl)/,T=/([A-Z])/g,S=/-([a-z])/gi,x=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,A=function(t,e){return e.toUpperCase()},M=/(?:Left|Right|Width)/i,P=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,N=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,E=/,(?=[^\)]*(?:\(|$))/gi,L=Math.PI/180,k=180/Math.PI,H={},B=document,F=B.createElement("div"),R=B.createElement("img"),Y=r._internals={_specialProps:n},X=navigator.userAgent,G=function(){var t,e=X.indexOf("Android"),a=B.createElement("div");return d=-1!==X.indexOf("Safari")&&-1===X.indexOf("Chrome")&&(-1===e||Number(X.substr(e+8,1))>3),g=d&&6>Number(X.substr(X.indexOf("Version/")+8,1)),c=-1!==X.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(X),u=parseFloat(RegExp.$1),a.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",!!(t=a.getElementsByTagName("a")[0])&&/^0.55/.test(t.style.opacity)}(),C=function(t){return _.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},z=function(t){window.console&&console.log(t)},O="",W="",U=function(t,e){var a,i,s=(e=e||F).style;if(void 0!==s[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),a=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===s[a[i]+t];);return i>=0?(O="-"+(W=3===i?"ms":a[i]).toLowerCase()+"-",W+t):null},q=B.defaultView?B.defaultView.getComputedStyle:function(){},V=r.getStyle=function(t,e,a,i,s){var o;return G||"opacity"!==e?(!i&&t.style[e]?o=t.style[e]:(a=a||q(t,null))?o=(t=a.getPropertyValue(e.replace(T,"-$1").toLowerCase()))||a.length?t:a[e]:t.currentStyle&&(o=t.currentStyle[e]),null==s||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:s):C(t)},j=function(t,e,a,i,s){if("px"===i||!i)return a;if("auto"===i||!a)return 0;var o,r=M.test(e),n=t,l=F.style,h=0>a;return h&&(a=-a),"%"===i&&-1!==e.indexOf("border")?o=a/100*(r?t.clientWidth:t.clientHeight):(l.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;","%"!==i&&n.appendChild?l[r?"borderLeftWidth":"borderTopWidth"]=a+i:(n=t.parentNode||B.body,l[r?"width":"height"]=a+i),n.appendChild(F),o=parseFloat(F[r?"offsetWidth":"offsetHeight"]),n.removeChild(F),0!==o||s||(o=j(t,e,a,i,!0))),h?-o:o},$=function(t,e,a){if("absolute"!==V(t,"position",a))return 0;var i="left"===e?"Left":"Top",s=V(t,"margin"+i,a);return t["offset"+i]-(j(t,e,parseFloat(s),s.replace(I,""))||0)},K=function(t,e){var a,i,s={};if(e=e||q(t,null))if(a=e.length)for(;--a>-1;)s[e[a].replace(S,A)]=e.getPropertyValue(e[a]);else for(a in e)s[a]=e[a];else if(e=t.currentStyle||t.style)for(a in e)s[a.replace(S,A)]=e[a];return G||(s.opacity=C(t)),i=bt(t,e,!1),s.rotation=i.rotation*k,s.skewX=i.skewX*k,s.scaleX=i.scaleX,s.scaleY=i.scaleY,s.x=i.x,s.y=i.y,yt&&(s.z=i.z,s.rotationX=i.rotationX*k,s.rotationY=i.rotationY*k,s.scaleZ=i.scaleZ),s.filters&&delete s.filters,s},Q=function(t,e,a,i,s){var o,r,n,l={},h=t.style;for(r in a)"cssText"!==r&&"length"!==r&&isNaN(r)&&(e[r]!==(o=a[r])||s&&s[r])&&-1===r.indexOf("Origin")&&("number"==typeof o||"string"==typeof o)&&(l[r]="auto"!==o||"left"!==r&&"top"!==r?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof e[r]||""===e[r].replace(D,"")?o:0:$(t,r),void 0!==h[r]&&(n=new dt(h,r,h[r],n)));if(i)for(r in i)"className"!==r&&(l[r]=i[r]);return{difs:l,firstMPT:n}},Z={width:["Left","Right"],height:["Top","Bottom"]},J=["marginLeft","marginRight","marginTop","marginBottom"],tt=function(t,e,a){var i=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),s=Z[e],o=s.length;for(a=a||q(t,null);--o>-1;)i-=parseFloat(V(t,"padding"+s[o],a,!0))||0,i-=parseFloat(V(t,"border"+s[o]+"Width",a,!0))||0;return i},et=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var a=t.split(" "),i=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":a[0],s=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":a[1];return null==s?s="0":"center"===s&&(s="50%"),("center"===i||isNaN(parseFloat(i))&&-1===(i+"").indexOf("="))&&(i="50%"),e&&(e.oxp=-1!==i.indexOf("%"),e.oyp=-1!==s.indexOf("%"),e.oxr="="===i.charAt(1),e.oyr="="===s.charAt(1),e.ox=parseFloat(i.replace(D,"")),e.oy=parseFloat(s.replace(D,""))),i+" "+s+(a.length>2?" "+a[2]:"")},at=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},it=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*Number(t.substr(2))+e:parseFloat(t)},st=function(t,e,a,i){var s,o,r,n,l=1e-6;return null==t?n=e:"number"==typeof t?n=t*L:(s=2*Math.PI,o=t.split("_"),r=Number(o[0].replace(D,""))*(-1===t.indexOf("rad")?L:1)-("="===t.charAt(1)?0:e),o.length&&(i&&(i[a]=e+r),-1!==t.indexOf("short")&&((r%=s)!==r%(s/2)&&(r=0>r?r+s:r-s)),-1!==t.indexOf("_cw")&&0>r?r=(r+9999999999*s)%s-(0|r/s)*s:-1!==t.indexOf("ccw")&&r>0&&(r=(r-9999999999*s)%s-(0|r/s)*s)),n=e+r),l>n&&n>-l&&(n=0),n},ot={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},rt=function(t,e,a){return 0|255*(1>6*(t=0>t?t+1:t>1?t-1:t)?e+6*(a-e)*t:.5>t?a:2>3*t?e+6*(a-e)*(2/3-t):e)+.5},nt=function(t){var e,a,i,s,o,r;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ot[t]?ot[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),a=t.charAt(2),i=t.charAt(3),t="#"+e+e+a+a+i+i),[(t=parseInt(t.substr(1),16))>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(p),s=Number(t[0])%360/360,o=Number(t[1])/100,e=2*(r=Number(t[2])/100)-(a=.5>=r?r*(o+1):r+o-r*o),t.length>3&&(t[3]=Number(t[3])),t[0]=rt(s+1/3,e,a),t[1]=rt(s,e,a),t[2]=rt(s-1/3,e,a),t):((t=t.match(p)||ot.transparent)[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):ot.black},lt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in ot)lt+="|"+l+"\\b";lt=RegExp(lt+")","gi");var ht=function(t,e,a,i){if(null==t)return function(t){return t};var s,o=e?(t.match(lt)||[""])[0]:"",r=t.split(o).join("").match(f)||[],n=t.substr(0,t.indexOf(r[0])),l=")"===t.charAt(t.length-1)?")":"",h=-1!==t.indexOf(" ")?" ":",",m=r.length,d=m>0?r[0].replace(p,""):"";return m?s=e?function(t){var e,c,g,u;if("number"==typeof t)t+=d;else if(i&&E.test(t)){for(u=t.replace(E,"|").split("|"),g=0;u.length>g;g++)u[g]=s(u[g]);return u.join(",")}if(e=(t.match(lt)||[o])[0],g=(c=t.split(e).join("").match(f)||[]).length,m>g--)for(;m>++g;)c[g]=a?c[0|(g-1)/2]:r[g];return n+c.join(h)+h+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,o,c;if("number"==typeof t)t+=d;else if(i&&E.test(t)){for(o=t.replace(E,"|").split("|"),c=0;o.length>c;c++)o[c]=s(o[c]);return o.join(",")}if(c=(e=t.match(f)||[]).length,m>c--)for(;m>++c;)e[c]=a?e[0|(c-1)/2]:r[c];return n+e.join(h)+l}:function(t){return t}},mt=function(t){return t=t.split(","),function(e,a,i,s,o,r,n){var l,h=(a+"").split(" ");for(n={},l=0;4>l;l++)n[t[l]]=h[l]=h[l]||h[(l-1)/2>>0];return s.parse(e,n,o,r)}},dt=(Y._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,a,i,s,o=this.data,r=o.proxy,n=o.firstMPT,l=1e-6;n;)e=r[n.v],n.r?e=e>0?0|e+.5:0|e-.5:l>e&&e>-l&&(e=0),n.t[n.p]=e,n=n._next;if(o.autoRotate&&(o.autoRotate.rotation=r.rotation),1===t)for(n=o.firstMPT;n;){if((a=n.t).type){if(1===a.type){for(s=a.xs0+a.s+a.xs1,i=1;a.l>i;i++)s+=a["xn"+i]+a["xs"+(i+1)];a.e=s}}else a.e=a.s+a.xs0;n=n._next}},function(t,e,a,i,s){this.t=t,this.p=e,this.v=a,this.r=s,i&&(i._prev=this,this._next=i)}),ct=(Y._parseToProxy=function(t,e,a,i,s,o){var r,n,l,h,m,d=i,c={},g={},u=a._transform,p=H;for(a._transform=null,H=e,i=m=a.parse(t,e,i,s),H=p,o&&(a._transform=u,d&&(d._prev=null,d._prev&&(d._prev._next=null)));i&&i!==d;){if(1>=i.type&&(g[n=i.p]=i.s+i.c,c[n]=i.s,o||(h=new dt(i,"s",n,h,i.r),i.c=0),1===i.type))for(r=i.l;--r>0;)l="xn"+r,g[n=i.p+"_"+l]=i.data[l],c[n]=i[l],o||(h=new dt(i,l,n,h,i.rxp[l]));i=i._next}return{proxy:c,end:g,firstMPT:h,pt:m}},Y.CSSPropTween=function(t,e,i,s,r,n,l,h,m,d,c){this.t=t,this.p=e,this.s=i,this.c=s,this.n=l||e,t instanceof ct||o.push(this.n),this.r=h,this.type=n||0,m&&(this.pr=m,a=!0),this.b=void 0===d?i:d,this.e=void 0===c?i+s:c,r&&(this._next=r,r._prev=this)}),gt=r.parseComplex=function(t,e,a,i,s,o,r,n,l,m){r=new ct(t,e,0,0,r,m?2:1,null,!1,n,a=a||o||"",i),i+="";var d,c,g,u,f,D,I,_,w,y,T,S,x=a.split(", ").join(",").split(" "),A=i.split(", ").join(",").split(" "),M=x.length,P=!1!==h;for((-1!==i.indexOf(",")||-1!==a.indexOf(","))&&(x=x.join(" ").replace(E,", ").split(" "),A=A.join(" ").replace(E,", ").split(" "),M=x.length),M!==A.length&&(M=(x=(o||"").split(" ")).length),r.plugin=l,r.setRatio=m,d=0;M>d;d++)if(u=x[d],f=A[d],(_=parseFloat(u))||0===_)r.appendXtra("",_,at(f,_),f.replace(v,""),P&&-1!==f.indexOf("px"),!0);else if(s&&("#"===u.charAt(0)||ot[u]||b.test(u)))S=","===f.charAt(f.length-1)?"),":")",u=nt(u),f=nt(f),(w=u.length+f.length>6)&&!G&&0===f[3]?(r["xs"+r.l]+=r.l?" transparent":"transparent",r.e=r.e.split(A[d]).join("transparent")):(G||(w=!1),r.appendXtra(w?"rgba(":"rgb(",u[0],f[0]-u[0],",",!0,!0).appendXtra("",u[1],f[1]-u[1],",",!0).appendXtra("",u[2],f[2]-u[2],w?",":S,!0),w&&(u=4>u.length?1:u[3],r.appendXtra("",u,(4>f.length?1:f[3])-u,S,!1)));else if(D=u.match(p)){if(!(I=f.match(v))||I.length!==D.length)return r;for(g=0,c=0;D.length>c;c++)T=D[c],y=u.indexOf(T,g),r.appendXtra(u.substr(g,y-g),Number(T),at(I[c],T),"",P&&"px"===u.substr(y+T.length,2),0===c),g=y+T.length;r["xs"+r.l]+=u.substr(g)}else r["xs"+r.l]+=r.l?" "+u:u;if(-1!==i.indexOf("=")&&r.data){for(S=r.xs0+r.data.s,d=1;r.l>d;d++)S+=r["xs"+d]+r.data["xn"+d];r.e=S+r["xs"+d]}return r.l||(r.type=-1,r.xs0=r.e),r.xfirst||r},ut=9;for((l=ct.prototype).l=l.pr=0;--ut>0;)l["xn"+ut]=0,l["xs"+ut]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,a,i,s,o){var r=this,n=r.l;return r["xs"+n]+=o&&n?" "+t:t||"",a||0===n||r.plugin?(r.l++,r.type=r.setRatio?2:1,r["xs"+r.l]=i||"",n>0?(r.data["xn"+n]=e+a,r.rxp["xn"+n]=s,r["xn"+n]=e,r.plugin||(r.xfirst=new ct(r,"xn"+n,e,a,r.xfirst||r,0,r.n,s,r.pr),r.xfirst.xs0=0),r):(r.data={s:e+a},r.rxp={},r.s=e,r.c=a,r.r=s,r)):(r["xs"+n]+=e+(i||""),r)};var pt=function(t,e){e=e||{},this.p=e.prefix&&U(t)||t,n[t]=n[this.p]=this,this.format=e.formatter||ht(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},vt=Y._registerComplexSpecialProp=function(t,e,a){"object"!=typeof e&&(e={parser:a});var i,s=t.split(","),o=e.defaultValue;for(a=a||[o],i=0;s.length>i;i++)e.prefix=0===i&&e.prefix,e.defaultValue=a[i]||o,new pt(s[i],e)},ft=function(t){if(!n[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";vt(t,{parser:function(t,a,i,s,o,r,l){var h=(window.GreenSockGlobals||window).com.greensock.plugins[e];return h?(h._cssRegister(),n[i].parse(t,a,i,s,o,r,l)):(z("Error: "+e+" js file not loaded."),o)}})}};(l=pt.prototype).parseComplex=function(t,e,a,i,s,o){var r,n,l,h,m,d=this.keyword;if(this.multi&&(E.test(a)||E.test(e)?(n=e.replace(E,"|").split("|"),l=a.replace(E,"|").split("|")):d&&(n=[e],l=[a])),l){for(h=l.length>n.length?l.length:n.length,r=0;h>r;r++)e=n[r]=n[r]||this.dflt,a=l[r]=l[r]||this.dflt,d&&(e.indexOf(d)!==(m=a.indexOf(d))&&((a=-1===m?l:n)[r]+=" "+d));e=n.join(", "),a=l.join(", ")}return gt(t,this.p,e,a,this.clrs,this.dflt,i,this.pr,s,o)},l.parse=function(t,e,a,i,o,r){return this.parseComplex(t.style,this.format(V(t,this.p,s,!1,this.dflt)),this.format(e),o,r)},r.registerSpecialProp=function(t,e,a){vt(t,{parser:function(t,i,s,o,r,n){var l=new ct(t,s,0,0,r,2,s,!1,a);return l.plugin=n,l.setRatio=e(t,i,o._tween,s),l},priority:a})};var Dt="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),It=U("transform"),_t=O+"transform",wt=U("transformOrigin"),yt=null!==U("perspective"),bt=function(t,e,a,i){if(t._gsTransform&&a&&!i)return t._gsTransform;var s,o,n,l,h,m,d,c,g,u,p,v,f,D=a&&t._gsTransform||{skewY:0},I=0>D.scaleX,_=2e-5,w=1e5,y=1e-4-Math.PI,b=Math.PI-1e-4,T=yt&&(parseFloat(V(t,wt,e,!1,"0 0 0").split(" ")[2])||D.zOrigin)||0;for(It?s=V(t,_t,e,!0):t.currentStyle&&(s=(s=t.currentStyle.filter.match(P))&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),D.x||0,D.y||0].join(","):""),n=(o=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[]).length;--n>-1;)l=Number(o[n]),o[n]=(h=l-(l|=0))?(0|h*w+(0>h?-.5:.5))/w+l:l;if(16===o.length){var S=o[8],x=o[9],A=o[10],M=o[12],N=o[13],E=o[14];if(D.zOrigin&&(M=S*(E=-D.zOrigin)-o[12],N=x*E-o[13],E=A*E+D.zOrigin-o[14]),!a||i||null==D.rotationX){var L,k,H,B,F,R,Y,X=o[0],G=o[1],C=o[2],z=o[3],O=o[4],W=o[5],U=o[6],q=o[7],j=o[11],$=D.rotationX=Math.atan2(U,A),K=y>$||$>b;$&&(L=O*(B=Math.cos(-$))+S*(F=Math.sin(-$)),k=W*B+x*F,H=U*B+A*F,S=O*-F+S*B,x=W*-F+x*B,A=U*-F+A*B,j=q*-F+j*B,O=L,W=k,U=H),($=D.rotationY=Math.atan2(S,X))&&(R=y>$||$>b,k=G*(B=Math.cos(-$))-x*(F=Math.sin(-$)),H=C*B-A*F,x=G*F+x*B,A=C*F+A*B,j=z*F+j*B,X=L=X*B-S*F,G=k,C=H),($=D.rotation=Math.atan2(G,W))&&(Y=y>$||$>b,X=X*(B=Math.cos(-$))+O*(F=Math.sin(-$)),k=G*B+W*F,W=G*-F+W*B,U=C*-F+U*B,G=k),Y&&K?D.rotation=D.rotationX=0:Y&&R?D.rotation=D.rotationY=0:R&&K&&(D.rotationY=D.rotationX=0),D.scaleX=(0|Math.sqrt(X*X+G*G)*w+.5)/w,D.scaleY=(0|Math.sqrt(W*W+x*x)*w+.5)/w,D.scaleZ=(0|Math.sqrt(U*U+A*A)*w+.5)/w,D.skewX=0,D.perspective=j?1/(0>j?-j:j):0,D.x=M,D.y=N,D.z=E}}else if(!(yt&&!i&&o.length&&D.x===o[4]&&D.y===o[5]&&(D.rotationX||D.rotationY)||void 0!==D.x&&"none"===V(t,"display",e))){var Q=o.length>=6,Z=Q?o[0]:1,J=o[1]||0,tt=o[2]||0,et=Q?o[3]:1;D.x=o[4]||0,D.y=o[5]||0,m=Math.sqrt(Z*Z+J*J),d=Math.sqrt(et*et+tt*tt),c=Z||J?Math.atan2(J,Z):D.rotation||0,g=tt||et?Math.atan2(tt,et)+c:D.skewX||0,u=m-Math.abs(D.scaleX||0),p=d-Math.abs(D.scaleY||0),Math.abs(g)>Math.PI/2&&Math.abs(g)<1.5*Math.PI&&(I?(m*=-1,g+=0>=c?Math.PI:-Math.PI,c+=0>=c?Math.PI:-Math.PI):(d*=-1,g+=0>=g?Math.PI:-Math.PI)),v=(c-D.rotation)%Math.PI,f=(g-D.skewX)%Math.PI,(void 0===D.skewX||u>_||-_>u||p>_||-_>p||v>y&&b>v&&!1|v*w||f>y&&b>f&&!1|f*w)&&(D.scaleX=m,D.scaleY=d,D.rotation=c,D.skewX=g),yt&&(D.rotationX=D.rotationY=D.z=0,D.perspective=parseFloat(r.defaultTransformPerspective)||0,D.scaleZ=1)}for(n in D.zOrigin=T,D)_>D[n]&&D[n]>-_&&(D[n]=0);return a&&(t._gsTransform=D),D},Tt=function(t){var e,a,i=this.data,s=-i.rotation,o=s+i.skewX,r=1e5,n=(0|Math.cos(s)*i.scaleX*r)/r,l=(0|Math.sin(s)*i.scaleX*r)/r,h=(0|Math.sin(o)*-i.scaleY*r)/r,m=(0|Math.cos(o)*i.scaleY*r)/r,d=this.t.style,c=this.t.currentStyle;if(c){a=l,l=-h,h=-a,e=c.filter,d.filter="";var g,p,v=this.t.offsetWidth,f=this.t.offsetHeight,D="absolute"!==c.position,w="progid:DXImageTransform.Microsoft.Matrix(M11="+n+", M12="+l+", M21="+h+", M22="+m,y=i.x,b=i.y;if(null!=i.ox&&(y+=(g=(i.oxp?.01*v*i.ox:i.ox)-v/2)-(g*n+(p=(i.oyp?.01*f*i.oy:i.oy)-f/2)*l),b+=p-(g*h+p*m)),D)w+=", Dx="+((g=v/2)-(g*n+(p=f/2)*l)+y)+", Dy="+(p-(g*h+p*m)+b)+")";else{var T,S,x,A=8>u?1:-1;for(g=i.ieOffsetX||0,p=i.ieOffsetY||0,i.ieOffsetX=Math.round((v-((0>n?-n:n)*v+(0>l?-l:l)*f))/2+y),i.ieOffsetY=Math.round((f-((0>m?-m:m)*f+(0>h?-h:h)*v))/2+b),ut=0;4>ut;ut++)x=(a=-1!==(T=c[S=J[ut]]).indexOf("px")?parseFloat(T):j(this.t,S,parseFloat(T),T.replace(I,""))||0)!==i[S]?2>ut?-i.ieOffsetX:-i.ieOffsetY:2>ut?g-i.ieOffsetX:p-i.ieOffsetY,d[S]=(i[S]=Math.round(a-x*(0===ut||2===ut?1:A)))+"px";w+=", sizingMethod='auto expand')"}d.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(N,w):w+" "+e,(0===t||1===t)&&1===n&&0===l&&0===h&&1===m&&(D&&-1===w.indexOf("Dx=0, Dy=0")||_.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient(")&&d.removeAttribute("filter"))}},St=function(){var t,e,a,i,s,o,r,n,l,h,m,d,g,u,p,v,f,D,I,_,w,y,b,T,S,x,A,M=this.data,P=this.t.style,N=M.rotation,E=M.scaleX,L=M.scaleY,k=M.scaleZ;if(c&&(S=P.top?"top":P.bottom||parseFloat(V(this.t,"top",null,!1))?"bottom":"top",w=V(this.t,S,null,!1),x=parseFloat(w)||0,A=w.substr((x+"").length)||"px",M._ffFix=!M._ffFix,P[S]=(M._ffFix?x+.05:x-.05)+A),N||M.skewX)t=I=Math.cos(N),s=_=Math.sin(N),M.skewX&&(N-=M.skewX,I=Math.cos(N),_=Math.sin(N)),e=-_,o=I;else{if(!M.rotationY&&!M.rotationX&&1===k)return void(P[It]="translate3d("+M.x+"px,"+M.y+"px,"+M.z+"px)"+(1!==E||1!==L?" scale("+E+","+L+")":""));t=o=1,e=s=0}m=1,a=i=r=n=l=h=d=g=u=0,p=(v=M.perspective)?-1/v:0,f=M.zOrigin,D=1e5,(N=M.rotationY)&&(I=Math.cos(N),l=m*-(_=Math.sin(N)),g=p*-_,a=t*_,r=s*_,m*=I,p*=I,t*=I,s*=I),(N=M.rotationX)&&(w=e*(I=Math.cos(N))+a*(_=Math.sin(N)),y=o*I+r*_,b=h*I+m*_,T=u*I+p*_,a=e*-_+a*I,r=o*-_+r*I,m=h*-_+m*I,p=u*-_+p*I,e=w,o=y,h=b,u=T),1!==k&&(a*=k,r*=k,m*=k,p*=k),1!==L&&(e*=L,o*=L,h*=L,u*=L),1!==E&&(t*=E,s*=E,l*=E,g*=E),f&&(i=a*(d-=f),n=r*d,d=m*d+f),i=(w=(i+=M.x)-(i|=0))?(0|w*D+(0>w?-.5:.5))/D+i:i,n=(w=(n+=M.y)-(n|=0))?(0|w*D+(0>w?-.5:.5))/D+n:n,d=(w=(d+=M.z)-(d|=0))?(0|w*D+(0>w?-.5:.5))/D+d:d,P[It]="matrix3d("+[(0|t*D)/D,(0|s*D)/D,(0|l*D)/D,(0|g*D)/D,(0|e*D)/D,(0|o*D)/D,(0|h*D)/D,(0|u*D)/D,(0|a*D)/D,(0|r*D)/D,(0|m*D)/D,(0|p*D)/D,i,n,d,v?1+-d/v:1].join(",")+")"},xt=function(){var t,e,a,i,s,o,r,n,l,h=this.data,m=this.t,d=m.style;c&&(t=d.top?"top":d.bottom||parseFloat(V(m,"top",null,!1))?"bottom":"top",e=V(m,t,null,!1),a=parseFloat(e)||0,i=e.substr((a+"").length)||"px",h._ffFix=!h._ffFix,d[t]=(h._ffFix?a+.05:a-.05)+i),h.rotation||h.skewX?(o=(s=h.rotation)-h.skewX,r=1e5,n=h.scaleX*r,l=h.scaleY*r,d[It]="matrix("+(0|Math.cos(s)*n)/r+","+(0|Math.sin(s)*n)/r+","+(0|Math.sin(o)*-l)/r+","+(0|Math.cos(o)*l)/r+","+h.x+","+h.y+")"):d[It]="matrix("+h.scaleX+",0,0,"+h.scaleY+","+h.x+","+h.y+")"};vt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D",{parser:function(t,e,a,i,o,r,n){if(i._transform)return o;var l,h,m,d,c,g,u,p=i._transform=bt(t,s,!0,n.parseTransform),v=t.style,f=1e-6,D=Dt.length,I=n,_={};if("string"==typeof I.transform&&It)m=v.cssText,v[It]=I.transform,v.display="block",l=bt(t,null,!1),v.cssText=m;else if("object"==typeof I){if(l={scaleX:it(null!=I.scaleX?I.scaleX:I.scale,p.scaleX),scaleY:it(null!=I.scaleY?I.scaleY:I.scale,p.scaleY),scaleZ:it(null!=I.scaleZ?I.scaleZ:I.scale,p.scaleZ),x:it(I.x,p.x),y:it(I.y,p.y),z:it(I.z,p.z),perspective:it(I.transformPerspective,p.perspective)},null!=(u=I.directionalRotation))if("object"==typeof u)for(m in u)I[m]=u[m];else I.rotation=u;l.rotation=st("rotation"in I?I.rotation:"shortRotation"in I?I.shortRotation+"_short":"rotationZ"in I?I.rotationZ:p.rotation*k,p.rotation,"rotation",_),yt&&(l.rotationX=st("rotationX"in I?I.rotationX:"shortRotationX"in I?I.shortRotationX+"_short":p.rotationX*k||0,p.rotationX,"rotationX",_),l.rotationY=st("rotationY"in I?I.rotationY:"shortRotationY"in I?I.shortRotationY+"_short":p.rotationY*k||0,p.rotationY,"rotationY",_)),l.skewX=null==I.skewX?p.skewX:st(I.skewX,p.skewX),l.skewY=null==I.skewY?p.skewY:st(I.skewY,p.skewY),(h=l.skewY-p.skewY)&&(l.skewX+=h,l.rotation+=h)}for(null!=I.force3D&&(p.force3D=I.force3D,g=!0),(c=p.force3D||p.z||p.rotationX||p.rotationY||l.z||l.rotationX||l.rotationY||l.perspective)||null==I.scale||(l.scaleZ=1);--D>-1;)((d=l[a=Dt[D]]-p[a])>f||-f>d||null!=H[a])&&(g=!0,o=new ct(p,a,p[a],d,o),a in _&&(o.e=_[a]),o.xs0=0,o.plugin=r,i._overwriteProps.push(o.n));return((d=I.transformOrigin)||yt&&c&&p.zOrigin)&&(It?(g=!0,a=wt,d=(d||V(t,a,s,!1,"50% 50%"))+"",(o=new ct(v,a,0,0,o,-1,"transformOrigin")).b=v[a],o.plugin=r,yt?(m=p.zOrigin,d=d.split(" "),p.zOrigin=(d.length>2&&(0===m||"0px"!==d[2])?parseFloat(d[2]):m)||0,o.xs0=o.e=v[a]=d[0]+" "+(d[1]||"50%")+" 0px",(o=new ct(p,"zOrigin",0,0,o,-1,o.n)).b=m,o.xs0=o.e=p.zOrigin):o.xs0=o.e=v[a]=d):et(d+"",p)),g&&(i._transformType=c||3===this._transformType?3:2),o},prefix:!0}),vt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),vt("borderRadius",{defaultValue:"0px",parser:function(t,e,a,o,r){e=this.format(e);var n,l,h,m,d,c,g,u,p,v,f,D,I,_,w,y,b=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=t.style;for(p=parseFloat(t.offsetWidth),v=parseFloat(t.offsetHeight),n=e.split(" "),l=0;b.length>l;l++)this.p.indexOf("border")&&(b[l]=U(b[l])),-1!==(d=m=V(t,b[l],s,!1,"0px")).indexOf(" ")&&(m=d.split(" "),d=m[0],m=m[1]),c=h=n[l],g=parseFloat(d),D=d.substr((g+"").length),(I="="===c.charAt(1))?(u=parseInt(c.charAt(0)+"1",10),c=c.substr(2),u*=parseFloat(c),f=c.substr((u+"").length-(0>u?1:0))||""):(u=parseFloat(c),f=c.substr((u+"").length)),""===f&&(f=i[a]||D),f!==D&&(_=j(t,"borderLeft",g,D),w=j(t,"borderTop",g,D),"%"===f?(d=_/p*100+"%",m=w/v*100+"%"):"em"===f?(d=_/(y=j(t,"borderLeft",1,"em"))+"em",m=w/y+"em"):(d=_+"px",m=w+"px"),I&&(c=parseFloat(d)+u+f,h=parseFloat(m)+u+f)),r=gt(T,b[l],d+" "+m,c+" "+h,!1,"0px",r);return r},prefix:!0,formatter:ht("0px 0px 0px 0px",!1,!0)}),vt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,a,i,o,r){var n,l,h,m,d,c,g="background-position",p=s||q(t,null),v=this.format((p?u?p.getPropertyValue(g+"-x")+" "+p.getPropertyValue(g+"-y"):p.getPropertyValue(g):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),f=this.format(e);if(-1!==v.indexOf("%")!=(-1!==f.indexOf("%"))&&((c=V(t,"backgroundImage").replace(x,""))&&"none"!==c)){for(n=v.split(" "),l=f.split(" "),R.setAttribute("src",c),h=2;--h>-1;)(m=-1!==(v=n[h]).indexOf("%"))!==(-1!==l[h].indexOf("%"))&&(d=0===h?t.offsetWidth-R.width:t.offsetHeight-R.height,n[h]=m?parseFloat(v)/100*d+"px":parseFloat(v)/d*100+"%");v=n.join(" ")}return this.parseComplex(t.style,v,f,o,r)},formatter:et}),vt("backgroundSize",{defaultValue:"0 0",formatter:et}),vt("perspective",{defaultValue:"0px",prefix:!0}),vt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),vt("transformStyle",{prefix:!0}),vt("backfaceVisibility",{prefix:!0}),vt("margin",{parser:mt("marginTop,marginRight,marginBottom,marginLeft")}),vt("padding",{parser:mt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),vt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,a,i,o,r){var n,l,h;return 9>u?(l=t.currentStyle,h=8>u?" ":",",n="rect("+l.clipTop+h+l.clipRight+h+l.clipBottom+h+l.clipLeft+")",e=this.format(e).split(",").join(h)):(n=this.format(V(t,this.p,s,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,n,e,o,r)}}),vt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),vt("autoRound,strictUnits",{parser:function(t,e,a,i,s){return s}}),vt("border",{defaultValue:"0px solid #000",parser:function(t,e,a,i,o,r){return this.parseComplex(t.style,this.format(V(t,"borderTopWidth",s,!1,"0px")+" "+V(t,"borderTopStyle",s,!1,"solid")+" "+V(t,"borderTopColor",s,!1,"#000")),this.format(e),o,r)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(lt)||["#000"])[0]}}),vt("float,cssFloat,styleFloat",{parser:function(t,e,a,i,s){var o=t.style,r="cssFloat"in o?"cssFloat":"styleFloat";return new ct(o,r,0,0,s,-1,a,!1,0,o[r],e)}});var At=function(t){var e,a=this.t,i=a.filter||V(this.data,"filter"),s=0|this.s+this.c*t;100===s&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")?(a.removeAttribute("filter"),e=!V(this.data,"filter")):(a.filter=i.replace(y,""),e=!0)),e||(this.xn1&&(a.filter=i=i||"alpha(opacity="+s+")"),-1===i.indexOf("opacity")?0===s&&this.xn1||(a.filter+=" alpha(opacity="+s+")"):a.filter=i.replace(_,"opacity="+s))};vt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,a,i,o,r){var n=parseFloat(V(t,"opacity",s,!1,"1")),l=t.style,h="autoAlpha"===a;return e=parseFloat(e),h&&1===n&&"hidden"===V(t,"visibility",s)&&0!==e&&(n=0),G?o=new ct(l,"opacity",n,e-n,o):((o=new ct(l,"opacity",100*n,100*(e-n),o)).xn1=h?1:0,l.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=t,o.plugin=r,o.setRatio=At),h&&((o=new ct(l,"visibility",0,0,o,-1,null,!1,0,0!==n?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",i._overwriteProps.push(o.n)),o}});var Mt=function(t,e){e&&(t.removeProperty?t.removeProperty(e.replace(T,"-$1").toLowerCase()):t.removeAttribute(e))},Pt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.className=0===t?this.b:this.e;for(var e=this.data,a=this.t.style;e;)e.v?a[e.p]=e.v:Mt(a,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};vt("className",{parser:function(t,e,i,o,r,n,l){var h,m,d,c,g,u=t.className,p=t.style.cssText;if((r=o._classNamePT=new ct(t,i,0,0,r,2)).setRatio=Pt,r.pr=-11,a=!0,r.b=u,m=K(t,s),d=t._gsClassPT){for(c={},g=d.data;g;)c[g.p]=1,g=g._next;d.setRatio(1)}return t._gsClassPT=r,r.e="="!==e.charAt(1)?e:u.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),o._tween._duration&&(t.className=r.e,h=Q(t,m,K(t),l,c),t.className=u,r.data=h.firstMPT,t.style.cssText=p,r=r.xfirst=o.parse(t,h.difs,r,n)),r}});var Nt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration){if("all"===this.e)return this.t.style.cssText="",void(this.t._gsTransform&&delete this.t._gsTransform);for(var e,a=this.t.style,i=this.e.split(","),s=i.length,o=n.transform.parse;--s>-1;)e=i[s],n[e]&&(e=n[e].parse===o?It:n[e].p),Mt(a,e)}};for(vt("clearProps",{parser:function(t,e,i,s,o){return(o=new ct(t,i,0,0,o,2)).setRatio=Nt,o.e=e,o.pr=-10,o.data=s._tween,a=!0,o}}),l="bezier,throwProps,physicsProps,physics2D".split(","),ut=l.length;ut--;)ft(l[ut]);(l=r.prototype)._firstPT=null,l._onInitTween=function(t,e,n){if(!t.nodeType)return!1;this._target=t,this._tween=n,this._vars=e,h=e.autoRound,a=!1,i=e.suffixMap||r.suffixMap,s=q(t,""),o=this._overwriteProps;var l,c,u,p,v,f,D,I,_,y=t.style;if(m&&""===y.zIndex&&(("auto"===(l=V(t,"zIndex",s))||""===l)&&(y.zIndex=0)),"string"==typeof e&&(p=y.cssText,l=K(t,s),y.cssText=p+";"+e,l=Q(t,l,K(t)).difs,!G&&w.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,y.cssText=p),this._firstPT=c=this.parse(t,e,null),this._transformType){for(_=3===this._transformType,It?d&&(m=!0,""===y.zIndex&&(("auto"===(D=V(t,"zIndex",s))||""===D)&&(y.zIndex=0)),g&&(y.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(_?"visible":"hidden"))):y.zoom=1,u=c;u&&u._next;)u=u._next;I=new ct(t,"transform",0,0,null,2),this._linkCSSP(I,null,u),I.setRatio=_&&yt?St:It?xt:Tt,I.data=this._transform||bt(t,s,!0),o.pop()}if(a){for(;c;){for(f=c._next,u=p;u&&u.pr>c.pr;)u=u._next;(c._prev=u?u._prev:v)?c._prev._next=c:p=c,(c._next=u)?u._prev=c:v=c,c=f}this._firstPT=p}return!0},l.parse=function(t,e,a,o){var r,l,m,d,c,g,u,p,v,f,D=t.style;for(r in e)g=e[r],(l=n[r])?a=l.parse(t,g,r,this,a,o,e):(c=V(t,r,s)+"",v="string"==typeof g,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||v&&b.test(g)?(v||(g=((g=nt(g)).length>3?"rgba(":"rgb(")+g.join(",")+")"),a=gt(D,r,c,g,!0,"transparent",a,0,o)):!v||-1===g.indexOf(" ")&&-1===g.indexOf(",")?(u=(m=parseFloat(c))||0===m?c.substr((m+"").length):"",(""===c||"auto"===c)&&("width"===r||"height"===r?(m=tt(t,r,s),u="px"):"left"===r||"top"===r?(m=$(t,r,s),u="px"):(m="opacity"!==r?0:1,u="")),(f=v&&"="===g.charAt(1))?(d=parseInt(g.charAt(0)+"1",10),g=g.substr(2),d*=parseFloat(g),p=g.replace(I,"")):(d=parseFloat(g),p=v&&g.substr((d+"").length)||""),""===p&&(p=i[r]||u),g=d||0===d?(f?d+m:d)+p:e[r],u!==p&&""!==p&&(d||0===d)&&(m||0===m)&&(m=j(t,r,m,u),"%"===p?((m/=j(t,r,100,"%")/100)>100&&(m=100),!0!==e.strictUnits&&(c=m+"%")):"em"===p?m/=j(t,r,1,"em"):(d=j(t,r,d,p),p="px"),f&&(d||0===d)&&(g=d+m+p)),f&&(d+=m),!m&&0!==m||!d&&0!==d?void 0!==D[r]&&(g||"NaN"!=g+""&&null!=g)?(a=new ct(D,r,d||m||0,0,a,-1,r,!1,0,c,g)).xs0="none"!==g||"display"!==r&&-1===r.indexOf("Style")?g:c:z("invalid "+r+" tween value: "+e[r]):(a=new ct(D,r,m,d-m,a,0,r,!1!==h&&("px"===p||"zIndex"===r),0,c,g)).xs0=p):a=gt(D,r,c,g,!0,null,a,0,o)),o&&a&&!a.plugin&&(a.plugin=o);return a},l.setRatio=function(t){var e,a,i,s=this._firstPT,o=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;s;){if(e=s.c*t+s.s,s.r?e=e>0?0|e+.5:0|e-.5:o>e&&e>-o&&(e=0),s.type)if(1===s.type)if(2===(i=s.l))s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2;else if(3===i)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3;else if(4===i)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4;else if(5===i)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4+s.xn4+s.xs5;else{for(a=s.xs0+e+s.xs1,i=1;s.l>i;i++)a+=s["xn"+i]+s["xs"+(i+1)];s.t[s.p]=a}else-1===s.type?s.t[s.p]=s.xs0:s.setRatio&&s.setRatio(t);else s.t[s.p]=e+s.xs0;s=s._next}else for(;s;)2!==s.type?s.t[s.p]=s.b:s.setRatio(t),s=s._next;else for(;s;)2!==s.type?s.t[s.p]=s.e:s.setRatio(t),s=s._next},l._enableTransforms=function(t){this._transformType=t||3===this._transformType?3:2,this._transform=this._transform||bt(this._target,s,!0)},l._linkCSSP=function(t,e,a,i){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,i=!0),a?a._next=t:i||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=a),t},l._kill=function(e){var a,i,s,o=e;if(e.autoAlpha||e.alpha){for(i in o={},e)o[i]=e[i];o.opacity=1,o.autoAlpha&&(o.visibility=1)}return e.className&&(a=this._classNamePT)&&((s=a.xfirst)&&s._prev?this._linkCSSP(s._prev,a._next,s._prev._prev):s===this._firstPT&&(this._firstPT=a._next),a._next&&this._linkCSSP(a._next,a._next._next,s._prev),this._classNamePT=null),t.prototype._kill.call(this,o)};var Et=function(t,e,a){var i,s,o,r;if(t.slice)for(s=t.length;--s>-1;)Et(t[s],e,a);else for(s=(i=t.childNodes).length;--s>-1;)r=(o=i[s]).type,o.style&&(e.push(K(o)),a&&a.push(o)),1!==r&&9!==r&&11!==r||!o.childNodes.length||Et(o,e,a)};return r.cascadeTo=function(t,a,i){var s,o,r,n=e.to(t,a,i),l=[n],h=[],m=[],d=[],c=e._internals.reservedProps;for(t=n._targets||n.target,Et(t,h,d),n.render(a,!0),Et(t,m),n.render(0,!0),n._enabled(!0),s=0;--s>-1;)if((o=Q(d[s],h[s],m[s])).firstMPT){for(r in o=o.difs,i)c[r]&&(o[r]=i[r]);l.push(e.to(d[s],a,o))}return l},t.activate([r]),r}),!0),function(){var t=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,a){return this._tween=a,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,a,i=this._tween,s=i.vars.roundProps instanceof Array?i.vars.roundProps:i.vars.roundProps.split(","),o=s.length,r={},n=i._propLookup.roundProps;--o>-1;)r[s[o]]=1;for(o=s.length;--o>-1;)for(t=s[o],e=i._firstPT;e;)a=e._next,e.pg?e.t._roundProps(r,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),a&&(a._prev=e._prev),e._prev?e._prev._next=a:i._firstPT===e&&(i._firstPT=a),e._next=e._prev=null,i._propLookup[t]=n),e=a;return!1},e._add=function(t,e,a,i){this._addTween(t,e,a,a+i,e,!0),this._overwriteProps.push(e)}}(),window._gsDefine.plugin({propName:"attr",API:2,init:function(t,e){var a;if("function"!=typeof t.setAttribute)return!1;for(a in this._target=t,this._proxy={},e)this._addTween(this._proxy,a,parseFloat(t.getAttribute(a)),e[a],a)&&this._overwriteProps.push(a);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,a=this._overwriteProps,i=a.length;--i>-1;)e=a[i],this._target.setAttribute(e,this._proxy[e]+"")}}),window._gsDefine.plugin({propName:"directionalRotation",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var a,i,s,o,r,n=!0===e.useRadians?2*Math.PI:360,l=1e-6;for(a in e)"useRadians"!==a&&(i=(r=(e[a]+"").split("_"))[0],s=parseFloat("function"!=typeof t[a]?t[a]:t[a.indexOf("set")||"function"!=typeof t["get"+a.substr(3)]?a:"get"+a.substr(3)]()),o=(this.finals[a]="string"==typeof i&&"="===i.charAt(1)?s+parseInt(i.charAt(0)+"1",10)*Number(i.substr(2)):Number(i)||0)-s,r.length&&(-1!==(i=r.join("_")).indexOf("short")&&((o%=n)!==o%(n/2)&&(o=0>o?o+n:o-n)),-1!==i.indexOf("_cw")&&0>o?o=(o+9999999999*n)%n-(0|o/n)*n:-1!==i.indexOf("ccw")&&o>0&&(o=(o-9999999999*n)%n-(0|o/n)*n)),(o>l||-l>o)&&(this._addTween(t,a,s,s+o,a),this._overwriteProps.push(a)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],(function(t){var e,a,i,s=window.GreenSockGlobals||window,o=s.com.greensock,r=2*Math.PI,n=Math.PI/2,l=o._class,h=function(e,a){var i=l("easing."+e,(function(){}),!0),s=i.prototype=new t;return s.constructor=i,s.getRatio=a,i},m=t.register||function(){},d=function(t,e,a,i){var s=l("easing."+t,{easeOut:new e,easeIn:new a,easeInOut:new i},!0);return m(s,t),s},c=function(t,e,a){this.t=t,this.v=e,a&&(this.next=a,a.prev=this,this.c=a.v-e,this.gap=a.t-t)},g=function(e,a){var i=l("easing."+e,(function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1}),!0),s=i.prototype=new t;return s.constructor=i,s.getRatio=a,s.config=function(t){return new i(t)},i},u=d("Back",g("BackOut",(function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1})),g("BackIn",(function(t){return t*t*((this._p1+1)*t-this._p1)})),g("BackInOut",(function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)}))),p=l("easing.SlowMo",(function(t,e,a){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===a}),!0),v=p.prototype=new t;return v.constructor=p,v.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},p.ease=new p(.7,.7),v.config=p.config=function(t,e,a){return new p(t,e,a)},e=l("easing.SteppedEase",(function(t){t=t||1,this._p1=1/t,this._p2=t+1}),!0),(v=e.prototype=new t).constructor=e,v.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},v.config=e.config=function(t){return new e(t)},a=l("easing.RoughEase",(function(e){for(var a,i,s,o,r,n,l=(e=e||{}).taper||"none",h=[],m=0,d=0|(e.points||20),g=d,u=!1!==e.randomize,p=!0===e.clamp,v=e.template instanceof t?e.template:null,f="number"==typeof e.strength?.4*e.strength:.4;--g>-1;)a=u?Math.random():1/d*g,i=v?v.getRatio(a):a,"none"===l?s=f:"out"===l?s=(o=1-a)*o*f:"in"===l?s=a*a*f:.5>a?s=.5*(o=2*a)*o*f:s=.5*(o=2*(1-a))*o*f,u?i+=Math.random()*s-.5*s:g%2?i+=.5*s:i-=.5*s,p&&(i>1?i=1:0>i&&(i=0)),h[m++]={x:a,y:i};for(h.sort((function(t,e){return t.x-e.x})),n=new c(1,1,null),g=d;--g>-1;)r=h[g],n=new c(r.x,r.y,n);this._prev=new c(0,0,0!==n.t?n:n.next)}),!0),(v=a.prototype=new t).constructor=a,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new a(t)},a.ease=new a,d("Bounce",h("BounceOut",(function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),h("BounceIn",(function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)})),h("BounceInOut",(function(t){var e=.5>t;return t=1/2.75>(t=e?1-2*t:2*t-1)?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}))),d("Circ",h("CircOut",(function(t){return Math.sqrt(1-(t-=1)*t)})),h("CircIn",(function(t){return-(Math.sqrt(1-t*t)-1)})),h("CircInOut",(function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}))),i=function(e,a,i){var s=l("easing."+e,(function(t,e){this._p1=t||1,this._p2=e||i,this._p3=this._p2/r*(Math.asin(1/this._p1)||0)}),!0),o=s.prototype=new t;return o.constructor=s,o.getRatio=a,o.config=function(t,e){return new s(t,e)},s},d("Elastic",i("ElasticOut",(function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*r/this._p2)+1}),.3),i("ElasticIn",(function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*r/this._p2)}),.3),i("ElasticInOut",(function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*r/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*r/this._p2)+1}),.45)),d("Expo",h("ExpoOut",(function(t){return 1-Math.pow(2,-10*t)})),h("ExpoIn",(function(t){return Math.pow(2,10*(t-1))-.001})),h("ExpoInOut",(function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}))),d("Sine",h("SineOut",(function(t){return Math.sin(t*n)})),h("SineIn",(function(t){return 1-Math.cos(t*n)})),h("SineInOut",(function(t){return-.5*(Math.cos(Math.PI*t)-1)}))),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),m(s.SlowMo,"SlowMo","ease,"),m(a,"RoughEase","ease,"),m(e,"SteppedEase","ease,"),u}),!0)})),function(t){"use strict";var e,a,i,s,o,r=t.GreenSockGlobals||t,n=function(t){var e,a=t.split("."),i=r;for(e=0;a.length>e;e++)i[a[e]]=i=i[a[e]]||{};return i},l=n("com.greensock"),h=[].slice,m=function(){},d={},c=function(e,a,i,s){this.sc=d[e]?d[e].sc:[],d[e]=this,this.gsClass=null,this.func=i;var o=[];this.check=function(l){for(var h,m,g,u,p=a.length,v=p;--p>-1;)(h=d[a[p]]||new c(a[p],[])).gsClass?(o[p]=h.gsClass,v--):l&&h.sc.push(this);if(0===v&&i)for(g=(m=("com.greensock."+e).split(".")).pop(),u=n(m.join("."))[g]=this.gsClass=i.apply(i,o),s&&(r[g]=u,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+e.split(".").join("/"),[],(function(){return u})):"undefined"!=typeof module&&module.exports&&(module.exports=u)),p=0;this.sc.length>p;p++)this.sc[p].check()},this.check(!0)},g=t._gsDefine=function(t,e,a,i){return new c(t,e,a,i)},u=l._class=function(t,e,a){return e=e||function(){},g(t,[],(function(){return e}),a),e};g.globals=r;var p=[0,0,1,1],v=[],f=u("easing.Ease",(function(t,e,a,i){this._func=t,this._type=a||0,this._power=i||0,this._params=e?p.concat(e):p}),!0),D=f.map={},I=f.register=function(t,e,a,i){for(var s,o,r,n,h=e.split(","),m=h.length,d=(a||"easeIn,easeOut,easeInOut").split(",");--m>-1;)for(o=h[m],s=i?u("easing."+o,null,!0):l.easing[o]||{},r=d.length;--r>-1;)n=d[r],D[o+"."+n]=D[n+o]=s[n]=t.getRatio?t:t[n]||new t};for((i=f.prototype)._calcEnd=!1,i.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,a=this._power,i=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===a?i*=i:2===a?i*=i*i:3===a?i*=i*i*i:4===a&&(i*=i*i*i*i),1===e?1-i:2===e?i:.5>t?i/2:1-i/2},a=(e=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--a>-1;)i=e[a]+",Power"+a,I(new f(null,null,1,a),i,"easeOut",!0),I(new f(null,null,2,a),i,"easeIn"+(0===a?",easeNone":"")),I(new f(null,null,3,a),i,"easeInOut");D.linear=l.easing.Linear.easeIn,D.swing=l.easing.Quad.easeInOut;var _=u("events.EventDispatcher",(function(t){this._listeners={},this._eventTarget=t||this}));(i=_.prototype).addEventListener=function(t,e,a,i,r){r=r||0;var n,l,h=this._listeners[t],m=0;for(null==h&&(this._listeners[t]=h=[]),l=h.length;--l>-1;)(n=h[l]).c===e&&n.s===a?h.splice(l,1):0===m&&r>n.pr&&(m=l+1);h.splice(m,0,{c:e,s:a,up:i,pr:r}),this!==s||o||s.wake()},i.removeEventListener=function(t,e){var a,i=this._listeners[t];if(i)for(a=i.length;--a>-1;)if(i[a].c===e)return void i.splice(a,1)},i.dispatchEvent=function(t){var e,a,i,s=this._listeners[t];if(s)for(e=s.length,a=this._eventTarget;--e>-1;)(i=s[e]).up?i.c.call(i.s||a,{type:t,target:a}):i.c.call(i.s||a)};var w=t.requestAnimationFrame,y=t.cancelAnimationFrame,b=Date.now||function(){return(new Date).getTime()},T=b();for(a=(e=["ms","moz","webkit","o"]).length;--a>-1&&!w;)w=t[e[a]+"RequestAnimationFrame"],y=t[e[a]+"CancelAnimationFrame"]||t[e[a]+"CancelRequestAnimationFrame"];u("Ticker",(function(t,e){var a,i,r,n,l,h=this,d=b(),c=!1!==e&&w,g=function(t){T=b(),h.time=(T-d)/1e3;var e,s=h.time-l;(!a||s>0||!0===t)&&(h.frame++,l+=s+(s>=n?.004:n-s),e=!0),!0!==t&&(r=i(g)),e&&h.dispatchEvent("tick")};_.call(h),this.time=this.frame=0,this.tick=function(){g(!0)},this.sleep=function(){null!=r&&(c&&y?y(r):clearTimeout(r),i=m,r=null,h===s&&(o=!1))},this.wake=function(){null!==r&&h.sleep(),i=0===a?m:c&&w?w:function(t){return setTimeout(t,0|1e3*(l-h.time)+1)},h===s&&(o=!0),g(2)},this.fps=function(t){return arguments.length?(n=1/((a=t)||60),l=this.time+n,void h.wake()):a},this.useRAF=function(t){return arguments.length?(h.sleep(),c=t,void h.fps(a)):c},h.fps(t),setTimeout((function(){c&&(!r||5>h.frame)&&h.useRAF(!1)}),1500)})),(i=l.Ticker.prototype=new l.events.EventDispatcher).constructor=l.Ticker;var S=u("core.Animation",(function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,R){o||s.wake();var a=this.vars.useFrames?F:R;a.add(this,a._time),this.vars.paused&&this.paused(!0)}}));s=S.ticker=new l.Ticker,(i=S.prototype)._dirty=i._gc=i._initted=i._paused=!1,i._totalTime=i._time=0,i._rawPrevTime=-1,i._next=i._last=i._onUpdate=i._timeline=i.timeline=null,i._paused=!1;var x=function(){b()-T>2e3&&s.wake(),setTimeout(x,2e3)};x(),i.play=function(t,e){return arguments.length&&this.seek(t,e),this.reversed(!1).paused(!1)},i.pause=function(t,e){return arguments.length&&this.seek(t,e),this.paused(!0)},i.resume=function(t,e){return arguments.length&&this.seek(t,e),this.paused(!1)},i.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},i.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},i.reverse=function(t,e){return arguments.length&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},i.render=function(){},i.invalidate=function(){return this},i._enabled=function(t,e){return o||s.wake(),this._gc=!t,this._active=t&&!this._paused&&this._totalTime>0&&this._totalTime<this._totalDuration,!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},i._kill=function(){return this._enabled(!1,!1)},i.kill=function(t,e){return this._kill(t,e),this},i._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},i._swapSelfInParams=function(t){for(var e=t.length,a=t.concat();--e>-1;)"{self}"===t[e]&&(a[e]=this);return a},i.eventCallback=function(t,e,a,i){if("on"===(t||"").substr(0,2)){var s=this.vars;if(1===arguments.length)return s[t];null==e?delete s[t]:(s[t]=e,s[t+"Params"]=a instanceof Array&&-1!==a.join("").indexOf("{self}")?this._swapSelfInParams(a):a,s[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},i.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},i.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},i.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},i.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},i.totalTime=function(t,e,a){if(o||s.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!a&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(t>i&&!a&&(t=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime!==t&&this.render(t,e,!1)}return this},i.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},i.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||1e-6,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,a=e||0===e?e:this._timeline.totalTime();this._startTime=a-(a-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},i.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._totalTime,!0)),this):this._reversed},i.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){o||t||s.wake();var e=this._timeline,a=e.rawTime(),i=a-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?a:null,this._paused=t,this._active=!t&&this._totalTime>0&&this._totalTime<this._totalDuration,t||0===i||0===this._duration||this.render(e.smoothChildTiming?this._totalTime:(a-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var A=u("core.SimpleTimeline",(function(t){S.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0}));(i=A.prototype=new S).constructor=A,i.kill()._gc=!1,i._first=i._last=null,i._sortChildren=!1,i.add=i.insert=function(t,e){var a,i;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),a=this._last,this._sortChildren)for(i=t._startTime;a&&a._startTime>i;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=a,this._timeline&&this._uncache(!0),this},i._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t.timeline=null,t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),this._timeline&&this._uncache(!0)),this},i.render=function(t,e,a){var i,s=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;s;)i=s._next,(s._active||t>=s._startTime&&!s._paused)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,a):s.render((t-s._startTime)*s._timeScale,e,a)),s=i},i.rawTime=function(){return o||s.wake(),this._totalTime};var M=u("TweenLite",(function(e,a,i){if(S.call(this,a,i),this.render=M.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:M.selector(e)||e;var s,o,r,n=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?B[M.defaultOverwrite]:"number"==typeof l?l>>0:B[l],(n||e instanceof Array)&&"number"!=typeof e[0])for(this._targets=r=h.call(e,0),this._propLookup=[],this._siblings=[],s=0;r.length>s;s++)(o=r[s])?"string"!=typeof o?o.length&&o!==t&&o[0]&&(o[0]===t||o[0].nodeType&&o[0].style&&!o.nodeType)?(r.splice(s--,1),this._targets=r=r.concat(h.call(o,0))):(this._siblings[s]=Y(o,this,!1),1===l&&this._siblings[s].length>1&&X(o,this,null,1,this._siblings[s])):"string"==typeof(o=r[s--]=M.selector(o))&&r.splice(s+1,1):r.splice(s--,1);else this._propLookup={},this._siblings=Y(e,this,!1),1===l&&this._siblings.length>1&&X(e,this,null,1,this._siblings);(this.vars.immediateRender||0===a&&0===this._delay&&!1!==this.vars.immediateRender)&&this.render(-this._delay,!1,!0)}),!0),P=function(e){return e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)};(i=M.prototype=new S).constructor=M,i.kill()._gc=!1,i.ratio=0,i._firstPT=i._targets=i._overwrittenProps=i._startAt=null,i._notifyPluginsOfEnabled=!1,M.version="1.10.2",M.defaultEase=i._ease=new f(null,null,1,1),M.defaultOverwrite="auto",M.ticker=s,M.autoSleep=!0,M.selector=t.$||t.jQuery||function(e){return t.$?(M.selector=t.$,t.$(e)):t.document?t.document.getElementById("#"===e.charAt(0)?e.substr(1):e):e};var N=M._internals={},E=M._plugins={},L=M._tweenLookup={},k=0,H=N.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},B={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},F=S._rootFramesTimeline=new A,R=S._rootTimeline=new A;R._startTime=s.time,F._startTime=s.frame,R._active=F._active=!0,S._updateRoot=function(){if(R.render((s.time-R._startTime)*R._timeScale,!1,!1),F.render((s.frame-F._startTime)*F._timeScale,!1,!1),!(s.frame%120)){var t,e,a;for(a in L){for(t=(e=L[a].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete L[a]}if((!(a=R._first)||a._paused)&&M.autoSleep&&!F._first&&1===s._listeners.tick.length){for(;a&&a._paused;)a=a._next;a||s.sleep()}}},s.addEventListener("tick",S._updateRoot);var Y=function(t,e,a){var i,s,o=t._gsTweenID;if(L[o||(t._gsTweenID=o="t"+k++)]||(L[o]={target:t,tweens:[]}),e&&((i=L[o].tweens)[s=i.length]=e,a))for(;--s>-1;)i[s]===e&&i.splice(s,1);return L[o].tweens},X=function(t,e,a,i,s){var o,r,n,l;if(1===i||i>=4){for(l=s.length,o=0;l>o;o++)if((n=s[o])!==e)n._gc||n._enabled(!1,!1)&&(r=!0);else if(5===i)break;return r}var h,m=e._startTime+1e-10,d=[],c=0,g=0===e._duration;for(o=s.length;--o>-1;)(n=s[o])===e||n._gc||n._paused||(n._timeline!==e._timeline?(h=h||G(e,0,g),0===G(n,h,g)&&(d[c++]=n)):m>=n._startTime&&n._startTime+n.totalDuration()/n._timeScale+1e-10>m&&((g||!n._initted)&&2e-10>=m-n._startTime||(d[c++]=n)));for(o=c;--o>-1;)n=d[o],2===i&&n._kill(a,t)&&(r=!0),(2!==i||!n._firstPT&&n._initted)&&n._enabled(!1,!1)&&(r=!0);return r},G=function(t,e,a){for(var i=t._timeline,s=i._timeScale,o=t._startTime,r=1e-10;i._timeline;){if(o+=i._startTime,s*=i._timeScale,i._paused)return-100;i=i._timeline}return(o/=s)>e?o-e:a&&o===e||!t._initted&&2*r>o-e?r:(o+=t.totalDuration()/t._timeScale/s)>e+r?0:o-e-r};i._init=function(){var t,e,a,i,s=this.vars,o=this._overwrittenProps,r=this._duration,n=s.immediateRender,l=s.ease;if(s.startAt){if(this._startAt&&this._startAt.render(-1,!0),s.startAt.overwrite=0,s.startAt.immediateRender=!0,this._startAt=M.to(this.target,0,s.startAt),n)if(this._time>0)this._startAt=null;else if(0!==r)return}else if(s.runBackwards&&s.immediateRender&&0!==r)if(this._startAt)this._startAt.render(-1,!0),this._startAt=null;else if(0===this._time){for(i in a={},s)H[i]&&"autoCSS"!==i||(a[i]=s[i]);return a.overwrite=0,void(this._startAt=M.to(this.target,0,a))}if(this._ease=l?l instanceof f?s.easeParams instanceof Array?l.config.apply(l,s.easeParams):l:"function"==typeof l?new f(l,s.easeParams):D[l]||M.defaultEase:M.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],o?o[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,o);if(e&&M._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(a=this._firstPT;a;)a.s+=a.c,a.c=-a.c,a=a._next;this._onUpdate=s.onUpdate,this._initted=!0},i._initProps=function(e,a,i,s){var o,r,n,l,h,m;if(null==e)return!1;for(o in this.vars.css||e.style&&e!==t&&e.nodeType&&E.css&&!1!==this.vars.autoCSS&&function(t,e){var a,i={};for(a in t)H[a]||a in e&&"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a&&"className"!==a&&"border"!==a||!(!E[a]||E[a]&&E[a]._autoCSS)||(i[a]=t[a],delete t[a]);t.css=i}(this.vars,e),this.vars){if(m=this.vars[o],H[o])m instanceof Array&&-1!==m.join("").indexOf("{self}")&&(this.vars[o]=m=this._swapSelfInParams(m,this));else if(E[o]&&(l=new E[o])._onInitTween(e,this.vars[o],this)){for(this._firstPT=h={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:!0,n:o,pg:!0,pr:l._priority},r=l._overwriteProps.length;--r>-1;)a[l._overwriteProps[r]]=this._firstPT;(l._priority||l._onInitAllProps)&&(n=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=a[o]=h={_next:this._firstPT,t:e,p:o,f:"function"==typeof e[o],n:o,pg:!1,pr:0},h.s=h.f?e[o.indexOf("set")||"function"!=typeof e["get"+o.substr(3)]?o:"get"+o.substr(3)]():parseFloat(e[o]),h.c="string"==typeof m&&"="===m.charAt(1)?parseInt(m.charAt(0)+"1",10)*Number(m.substr(2)):Number(m)-h.s||0;h&&h._next&&(h._next._prev=h)}return s&&this._kill(s,e)?this._initProps(e,a,i,s):this._overwrite>1&&this._firstPT&&i.length>1&&X(e,this,a,this._overwrite,i)?(this._kill(a,e),this._initProps(e,a,i,s)):n},i.render=function(t,e,a){var i,s,o,r=this._time;if(t>=this._duration)this._totalTime=this._time=this._duration,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,s="onComplete"),0===this._duration&&((0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&(a=!0,this._rawPrevTime>0&&(s="onReverseComplete",e&&(t=-1))),this._rawPrevTime=t);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==r||0===this._duration&&this._rawPrevTime>0)&&(s="onReverseComplete",i=this._reversed),0>t?(this._active=!1,0===this._duration&&(this._rawPrevTime>=0&&(a=!0),this._rawPrevTime=t)):this._initted||(a=!0);else if(this._totalTime=this._time=t,this._easeType){var n=t/this._duration,l=this._easeType,h=this._easePower;(1===l||3===l&&n>=.5)&&(n=1-n),3===l&&(n*=2),1===h?n*=n:2===h?n*=n*n:3===h?n*=n*n*n:4===h&&(n*=n*n*n*n),this.ratio=1===l?1-n:2===l?n:.5>t/this._duration?n/2:1-n/2}else this.ratio=this._ease.getRatio(t/this._duration);if(this._time!==r||a){if(!this._initted){if(this._init(),!this._initted)return;this._time&&!i?this.ratio=this._ease.getRatio(this._time/this._duration):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==r&&t>=0&&(this._active=!0),0===r&&(this._startAt&&(t>=0?this._startAt.render(t,e,a):s||(s="_dummyGS")),this.vars.onStart&&(0!==this._time||0===this._duration)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||v))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>t&&this._startAt&&this._startAt.render(t,e,a),e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||v)),s&&(this._gc||(0>t&&this._startAt&&!this._onUpdate&&this._startAt.render(t,e,a),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||v)))}},i._kill=function(t,e){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._enabled(!1,!1);var a,i,s,o,r,n,l,h;if(((e="string"!=typeof e?e||this._targets||this.target:M.selector(e)||e)instanceof Array||P(e))&&"number"!=typeof e[0])for(a=e.length;--a>-1;)this._kill(t,e[a])&&(n=!0);else{if(this._targets){for(a=this._targets.length;--a>-1;)if(e===this._targets[a]){r=this._propLookup[a]||{},this._overwrittenProps=this._overwrittenProps||[],i=this._overwrittenProps[a]=t?this._overwrittenProps[a]||{}:"all";break}}else{if(e!==this.target)return!1;r=this._propLookup,i=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(r){for(s in l=t||r,h=t!==i&&"all"!==i&&t!==r&&(null==t||!0!==t._tempKill),l)(o=r[s])&&(o.pg&&o.t._kill(l)&&(n=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete r[s]),h&&(i[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return n},i.invalidate=function(){return this._notifyPluginsOfEnabled&&M._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},i._enabled=function(t,e){if(o||s.wake(),t&&this._gc){var a,i=this._targets;if(i)for(a=i.length;--a>-1;)this._siblings[a]=Y(i[a],this,!0);else this._siblings=Y(this.target,this,!0)}return S.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&M._onPluginEvent(t?"_onEnable":"_onDisable",this)},M.to=function(t,e,a){return new M(t,e,a)},M.from=function(t,e,a){return a.runBackwards=!0,a.immediateRender=0!=a.immediateRender,new M(t,e,a)},M.fromTo=function(t,e,a,i){return i.startAt=a,i.immediateRender=0!=i.immediateRender&&0!=a.immediateRender,new M(t,e,i)},M.delayedCall=function(t,e,a,i,s){return new M(e,0,{delay:t,onComplete:e,onCompleteParams:a,onCompleteScope:i,onReverseComplete:e,onReverseCompleteParams:a,onReverseCompleteScope:i,immediateRender:!1,useFrames:s,overwrite:0})},M.set=function(t,e){return new M(t,0,e)},M.killTweensOf=M.killDelayedCallsTo=function(t,e){for(var a=M.getTweensOf(t),i=a.length;--i>-1;)a[i]._kill(e,t)},M.getTweensOf=function(t){if(null==t)return[];var e,a,i,s;if(((t="string"!=typeof t?t:M.selector(t)||t)instanceof Array||P(t))&&"number"!=typeof t[0]){for(e=t.length,a=[];--e>-1;)a=a.concat(M.getTweensOf(t[e]));for(e=a.length;--e>-1;)for(s=a[e],i=e;--i>-1;)s===a[i]&&a.splice(e,1)}else for(e=(a=Y(t).concat()).length;--e>-1;)a[e]._gc&&a.splice(e,1);return a};var C=u("plugins.TweenPlugin",(function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=C.prototype}),!0);if(i=C.prototype,C.version="1.10.1",C.API=2,i._firstPT=null,i._addTween=function(t,e,a,i,s,o){var r,n;return null!=i&&(r="number"==typeof i||"="!==i.charAt(1)?Number(i)-a:parseInt(i.charAt(0)+"1",10)*Number(i.substr(2)))?(this._firstPT=n={_next:this._firstPT,t:t,p:e,s:a,c:r,f:"function"==typeof t[e],n:s||e,r:o},n._next&&(n._next._prev=n),n):void 0},i.setRatio=function(t){for(var e,a=this._firstPT,i=1e-6;a;)e=a.c*t+a.s,a.r?e=0|e+(e>0?.5:-.5):i>e&&e>-i&&(e=0),a.f?a.t[a.p](e):a.t[a.p]=e,a=a._next},i._kill=function(t){var e,a=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=a.length;--e>-1;)null!=t[a[e]]&&a.splice(e,1);for(;i;)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},i._roundProps=function(t,e){for(var a=this._firstPT;a;)(t[this._propName]||null!=a.n&&t[a.n.split(this._propName+"_").join("")])&&(a.r=e),a=a._next},M._onPluginEvent=function(t,e){var a,i,s,o,r,n=e._firstPT;if("_onInitAllProps"===t){for(;n;){for(r=n._next,i=s;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:o=n,n=r}n=e._firstPT=s}for(;n;)n.pg&&"function"==typeof n.t[t]&&n.t[t]()&&(a=!0),n=n._next;return a},C.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===C.API&&(E[(new t[e])._propName]=t[e]);return!0},g.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,a=t.propName,i=t.priority||0,s=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},r=u("plugins."+a.charAt(0).toUpperCase()+a.substr(1)+"Plugin",(function(){C.call(this,a,i),this._overwriteProps=s||[]}),!0===t.global),n=r.prototype=new C(a);for(e in n.constructor=r,r.API=t.API,o)"function"==typeof t[e]&&(n[o[e]]=t[e]);return r.version=t.version,C.activate([r]),r},e=t._gsQueue){for(a=0;e.length>a;a++)e[a]();for(i in d)d[i].func||t.console.log("GSAP encountered missing dependency: com.greensock."+i)}o=!1}(window),function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){var t=this||e;return t._counter=1e3,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var a=this||e;if(t=parseFloat(t),a.ctx||h(),void 0!==t&&t>=0&&t<=1){if(a._volume=t,a._muted)return a;a.usingWebAudio&&(a.masterGain.gain.value=t);for(var i=0;i<a._howls.length;i++)if(!a._howls[i]._webAudio)for(var s=a._howls[i]._getSoundIds(),o=0;o<s.length;o++){var r=a._howls[i]._soundById(s[o]);r&&r._node&&(r._node.volume=r._volume*t)}return a}return a._volume},mute:function(t){var a=this||e;a.ctx||h(),a._muted=t,a.usingWebAudio&&(a.masterGain.gain.value=t?0:a._volume);for(var i=0;i<a._howls.length;i++)if(!a._howls[i]._webAudio)for(var s=a._howls[i]._getSoundIds(),o=0;o<s.length;o++){var r=a._howls[i]._soundById(s[o]);r&&r._node&&(r._node.muted=!!t||r._muted)}return a},unload:function(){for(var t=this||e,a=t._howls.length-1;a>=0;a--)t._howls[a].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,h()),t},codecs:function(t){return(this||e)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||e;if(t.state=t.ctx&&t.ctx.state||"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||e,a=null;try{a="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!a||"function"!=typeof a.canPlayType)return t;var i=a.canPlayType("audio/mpeg;").replace(/^no$/,""),s=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=s&&parseInt(s[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!i&&!a.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||e,a=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),i=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(a||i)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var s=function(){e._autoResume();var a=t.ctx.createBufferSource();a.buffer=t._scratchBuffer,a.connect(t.ctx.destination),void 0===a.start?a.noteOn(0):a.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),a.onended=function(){a.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchend",s,!0)}};return document.addEventListener("touchend",s,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&e.usingWebAudio){for(var a=0;a<t._howls.length;a++)if(t._howls[a]._webAudio)for(var i=0;i<t._howls[a]._sounds.length;i++)if(!t._howls[a]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then((function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())})))}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&e.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var e=new t,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var a=this;return e.ctx||h(),a._autoplay=t.autoplay||!1,a._format="string"!=typeof t.format?t.format:[t.format],a._html5=t.html5||!1,a._muted=t.mute||!1,a._loop=t.loop||!1,a._pool=t.pool||5,a._preload="boolean"!=typeof t.preload||t.preload,a._rate=t.rate||1,a._sprite=t.sprite||{},a._src="string"!=typeof t.src?t.src:[t.src],a._volume=void 0!==t.volume?t.volume:1,a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._onend=t.onend?[{fn:t.onend}]:[],a._onfade=t.onfade?[{fn:t.onfade}]:[],a._onload=t.onload?[{fn:t.onload}]:[],a._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],a._onpause=t.onpause?[{fn:t.onpause}]:[],a._onplay=t.onplay?[{fn:t.onplay}]:[],a._onstop=t.onstop?[{fn:t.onstop}]:[],a._onmute=t.onmute?[{fn:t.onmute}]:[],a._onvolume=t.onvolume?[{fn:t.onvolume}]:[],a._onrate=t.onrate?[{fn:t.onrate}]:[],a._onseek=t.onseek?[{fn:t.onseek}]:[],a._onresume=[],a._webAudio=e.usingWebAudio&&!a._html5,void 0!==e.ctx&&e.ctx&&e.mobileAutoEnable&&e._enableMobileAudio(),e._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a.load(),a},load:function(){var t=this,a=null;if(!e.noAudio){"string"==typeof t._src&&(t._src=[t._src]);for(var s=0;s<t._src.length;s++){var r,n;if(t._format&&t._format[s])r=t._format[s];else{if("string"!=typeof(n=t._src[s])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(n))||(r=/\.([^.]+)$/.exec(n.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&e.codecs(r)){a=t._src[s];break}}return a?(t._src=a,t._state="loading","https:"===window.location.protocol&&"http:"===a.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new i(t),t._webAudio&&o(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")}t._emit("loaderror",null,"No audio support.")},play:function(t,a){var i=this,s=null;if("number"==typeof t)s=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t){t="__default";for(var o=0,r=0;r<i._sounds.length;r++)i._sounds[r]._paused&&!i._sounds[r]._ended&&(o++,s=i._sounds[r]._id);1===o?t=null:s=null}}var n=s?i._soundById(s):i._inactiveSound();if(!n)return null;if(s&&!t&&(t=n._sprite||"__default"),"loaded"!==i._state){n._sprite=t,n._ended=!1;var l=n._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(s&&!n._paused)return a||setTimeout((function(){i._emit("play",n._id)}),0),n._id;i._webAudio&&e._autoResume();var h=Math.max(0,n._seek>0?n._seek:i._sprite[t][0]/1e3),m=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-h),d=1e3*m/Math.abs(n._rate);n._paused=!1,n._ended=!1,n._sprite=t,n._seek=h,n._start=i._sprite[t][0]/1e3,n._stop=(i._sprite[t][0]+i._sprite[t][1])/1e3,n._loop=!(!n._loop&&!i._sprite[t][2]);var c=n._node;if(i._webAudio){var g=function(){i._refreshBuffer(n);var t=n._muted||i._muted?0:n._volume;c.gain.setValueAtTime(t,e.ctx.currentTime),n._playStart=e.ctx.currentTime,void 0===c.bufferSource.start?n._loop?c.bufferSource.noteGrainOn(0,h,86400):c.bufferSource.noteGrainOn(0,h,m):n._loop?c.bufferSource.start(0,h,86400):c.bufferSource.start(0,h,m),d!==1/0&&(i._endTimers[n._id]=setTimeout(i._ended.bind(i,n),d)),a||setTimeout((function(){i._emit("play",n._id)}),0)},u="running"===e.state;if("loaded"===i._state&&u)g();else{var p=u||"loaded"!==i._state?"load":"resume";i.once(p,g,u?n._id:null),i._clearTimer(n._id)}}else{var v=function(){c.currentTime=h,c.muted=n._muted||i._muted||e._muted||c.muted,c.volume=n._volume*e.volume(),c.playbackRate=n._rate,c.play(),d!==1/0&&(i._endTimers[n._id]=setTimeout(i._ended.bind(i,n),d)),a||i._emit("play",n._id)},f="loaded"===i._state&&(window&&window.ejecta||!c.readyState&&e._navigator.isCocoonJS);if(4===c.readyState||f)v();else{var D=function(){v(),c.removeEventListener(e._canPlayEvent,D,!1)};c.addEventListener(e._canPlayEvent,D,!1),i._clearTimer(n._id)}}return n._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var a=e._getSoundIds(t),i=0;i<a.length;i++){e._clearTimer(a[i]);var s=e._soundById(a[i]);if(s&&!s._paused&&(s._seek=e.seek(a[i]),s._rateSeek=0,s._paused=!0,e._stopFade(a[i]),s._node))if(e._webAudio){if(!s._node.bufferSource)continue;void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),e._cleanBuffer(s._node)}else isNaN(s._node.duration)&&s._node.duration!==1/0||s._node.pause();arguments[1]||e._emit("pause",s?s._id:null)}return e},stop:function(t,e){var a=this;if("loaded"!==a._state)return a._queue.push({event:"stop",action:function(){a.stop(t)}}),a;for(var i=a._getSoundIds(t),s=0;s<i.length;s++){a._clearTimer(i[s]);var o=a._soundById(i[s]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,a._stopFade(i[s]),o._node&&(a._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),a._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),e||a._emit("stop",o._id))}return a},mute:function(t,a){var i=this;if("loaded"!==i._state)return i._queue.push({event:"mute",action:function(){i.mute(t,a)}}),i;if(void 0===a){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var s=i._getSoundIds(a),o=0;o<s.length;o++){var r=i._soundById(s[o]);r&&(r._muted=t,i._webAudio&&r._node?r._node.gain.setValueAtTime(t?0:r._volume,e.ctx.currentTime):r._node&&(r._node.muted=!!e._muted||t),i._emit("mute",r._id))}return i},volume:function(){var t,a,i,s=this,o=arguments;if(0===o.length)return s._volume;if(1===o.length||2===o.length&&void 0===o[1]?s._getSoundIds().indexOf(o[0])>=0?a=parseInt(o[0],10):t=parseFloat(o[0]):o.length>=2&&(t=parseFloat(o[0]),a=parseInt(o[1],10)),!(void 0!==t&&t>=0&&t<=1))return(i=a?s._soundById(a):s._sounds[0])?i._volume:0;if("loaded"!==s._state)return s._queue.push({event:"volume",action:function(){s.volume.apply(s,o)}}),s;void 0===a&&(s._volume=t),a=s._getSoundIds(a);for(var r=0;r<a.length;r++)(i=s._soundById(a[r]))&&(i._volume=t,o[2]||s._stopFade(a[r]),s._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,e.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*e.volume()),s._emit("volume",i._id));return s},fade:function(t,a,i,s){var o=this,r=Math.abs(t-a),n=t>a?"out":"in",l=r/.01,h=l>0?i/l:i;if(h<4&&(l=Math.ceil(l/(4/h)),h=4),"loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(t,a,i,s)}}),o;o.volume(t,s);for(var m=o._getSoundIds(s),d=0;d<m.length;d++){var c=o._soundById(m[d]);if(c){if(s||o._stopFade(m[d]),o._webAudio&&!c._muted){var g=e.ctx.currentTime,u=g+i/1e3;c._volume=t,c._node.gain.setValueAtTime(t,g),c._node.gain.linearRampToValueAtTime(a,u)}var p=t;c._interval=setInterval(function(e,i){l>0&&(p+="in"===n?.01:-.01),p=Math.max(0,p),p=Math.min(1,p),p=Math.round(100*p)/100,o._webAudio?(void 0===s&&(o._volume=p),i._volume=p):o.volume(p,e,!0),(a<t&&p<=a||a>t&&p>=a)&&(clearInterval(i._interval),i._interval=null,o.volume(a,e),o._emit("fade",e))}.bind(o,m[d],c),h)}}return o},_stopFade:function(t){var a=this,i=a._soundById(t);return i&&i._interval&&(a._webAudio&&i._node.gain.cancelScheduledValues(e.ctx.currentTime),clearInterval(i._interval),i._interval=null,a._emit("fade",t)),a},loop:function(){var t,e,a,i=this,s=arguments;if(0===s.length)return i._loop;if(1===s.length){if("boolean"!=typeof s[0])return!!(a=i._soundById(parseInt(s[0],10)))&&a._loop;t=s[0],i._loop=t}else 2===s.length&&(t=s[0],e=parseInt(s[1],10));for(var o=i._getSoundIds(e),r=0;r<o.length;r++)(a=i._soundById(o[r]))&&(a._loop=t,i._webAudio&&a._node&&a._node.bufferSource&&(a._node.bufferSource.loop=t,t&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop)));return i},rate:function(){var t,a,i,s=this,o=arguments;if(0===o.length)a=s._sounds[0]._id;else if(1===o.length){s._getSoundIds().indexOf(o[0])>=0?a=parseInt(o[0],10):t=parseFloat(o[0])}else 2===o.length&&(t=parseFloat(o[0]),a=parseInt(o[1],10));if("number"!=typeof t)return(i=s._soundById(a))?i._rate:s._rate;if("loaded"!==s._state)return s._queue.push({event:"rate",action:function(){s.rate.apply(s,o)}}),s;void 0===a&&(s._rate=t),a=s._getSoundIds(a);for(var r=0;r<a.length;r++)if(i=s._soundById(a[r])){i._rateSeek=s.seek(a[r]),i._playStart=s._webAudio?e.ctx.currentTime:i._playStart,i._rate=t,s._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.value=t:i._node&&(i._node.playbackRate=t);var n=s.seek(a[r]),l=1e3*((s._sprite[i._sprite][0]+s._sprite[i._sprite][1])/1e3-n)/Math.abs(i._rate);!s._endTimers[a[r]]&&i._paused||(s._clearTimer(a[r]),s._endTimers[a[r]]=setTimeout(s._ended.bind(s,i),l)),s._emit("rate",i._id)}return s},seek:function(){var t,a,i=this,s=arguments;if(0===s.length)a=i._sounds[0]._id;else if(1===s.length){i._getSoundIds().indexOf(s[0])>=0?a=parseInt(s[0],10):(a=i._sounds[0]._id,t=parseFloat(s[0]))}else 2===s.length&&(t=parseFloat(s[0]),a=parseInt(s[1],10));if(void 0===a)return i;if("loaded"!==i._state)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,s)}}),i;var o=i._soundById(a);if(o){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var r=i.playing(a)?e.ctx.currentTime-o._playStart:0,n=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(n+r*Math.abs(o._rate))}return o._node.currentTime}var l=i.playing(a);l&&i.pause(a,!0),o._seek=t,o._ended=!1,i._clearTimer(a),l&&i.play(a,!0),!i._webAudio&&o._node&&(o._node.currentTime=t),i._emit("seek",a)}return i},playing:function(t){var e=this;if("number"==typeof t){var a=e._soundById(t);return!!a&&!a._paused}for(var i=0;i<e._sounds.length;i++)if(!e._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this,a=e._duration,i=e._soundById(t);return i&&(a=e._sprite[i._sprite][1]/1e3),a},state:function(){return this._state},unload:function(){for(var t=this,a=t._sounds,i=0;i<a.length;i++){a[i]._paused||t.stop(a[i]._id),t._webAudio||(/MSIE |Trident\//.test(e._navigator&&e._navigator.userAgent)||(a[i]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),a[i]._node.removeEventListener("error",a[i]._errorFn,!1),a[i]._node.removeEventListener(e._canPlayEvent,a[i]._loadFn,!1)),delete a[i]._node,t._clearTimer(a[i]._id);var o=e._howls.indexOf(t);o>=0&&e._howls.splice(o,1)}var r=!0;for(i=0;i<e._howls.length;i++)if(e._howls[i]._src===t._src){r=!1;break}return s&&r&&delete s[t._src],e.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,a,i){var s=this["_on"+t];return"function"==typeof e&&s.push(i?{id:a,fn:e,once:i}:{id:a,fn:e}),this},off:function(t,e,a){var i=this,s=i["_on"+t],o=0;if("number"==typeof e&&(a=e,e=null),e||a)for(o=0;o<s.length;o++){var r=a===s[o].id;if(e===s[o].fn&&r||!e&&r){s.splice(o,1);break}}else if(t)i["_on"+t]=[];else{var n=Object.keys(i);for(o=0;o<n.length;o++)0===n[o].indexOf("_on")&&Array.isArray(i[n[o]])&&(i[n[o]]=[])}return i},once:function(t,e,a){return this.on(t,e,a,1),this},_emit:function(t,e,a){for(var i=this,s=i["_on"+t],o=s.length-1;o>=0;o--)s[o].id&&s[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,a)}.bind(i,s[o].fn),0),s[o].once&&i.off(t,s[o].fn,s[o].id));return i},_loadQueue:function(){var t=this;if(t._queue.length>0){var e=t._queue[0];t.once(e.event,(function(){t._queue.shift(),t._loadQueue()})),e.action()}return t},_ended:function(t){var a=this,i=t._sprite;if(!a._webAudio&&a._node&&!a._node.ended)return setTimeout(a._ended.bind(a,t),100),a;var s=!(!t._loop&&!a._sprite[i][2]);if(a._emit("end",t._id),!a._webAudio&&s&&a.stop(t._id,!0).play(t._id),a._webAudio&&s){a._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=e.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);a._endTimers[t._id]=setTimeout(a._ended.bind(a,t),o)}return a._webAudio&&!s&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,a._clearTimer(t._id),a._cleanBuffer(t._node),e._autoSuspend()),a._webAudio||s||a.stop(t._id),a},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,a=0;a<e._sounds.length;a++)if(t===e._sounds[a]._id)return e._sounds[a];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new i(t)},_drain:function(){var t=this,e=t._pool,a=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&a++;for(i=t._sounds.length-1;i>=0;i--){if(a<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),a--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],a=0;a<this._sounds.length;a++)e.push(this._sounds[a]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=e.ctx.createBufferSource(),t._node.bufferSource.buffer=s[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,this},_cleanBuffer:function(t){var e=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(t){}}return t.bufferSource=null,e}};var i=function(t){this._parent=t,this.init()};i.prototype={init:function(){var t=this,a=t._parent;return t._muted=a._muted,t._loop=a._loop,t._volume=a._volume,t._rate=a._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++e._counter,a._sounds.push(t),t.create(),t},create:function(){var t=this,a=t._parent,i=e._muted||t._muted||t._parent._muted?0:t._volume;return a._webAudio?(t._node=void 0===e.ctx.createGain?e.ctx.createGainNode():e.ctx.createGain(),t._node.gain.setValueAtTime(i,e.ctx.currentTime),t._node.paused=!0,t._node.connect(e.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(e._canPlayEvent,t._loadFn,!1),t._node.src=a._src,t._node.preload="auto",t._node.volume=i*e.volume(),t._node.load()),t},reset:function(){var t=this,a=t._parent;return t._muted=a._muted,t._loop=a._loop,t._volume=a._volume,t._rate=a._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++e._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,a=t._parent;a._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(a._sprite).length&&(a._sprite={__default:[0,1e3*a._duration]}),"loaded"!==a._state&&(a._state="loaded",a._emit("load"),a._loadQueue()),t._node.removeEventListener(e._canPlayEvent,t._loadFn,!1)}};var s={},o=function(t){var e=t._src;if(s[e])return t._duration=s[e].duration,void l(t);if(/^data:[^;]+;base64,/.test(e)){for(var a=atob(e.split(",")[1]),i=new Uint8Array(a.length),o=0;o<a.length;++o)i[o]=a.charCodeAt(o);n(i.buffer,t)}else{var h=new XMLHttpRequest;h.open("GET",e,!0),h.responseType="arraybuffer",h.onload=function(){var e=(h.status+"")[0];"0"===e||"2"===e||"3"===e?n(h.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+h.status+".")},h.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete s[e],t.load())},r(h)}},r=function(t){try{t.send()}catch(e){t.onerror()}},n=function(t,a){e.ctx.decodeAudioData(t,(function(t){t&&a._sounds.length>0&&(s[a._src]=t,l(a,t))}),(function(){a._emit("loaderror",null,"Decoding audio data failed.")}))},l=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},h=function(){try{"undefined"!=typeof AudioContext?e.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?e.ctx=new webkitAudioContext:e.usingWebAudio=!1}catch(t){e.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(e._navigator&&e._navigator.platform),a=e._navigator&&e._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=a?parseInt(a[1],10):null;if(t&&i&&i<9){var s=/safari/.test(e._navigator&&e._navigator.userAgent.toLowerCase());(e._navigator&&e._navigator.standalone&&!s||e._navigator&&!e._navigator.standalone&&!s)&&(e.usingWebAudio=!1)}e.usingWebAudio&&(e.masterGain=void 0===e.ctx.createGain?e.ctx.createGainNode():e.ctx.createGain(),e.masterGain.gain.value=e._muted?0:1,e.masterGain.connect(e.ctx.destination)),e._setup()};"function"==typeof define&&define.amd&&define([],(function(){return{Howler:e,Howl:a}})),"undefined"!=typeof exports&&(exports.Howler=e,exports.Howl=a),"undefined"!=typeof window?(window.HowlerGlobal=t,window.Howler=e,window.Howl=a,window.Sound=i):"undefined"!=typeof global&&(global.HowlerGlobal=t,global.Howler=e,global.Howl=a,global.Sound=i)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var a=e._howls.length-1;a>=0;a--)e._howls[a].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,a){var i=this;return i.ctx&&i.ctx.listener?(e="number"!=typeof e?i._pos[1]:e,a="number"!=typeof a?i._pos[2]:a,"number"!=typeof t?i._pos:(i._pos=[t,e,a],i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(t,e,a,i,s,o){var r=this;if(!r.ctx||!r.ctx.listener)return r;var n=r._orientation;return e="number"!=typeof e?n[1]:e,a="number"!=typeof a?n[2]:a,i="number"!=typeof i?n[3]:i,s="number"!=typeof s?n[4]:s,o="number"!=typeof o?n[5]:o,"number"!=typeof t?n:(r._orientation=[t,e,a,i,s,o],r.ctx.listener.setOrientation(t,e,a,i,s,o),r)},Howl.prototype.init=function(t){return function(e){var a=this;return a._orientation=e.orientation||[1,0,0],a._stereo=e.stereo||null,a._pos=e.pos||null,a._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},a._onstereo=e.onstereo?[{fn:e.onstereo}]:[],a._onpos=e.onpos?[{fn:e.onpos}]:[],a._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,a){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(e,a)}}),i;var s=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===a){if("number"!=typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0]}for(var o=i._getSoundIds(a),r=0;r<o.length;r++){var n=i._soundById(o[r]);if(n){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0],n._node&&(n._pannerAttr.panningModel="equalpower",n._panner&&n._panner.pan||t(n,s),"spatial"===s?n._panner.setPosition(e,0,0):n._panner.pan.value=e),i._emit("stereo",n._id)}}return i},Howl.prototype.pos=function(e,a,i,s){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(e,a,i,s)}}),o;if(a="number"!=typeof a?0:a,i="number"!=typeof i?-.5:i,void 0===s){if("number"!=typeof e)return o._pos;o._pos=[e,a,i]}for(var r=o._getSoundIds(s),n=0;n<r.length;n++){var l=o._soundById(r[n]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,a,i],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),l._panner.setPosition(e,a,i)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(e,a,i,s){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(e,a,i,s)}}),o;if(a="number"!=typeof a?o._orientation[1]:a,i="number"!=typeof i?o._orientation[2]:i,void 0===s){if("number"!=typeof e)return o._orientation;o._orientation=[e,a,i]}for(var r=o._getSoundIds(s),n=0;n<r.length;n++){var l=o._soundById(r[n]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,a,i],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),t(l,"spatial")),l._panner.setOrientation(e,a,i)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var e,a,i,s=this,o=arguments;if(!s._webAudio)return s;if(0===o.length)return s._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(i=s._soundById(parseInt(o[0],10)))?i._pannerAttr:s._pannerAttr;e=o[0],void 0===a&&(s._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s._coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s._coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s._distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s._maxDistance,panningModel:void 0!==e.panningModel?e.panningModel:s._panningModel,refDistance:void 0!==e.refDistance?e.refDistance:s._refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s._rolloffFactor})}else 2===o.length&&(e=o[0],a=parseInt(o[1],10));for(var r=s._getSoundIds(a),n=0;n<r.length;n++)if(i=s._soundById(r[n])){var l=i._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor};var h=i._panner;h?(h.coneInnerAngle=l.coneInnerAngle,h.coneOuterAngle=l.coneOuterAngle,h.coneOuterGain=l.coneOuterGain,h.distanceModel=l.distanceModel,h.maxDistance=l.maxDistance,h.panningModel=l.panningModel,h.refDistance=l.refDistance,h.rolloffFactor=l.rolloffFactor):(i._pos||(i._pos=s._pos||[0,0,-.5]),t(i,"spatial"))}return s},Sound.prototype.init=function(t){return function(){var e=this,a=e._parent;e._orientation=a._orientation,e._stereo=a._stereo,e._pos=a._pos,e._pannerAttr=a._pannerAttr,t.call(this),e._stereo?a.stereo(e._stereo):e._pos&&a.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,a=e._parent;return e._orientation=a._orientation,e._pos=a._pos,e._pannerAttr=a._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.value=t._stereo),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id)}}();var vis=function(){var t,e,a={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in a)if(t in document){e=a[t];break}return function(a){return a&&document.addEventListener(e,a),!document[t]}}();vis((function(){vis()?setTimeout((function(){visibleResume()}),300):visiblePause()}));var notIE=void 0===document.documentMode,isChromium=window.chrome;notIE&&!isChromium||(window.addEventListener?(window.addEventListener("focus",(function(t){setTimeout((function(){}),300)}),!1),window.addEventListener("blur",(function(t){visiblePause()}),!1)):(window.attachEvent("focus",(function(t){setTimeout((function(){}),300)})),window.attachEvent("blur",(function(t){visiblePause()}))));var offsetButtons={x:-35,y:20},skipTitle=window.famobi.hasFeature("skip_title"),skipTutorial=window.famobi.hasFeature("skip_tutorial"),externalStart=window.famobi.hasFeature("external_start"),externalMute=window.famobi.hasFeature("external_mute"),externalPause=window.famobi.hasFeature("external_pause"),showCrossPromo=!window.famobi.hasFeature("standalone")&&!skipTitle&&window.famobi.getAppLink(),forcedMode=window.famobi.hasFeature("forced_mode"),masterVolume=window.famobi.getVolume(),forcedModeProperties={state:{},override:{}};window.famobi.onRequest("changeVolume",(function(t){masterVolume=t,muted||(sound._volume=masterVolume,"game"==gameState?music.volume(.5*masterVolume):music.volume(.25*masterVolume))})),window.famobi.paused=famobi.hasFeature("external_start"),window.famobi.gameStarted=!famobi.hasFeature("external_start"),window.famobi.onRequest("pauseGameplay",(function(){window.famobi.paused=!0})),window.famobi.onRequest("resumeGameplay",(function(){window.famobi.gameStarted&&(window.famobi.paused=!1)})),window.famobi.onRequest("enableAudio",(function(){muted&&toggleMute()})),window.famobi.onRequest("disableAudio",(function(){muted||toggleMute()})),window.famobi.onRequest("startGame",(function(){window.famobi.gameStarted||(window.famobi.paused=!1,window.famobi.gameStarted=!0,skipTitle&&window.famobi_game&&window.famobi_game.startLevel&&window.famobi_game.startLevel())})),window.famobi.onRequest("restartGame",(function(){window.famobi_game.startGame(!0)}));var lastUnlockedLevel=0,currentWind=0;!function(t){var e=function(){function t(t,e,a,i,s,o){void 0===o&&(o=!0),this.oAssetData={},this.assetsLoaded=0,this.textData={},this.spinnerRot=0,this.totalAssets=e.length,this.showBar=o;for(var r=0;r<e.length;r++)-1!=e[r].file.indexOf(".json")?this.loadJSON(e[r]):this.loadImage(e[r]);o&&(this.oLoaderImgData=preAssetLib.getData("loader"),this.oLoadSpinnerImgData=preAssetLib.getData("loadSpinner"))}return t.prototype.render=function(){ctx.fillStyle="rgba(0, 0, 0, 1)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#FFFFFF",ctx.fillRect(canvas.width/2-150,canvas.height/2+20,300/this.totalAssets*this.assetsLoaded,30),ctx.drawImage(this.oLoaderImgData.img,canvas.width/2-this.oLoaderImgData.img.width/2,canvas.height/2-this.oLoaderImgData.img.height/2),this.spinnerRot+=3*delta,ctx.save(),ctx.translate(canvas.width/2-30,canvas.height/2-16),ctx.rotate(this.spinnerRot),ctx.drawImage(this.oLoadSpinnerImgData.img,-this.oLoadSpinnerImgData.img.width/2,-this.oLoadSpinnerImgData.img.height/2),ctx.restore(),this.displayNumbers()},t.prototype.displayNumbers=function(){ctx.textAlign="left",ctx.font="bold 40px arial",ctx.fillStyle="#ffffff",ctx.fillText(Math.round(this.assetsLoaded/this.totalAssets*100)+"%",canvas.width/2+0,canvas.height/2-1)},t.prototype.loadExtraAssets=function(t,e){this.showBar=!1,this.totalAssets=e.length,this.assetsLoaded=0,this.loadedCallback=t;for(var a=0;a<e.length;a++)-1!=e[a].file.indexOf(".json")?this.loadJSON(e[a]):this.loadImage(e[a])},t.prototype.loadJSON=function(t){var e=this,a=new XMLHttpRequest;a.open("GET",t.file,!0),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(e.textData[t.id]=JSON.parse(a.responseText),++e.assetsLoaded,e.checkLoadComplete())},a.send(null)},t.prototype.loadImage=function(t){var e=this,a=new Image;a.onload=function(){e.oAssetData[t.id]={},e.oAssetData[t.id].img=a,e.oAssetData[t.id].oData={};var i=e.getSpriteSize(t.file);0!=i[0]?(e.oAssetData[t.id].oData.spriteWidth=i[0],e.oAssetData[t.id].oData.spriteHeight=i[1]):(e.oAssetData[t.id].oData.spriteWidth=e.oAssetData[t.id].img.width,e.oAssetData[t.id].oData.spriteHeight=e.oAssetData[t.id].img.height),t.oAnims&&(e.oAssetData[t.id].oData.oAnims=t.oAnims),t.oAtlasData?e.oAssetData[t.id].oData.oAtlasData=t.oAtlasData:e.oAssetData[t.id].oData.oAtlasData={none:{x:0,y:0,width:e.oAssetData[t.id].oData.spriteWidth,height:e.oAssetData[t.id].oData.spriteHeight}},++e.assetsLoaded,e.checkLoadComplete()},a.src=t.file},t.prototype.getSpriteSize=function(t){for(var e=new Array,a="",i="",s=0,o=t.lastIndexOf("."),r=!0;r;)o--,0==s&&this.isNumber(t.charAt(o))?a=t.charAt(o)+a:0==s&&a.length>0&&"x"==t.charAt(o)?(o--,s=1,i=t.charAt(o)+i):1==s&&this.isNumber(t.charAt(o))?i=t.charAt(o)+i:1==s&&i.length>0&&"_"==t.charAt(o)?(r=!1,e=[parseInt(i),parseInt(a)]):(r=!1,e=[0,0]);return e},t.prototype.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.prototype.checkLoadComplete=function(){this.totalAssets>10&&window.famobi.setPreloadProgress(Math.round(this.assetsLoaded/this.totalAssets*100)),this.assetsLoaded==this.totalAssets&&this.loadedCallback()},t.prototype.onReady=function(t){this.loadedCallback=t},t.prototype.getImg=function(t){return this.oAssetData[t].img},t.prototype.getData=function(t){return this.oAssetData[t]},t}();t.AssetLoader=e}(Utils||(Utils={})),function(t){var e=function(){function t(t,e,a,i){this.x=0,this.y=0,this.rotation=0,this.radius=10,this.removeMe=!1,this.frameInc=0,this.animType="loop",this.offsetX=0,this.offsetY=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.oImgData=t,this.oAnims=this.oImgData.oData.oAnims,this.fps=e,this.radius=a,this.animId=i,this.centreX=Math.round(this.oImgData.oData.spriteWidth/2),this.centreY=Math.round(this.oImgData.oData.spriteHeight/2)}return t.prototype.updateAnimation=function(t){this.frameInc+=this.fps*t},t.prototype.changeImgData=function(t,e){this.oImgData=t,this.oAnims=this.oImgData.oData.oAnims,this.animId=e,this.centreX=Math.round(this.oImgData.oData.spriteWidth/2),this.centreY=Math.round(this.oImgData.oData.spriteHeight/2),this.resetAnim()},t.prototype.resetAnim=function(){this.frameInc=0},t.prototype.setFrame=function(t){this.fixedFrame=t},t.prototype.setAnimType=function(t,e,a){switch(void 0===a&&(a=!0),this.animId=e,this.animType=t,a&&this.resetAnim(),t){case"loop":break;case"once":this.maxIdx=this.oAnims[this.animId].length-1}},t.prototype.render=function(t){if(t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY),t.globalAlpha=this.alpha,null!=this.animId){var e=this.oAnims[this.animId].length,a=Math.floor(this.frameInc);this.curFrame=this.oAnims[this.animId][a%e];var i=this.curFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.curFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;if("once"==this.animType&&a>this.maxIdx){this.fixedFrame=this.oAnims[this.animId][e-1],this.animId=null,null!=this.animEndedFunc&&this.animEndedFunc();i=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight}}else i=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;t.drawImage(this.oImgData.img,i,s,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,-this.centreX+this.offsetX,-this.centreY+this.offsetY,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight),t.restore()},t.prototype.renderSimple=function(t){if(null!=this.animId){var e=this.oAnims[this.animId].length,a=Math.floor(this.frameInc);this.curFrame=this.oAnims[this.animId][a%e];var i=this.curFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.curFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;if("once"==this.animType&&a>this.maxIdx){this.fixedFrame=this.oAnims[this.animId][e-1],this.animId=null,null!=this.animEndedFunc&&this.animEndedFunc();i=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight}}else i=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;t.drawImage(this.oImgData.img,i,s,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,this.x-(this.centreX-this.offsetX)*this.scaleX,this.y-(this.centreY-this.offsetY)*this.scaleY,this.oImgData.oData.spriteWidth*this.scaleX,this.oImgData.oData.spriteHeight*this.scaleY)},t}();t.AnimSprite=e}(Utils||(Utils={})),function(t){var e=function(){function t(t,e,a){void 0===a&&(a=0),this.x=0,this.y=0,this.rotation=0,this.radius=10,this.removeMe=!1,this.offsetX=0,this.offsetY=0,this.scaleX=1,this.scaleY=1,this.oImgData=t,this.radius=e,this.setFrame(a)}return t.prototype.setFrame=function(t){this.frameNum=t},t.prototype.render=function(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY);var e=this.frameNum*this.oImgData.oData.spriteWidth%this.oImgData.img.width,a=Math.floor(this.frameNum/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;t.drawImage(this.oImgData.img,e,a,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,-this.oImgData.oData.spriteWidth/2+this.offsetX,-this.oImgData.oData.spriteHeight/2+this.offsetY,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight),t.restore()},t}();t.BasicSprite=e}(Utils||(Utils={})),function(t){var e=function(){function t(t,e){var a=this;this.prevHitTime=0,this.pauseIsOn=!1,this.isDown=!1,this.chromeMusicState=!0,this.isBugBrowser=e,this.keyDownEvtFunc=function(t){a.keyDown(t)},this.keyUpEvtFunc=function(t){a.keyUp(t)},t.addEventListener("touchstart",(function(t){for(var e=0;e<t.changedTouches.length;e++)a.hitDown(t,t.changedTouches[e].pageX,t.changedTouches[e].pageY,t.changedTouches[e].identifier)}),!1),t.addEventListener("touchend",(function(t){for(var e=0;e<t.changedTouches.length;e++)a.hitUp(t,t.changedTouches[e].pageX,t.changedTouches[e].pageY,t.changedTouches[e].identifier)}),!1),t.addEventListener("touchcancel",(function(t){for(var e=0;e<t.changedTouches.length;e++)a.hitCancel(t,t.changedTouches[e].pageX,t.changedTouches[e].pageY,t.changedTouches[e].identifier)}),!1),t.addEventListener("touchmove",(function(t){for(var e=0;e<t.changedTouches.length;e++)a.move(t,t.changedTouches[e].pageX,t.changedTouches[e].pageY,t.changedTouches[e].identifier,!0)}),!1),t.addEventListener("mousedown",(function(t){a.isDown=!0,a.hitDown(t,t.pageX,t.pageY,1)}),!1),t.addEventListener("mouseup",(function(t){a.isDown=!1,a.hitUp(t,t.pageX,t.pageY,1)}),!1),t.addEventListener("mousemove",(function(t){a.move(t,t.pageX,t.pageY,1,a.isDown)}),!1),t.addEventListener("mouseout",(function(t){a.isDown=!1,a.hitUp(t,Math.abs(t.pageX),Math.abs(t.pageY),1)}),!1),this.aHitAreas=new Array,this.aKeys=new Array}return t.prototype.hitDown=function(t,e,a,i){if(t.preventDefault(),t.stopPropagation(),hasFocus||visibleResume(),this.chromeMusicState&&(music.pause(),music.play(),this.chromeMusicState=!1),!this.pauseIsOn){var s=(new Date).getTime();e*=canvasScale,a*=canvasScale;for(var o=0;o<this.aHitAreas.length;o++)if(this.aHitAreas[o].rect){var r=canvas.width*this.aHitAreas[o].align[0],n=canvas.height*this.aHitAreas[o].align[1];if(e>r+this.aHitAreas[o].area[0]&&a>n+this.aHitAreas[o].area[1]&&e<r+this.aHitAreas[o].area[2]&&a<n+this.aHitAreas[o].area[3]){if(this.aHitAreas[o].aTouchIdentifiers.push(i),this.aHitAreas[o].oData.hasLeft=!1,!this.aHitAreas[o].oData.isDown){if(this.aHitAreas[o].oData.isDown=!0,this.aHitAreas[o].oData.isBeingDragged=!1,this.aHitAreas[o].oData.x=e,this.aHitAreas[o].oData.y=a,s-this.prevHitTime<500&&("game"!=gameState||"pause"==this.aHitAreas[o].id)&&isBugBrowser)return;this.aHitAreas[o].callback(this.aHitAreas[o].id,this.aHitAreas[o].oData)}break}}this.prevHitTime=s}},t.prototype.hitUp=function(t,e,a,i){if(ios9FirstTouch||(playSound("silence"),ios9FirstTouch=!0),!this.pauseIsOn){t.preventDefault(),t.stopPropagation(),e*=canvasScale,a*=canvasScale;for(var s=0;s<this.aHitAreas.length;s++)if(this.aHitAreas[s].rect){var o=canvas.width*this.aHitAreas[s].align[0],r=canvas.height*this.aHitAreas[s].align[1];if(e>o+this.aHitAreas[s].area[0]&&a>r+this.aHitAreas[s].area[1]&&e<o+this.aHitAreas[s].area[2]&&a<r+this.aHitAreas[s].area[3]){for(var n=0;n<this.aHitAreas[s].aTouchIdentifiers.length;n++)this.aHitAreas[s].aTouchIdentifiers[n]==i&&(this.aHitAreas[s].aTouchIdentifiers.splice(n,1),n-=1);0==this.aHitAreas[s].aTouchIdentifiers.length&&(this.aHitAreas[s].oData.isDown=!1,this.aHitAreas[s].oData.multiTouch&&(this.aHitAreas[s].oData.x=e,this.aHitAreas[s].oData.y=a,this.aHitAreas[s].callback(this.aHitAreas[s].id,this.aHitAreas[s].oData)));break}}}},t.prototype.hitCancel=function(t,e,a,i){t.preventDefault(),t.stopPropagation(),e*=canvasScale,a*=canvasScale;for(var s=0;s<this.aHitAreas.length;s++)this.aHitAreas[s].oData.isDown&&(this.aHitAreas[s].oData.isDown=!1,this.aHitAreas[s].aTouchIdentifiers=new Array,this.aHitAreas[s].oData.multiTouch&&(this.aHitAreas[s].oData.x=e,this.aHitAreas[s].oData.y=a,this.aHitAreas[s].callback(this.aHitAreas[s].id,this.aHitAreas[s].oData)))},t.prototype.move=function(t,e,a,i,s){if(!this.pauseIsOn&&s){e*=canvasScale,a*=canvasScale;for(var o=0;o<this.aHitAreas.length;o++)if(this.aHitAreas[o].rect){var r=canvas.width*this.aHitAreas[o].align[0],n=canvas.height*this.aHitAreas[o].align[1];if(e>r+this.aHitAreas[o].area[0]&&a>n+this.aHitAreas[o].area[1]&&e<r+this.aHitAreas[o].area[2]&&a<n+this.aHitAreas[o].area[3])this.aHitAreas[o].oData.hasLeft=!1,this.aHitAreas[o].oData.isDraggable&&!this.aHitAreas[o].oData.isDown&&(this.aHitAreas[o].oData.isDown=!0,this.aHitAreas[o].oData.x=e,this.aHitAreas[o].oData.y=a,this.aHitAreas[o].aTouchIdentifiers.push(i),this.aHitAreas[o].oData.multiTouch&&this.aHitAreas[o].callback(this.aHitAreas[o].id,this.aHitAreas[o].oData)),this.aHitAreas[o].oData.isDraggable&&(this.aHitAreas[o].oData.isBeingDragged=!0,this.aHitAreas[o].oData.x=e,this.aHitAreas[o].oData.y=a,this.aHitAreas[o].callback(this.aHitAreas[o].id,this.aHitAreas[o].oData),this.aHitAreas[o]&&(this.aHitAreas[o].oData.isBeingDragged=!1));else if(this.aHitAreas[o].oData.isDown&&!this.aHitAreas[o].oData.hasLeft){for(var l=0;l<this.aHitAreas[o].aTouchIdentifiers.length;l++)this.aHitAreas[o].aTouchIdentifiers[l]==i&&(this.aHitAreas[o].aTouchIdentifiers.splice(l,1),l-=1);0==this.aHitAreas[o].aTouchIdentifiers.length&&(this.aHitAreas[o].oData.hasLeft=!0,this.aHitAreas[o].oData.isBeingDragged||(this.aHitAreas[o].oData.isDown=!1),this.aHitAreas[o].oData.multiTouch&&this.aHitAreas[o].callback(this.aHitAreas[o].id,this.aHitAreas[o].oData))}}}},t.prototype.keyDown=function(t){for(var e=0;e<this.aKeys.length;e++)t.keyCode==this.aKeys[e].keyCode&&(t.preventDefault(),this.aKeys[e].oData.isDown=!0,this.aKeys[e].callback(this.aKeys[e].id,this.aKeys[e].oData))},t.prototype.keyUp=function(t){for(var e=0;e<this.aKeys.length;e++)t.keyCode==this.aKeys[e].keyCode&&(t.preventDefault(),this.aKeys[e].oData.isDown=!1,this.aKeys[e].callback(this.aKeys[e].id,this.aKeys[e].oData))},t.prototype.checkKeyFocus=function(){window.focus(),this.aKeys.length>0&&(window.removeEventListener("keydown",this.keyDownEvtFunc,!1),window.removeEventListener("keyup",this.keyUpEvtFunc,!1),window.addEventListener("keydown",this.keyDownEvtFunc,!1),window.addEventListener("keyup",this.keyUpEvtFunc,!1))},t.prototype.addKey=function(t,e,a,i){null==a&&(a=new Object),this.aKeys.push({id:t,callback:e,oData:a,keyCode:i}),this.checkKeyFocus()},t.prototype.removeKey=function(t){for(var e=0;e<this.aKeys.length;e++)this.aKeys[e].id==t&&(this.aKeys.splice(e,1),e-=1)},t.prototype.addHitArea=function(t,e,a,i,s,o){void 0===o&&(o=!1),null==a&&(a=new Object),o&&this.removeHitArea(t),s.scale||(s.scale=1),s.align||(s.align=[0,0]);var r=new Array;switch(i){case"image":var n;n=new Array(s.aPos[0]-s.oImgData.oData.oAtlasData[s.id].width/2*s.scale,s.aPos[1]-s.oImgData.oData.oAtlasData[s.id].height/2*s.scale,s.aPos[0]+s.oImgData.oData.oAtlasData[s.id].width/2*s.scale,s.aPos[1]+s.oImgData.oData.oAtlasData[s.id].height/2*s.scale),this.aHitAreas.push({id:t,aTouchIdentifiers:r,callback:e,oData:a,rect:!0,area:n,align:s.align});break;case"rect":this.aHitAreas.push({id:t,aTouchIdentifiers:r,callback:e,oData:a,rect:!0,area:s.aRect,align:s.align})}},t.prototype.removeHitArea=function(t){for(var e=0;e<this.aHitAreas.length;e++)this.aHitAreas[e].id==t&&(this.aHitAreas.splice(e,1),e-=1)},t.prototype.resetAll=function(){for(var t=0;t<this.aHitAreas.length;t++)this.aHitAreas[t].oData.isDown=!1,this.aHitAreas[t].oData.isBeingDragged=!1,this.aHitAreas[t].aTouchIdentifiers=new Array;this.isDown=!1},t}();t.UserInput=e}(Utils||(Utils={})),function(t){var e=function(){function t(t){this.updateFreq=10,this.updateInc=0,this.frameAverage=0,this.display=1,this.log="",this.render=function(t){this.frameAverage+=this.delta/this.updateFreq,++this.updateInc>=this.updateFreq&&(this.updateInc=0,this.display=this.frameAverage,this.frameAverage=0),t.textAlign="left",ctx.font="10px Helvetica",t.fillStyle="#333333",t.beginPath(),t.rect(0,this.canvasHeight-15,40,15),t.closePath(),t.fill(),t.fillStyle="#ffffff",t.fillText(Math.round(1e3/(1e3*this.display))+" fps "+this.log,5,this.canvasHeight-5)},this.canvasHeight=t}return t.prototype.update=function(t){this.delta=t},t}();t.FpsMeter=e}(Utils||(Utils={})),function(t){var e=function(){function t(){this.x=0,this.y=0,this.targY=0,this.incY=0,this.renderState=null,this.oImgData=assetLib.getData("background")}return t.prototype.render=function(){canvas.width>canvas.height?ctx.drawImage(this.oImgData.img,0,(1-canvas.height/canvas.width)/2*this.oImgData.img.height,this.oImgData.img.width,canvas.height/canvas.width*this.oImgData.img.height,0,0,canvas.width,canvas.height):ctx.drawImage(this.oImgData.img,(1-canvas.width/canvas.height)/2*this.oImgData.img.width,0,canvas.width/canvas.height*this.oImgData.img.width,this.oImgData.img.width,0,0,canvas.width,canvas.height)},t}();t.Background=e}(Elements||(Elements={})),function(t){var e=function(){function t(t,e){this.timer=.3,this.endTime=0,this.posY=0,this.largeNumberSpace=41,this.incY=0,this.flareRot=0,this.levelNumberSpace=20,this.oSplashLogoImgData=assetLib.getData("splashLogo"),this.oUiElementsImgData=assetLib.getData(window.famobi.hasFeature("leaderboard")?"uiElements":"uiElements2"),this.oGreenNumbersImgData=assetLib.getData("numbersGreen"),this.oBlueNumbersImgData=assetLib.getData("numbersBlue"),this.oRedNumbersImgData=assetLib.getData("numbersRed"),this.oLevelNumbersImgData=assetLib.getData("numbersLevel"),this.oMapImgData=assetLib.getData("map"),this.panelType=t,this.aButs=e,this.oTopFlareImgData=assetLib.getData("flare")}return t.prototype.update=function(){this.incY+=10*delta},t.prototype.startTween1=function(){this.posY=500,TweenLite.to(this,.5,{posY:0,ease:"Cubic.easeOut"})},t.prototype.tweenFinger=function(){var t=saveDataHandler.getLastUnlockedLevel();this.fingerArc=0,this.fingerX=aLevelData[t-1].mapX,this.fingerY=aLevelData[t-1].mapY,TweenLite.to(this,1,{fingerX:aLevelData[t].mapX,fingerY:aLevelData[t].mapY,fingerArc:-180*radian,ease:"Quad.easeInOut",onComplete:function(){levelNum++,initLevelPreview()}})},t.prototype.switchBut=function(t,e,a,i){void 0===a&&(a=null),void 0===i&&(i=null);for(var s=null,o=0;o<this.aButs.length;o++)if(this.aButs[o].id==t){this.aButs[o].id=e,s=this.aButs[o],a&&(this.aButs[o].aPos=a),i&&(this.aButs[o].align=i);break}return s},t.prototype.render=function(t){switch(void 0===t&&(t=!0),t||this.addButs(ctx),this.panelType){case"splash":ctx.fillStyle="rgba(0,0,0,.35)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.drawImage(this.oSplashLogoImgData.img,canvas.width/2-this.oSplashLogoImgData.img.width/2,canvas.height/2-this.oSplashLogoImgData.img.height/2-this.posY);break;case"start":this.flareRot+=delta/3,ctx.save(),ctx.translate(canvas.width/2+this.posY+90,.7*canvas.height),ctx.scale(.6,.5),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.translate(-(canvas.width/2+this.posY+90),-.7*canvas.height),ctx.translate(canvas.width/2+this.posY+90,.7*canvas.height),ctx.rotate(2*-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.translate(canvas.width/2+this.posY-90,.7*canvas.height),ctx.scale(.6,.5),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.translate(-(canvas.width/2+this.posY-90),-.7*canvas.height),ctx.translate(canvas.width/2+this.posY-90,.7*canvas.height),ctx.rotate(2*-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore();var e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.titleLogo].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.titleLogo].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.titleLogo].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.titleLogo].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY-10,.25*canvas.height-s/2,i,s);var o=saveDataHandler.oHighscoreData.stats.ever.highscore.toString(),r=.5;e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.miniCup].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.miniCup].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.miniCup].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.miniCup].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i-o.length/2*(this.largeNumberSpace*r)+103+this.posY,.7*canvas.height+70,i,s);for(var n=0;n<o.length;n++){var l=(f=parseFloat(o.charAt(n)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,h=Math.floor(f/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-o.length/2*(this.largeNumberSpace*r)+101+this.posY,.7*canvas.height+75,this.oRedNumbersImgData.oData.spriteWidth*r,this.oRedNumbersImgData.oData.spriteHeight*r)}o=saveDataHandler.getTotalScore().toString(),r=.5,e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.miniCup].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.miniCup].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.miniCup].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.miniCup].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i-o.length/2*(this.largeNumberSpace*r)-75+this.posY,.7*canvas.height+70,i,s);for(n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,h=Math.floor(f/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-o.length/2*(this.largeNumberSpace*r)-77+this.posY,.7*canvas.height+75,this.oRedNumbersImgData.oData.spriteWidth*r,this.oRedNumbersImgData.oData.spriteHeight*r)}break;case"credits":ctx.fillStyle="rgba(0, 0, 0, 0.35)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.drawImage(this.oSplashLogoImgData.img,canvas.width/2-this.oSplashLogoImgData.img.width/2,canvas.height/2-this.oSplashLogoImgData.img.height/2-this.posY);break;case"map":if(mapPosRealY-=8*(mapPosRealY-mapPosY)*delta,mapPosRealX-=8*(mapPosRealX-mapPosX)*delta,ctx.drawImage(this.oMapImgData.img,mapPosRealX,mapPosRealY,Math.min(this.oMapImgData.img.width,canvas.width),Math.min(this.oMapImgData.img.height,canvas.height),0,0,canvas.width*mapScale,canvas.height*mapScale),-1!=(D=saveDataHandler.getLastUnlockedLevel())){this.flareRot+=delta/3;aLevelData[D].y<200&&80,ctx.save(),ctx.translate((aLevelData[D].mapX-mapPosRealX)*mapScale,(aLevelData[D].mapY-mapPosRealY)*mapScale),ctx.scale(.5,.5),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.translate((aLevelData[D].mapX-mapPosRealX)*mapScale,(aLevelData[D].mapY-mapPosRealY)*mapScale),ctx.scale(.5,.5),ctx.rotate(-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore()}if(this.displayMapIcons(),-1!=D){e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fingerPoint].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fingerPoint].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fingerPoint].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fingerPoint].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,(aLevelData[D].mapX-i/2-mapPosRealX+4)*mapScale,(aLevelData[D].mapY-s/2-mapPosRealY-100+10*Math.sin(this.incY))*mapScale,i*mapScale,s*mapScale)}this.displayScore();break;case"levelPreview":ctx.drawImage(this.oMapImgData.img,mapPosRealX,mapPosRealY,Math.min(this.oMapImgData.img.width,canvas.width),Math.min(this.oMapImgData.img.height,canvas.height),0,0,canvas.width*mapScale,canvas.height*mapScale),this.displayMapIcons(),ctx.fillStyle="rgba(0, 0, 0, 0.5)",ctx.fillRect(0,0,canvas.width,canvas.height);e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.bluePanel].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.bluePanel].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.bluePanel].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.bluePanel].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY,canvas.height/2-s/2,i,s);e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.quiver].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.quiver].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.quiver].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.quiver].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY,canvas.height/2-s/2-110,i,s);for(o=aLevelData[levelNum].quiver.toString(),r=.7,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY+1,canvas.height/2-132,this.oRedNumbersImgData.oData.spriteWidth*r,this.oRedNumbersImgData.oData.spriteHeight*r)}for(var m=0;m<3;m++){var d=oImageIds["scoreTarget"+m];"balloons"==aLevelData[levelNum].misc.id&&(d=oImageIds["balloonTarget"+m]);e=this.oUiElementsImgData.oData.oAtlasData[d].x,a=this.oUiElementsImgData.oData.oAtlasData[d].y,i=this.oUiElementsImgData.oData.oAtlasData[d].width,s=this.oUiElementsImgData.oData.oAtlasData[d].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY-113+115*m,canvas.height/2-s+112,i,s);for(o=aLevelData[levelNum].aScoreTargs[m].toString(),r=.85,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oBlueNumbersImgData.oData.spriteWidth%this.oBlueNumbersImgData.img.width,h=Math.floor(f/(this.oBlueNumbersImgData.img.width/this.oBlueNumbersImgData.oData.spriteWidth))*this.oBlueNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oBlueNumbersImgData.img,l,h,this.oBlueNumbersImgData.oData.spriteWidth,this.oBlueNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-o.length/2*(this.largeNumberSpace*r)-118+115*m,canvas.height/2+42,this.oBlueNumbersImgData.oData.spriteWidth*r,this.oBlueNumbersImgData.oData.spriteHeight*r)}}for(o=(levelNum+1).toString();o.length<2;)o="0"+o;for(r=1,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oLevelNumbersImgData.oData.spriteWidth%this.oLevelNumbersImgData.img.width,h=Math.floor(f/(this.oLevelNumbersImgData.img.width/this.oLevelNumbersImgData.oData.spriteWidth))*this.oLevelNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oLevelNumbersImgData.img,l,h,this.oLevelNumbersImgData.oData.spriteWidth,this.oLevelNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.levelNumberSpace*r)-this.posY-201,canvas.height/2-154,this.oLevelNumbersImgData.oData.spriteWidth*r,this.oLevelNumbersImgData.oData.spriteHeight*r)}this.flareRot+=delta/3,ctx.save(),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.scale(.5,.3),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.scale(.5,.3),ctx.rotate(-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore();break;case"levelSuccess":ctx.drawImage(this.oMapImgData.img,mapPosRealX,mapPosRealY,Math.min(this.oMapImgData.img.width,canvas.width),Math.min(this.oMapImgData.img.height,canvas.height),0,0,canvas.width*mapScale,canvas.height*mapScale),this.displayMapIcons(),ctx.fillStyle="rgba(0, 0, 0, 0.5)",ctx.fillRect(0,0,canvas.width,canvas.height);e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.bluePanel].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.bluePanel].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.bluePanel].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.bluePanel].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY,canvas.height/2-s/2,i,s);e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.scoreBgWin].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.scoreBgWin].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.scoreBgWin].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.scoreBgWin].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY,canvas.height/2-s/2-115,i,s);for(o=levelScore.toString(),r=.85,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oBlueNumbersImgData.oData.spriteWidth%this.oBlueNumbersImgData.img.width,h=Math.floor(f/(this.oBlueNumbersImgData.img.width/this.oBlueNumbersImgData.oData.spriteWidth))*this.oBlueNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oBlueNumbersImgData.img,l,h,this.oBlueNumbersImgData.oData.spriteWidth,this.oBlueNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-o.length/2*(this.largeNumberSpace*r),canvas.height/2-139,this.oBlueNumbersImgData.oData.spriteWidth*r,this.oBlueNumbersImgData.oData.spriteHeight*r)}for(m=0;m<3;m++){ctx.save(),0==m?levelScore>=aLevelData[levelNum].aScoreTargs[0]&&levelScore<aLevelData[levelNum].aScoreTargs[1]?ctx.globalAlpha=1:ctx.globalAlpha=.4:1==m?levelScore>=aLevelData[levelNum].aScoreTargs[1]&&levelScore<aLevelData[levelNum].aScoreTargs[2]?ctx.globalAlpha=1:ctx.globalAlpha=.4:2==m&&(levelScore>=aLevelData[levelNum].aScoreTargs[2]?ctx.globalAlpha=1:ctx.globalAlpha=.4);d=oImageIds["scoreTarget"+m];"balloons"==aLevelData[levelNum].misc.id&&(d=oImageIds["balloonTarget"+m]);e=this.oUiElementsImgData.oData.oAtlasData[d].x,a=this.oUiElementsImgData.oData.oAtlasData[d].y,i=this.oUiElementsImgData.oData.oAtlasData[d].width,s=this.oUiElementsImgData.oData.oAtlasData[d].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY-113+115*m,canvas.height/2-s+112,i,s);for(o=aLevelData[levelNum].aScoreTargs[m].toString(),r=.85,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oBlueNumbersImgData.oData.spriteWidth%this.oBlueNumbersImgData.img.width,h=Math.floor(f/(this.oBlueNumbersImgData.img.width/this.oBlueNumbersImgData.oData.spriteWidth))*this.oBlueNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oBlueNumbersImgData.img,l,h,this.oBlueNumbersImgData.oData.spriteWidth,this.oBlueNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-o.length/2*(this.largeNumberSpace*r)-118+115*m,canvas.height/2+42,this.oBlueNumbersImgData.oData.spriteWidth*r,this.oBlueNumbersImgData.oData.spriteHeight*r)}ctx.restore()}for(o=(levelNum+1).toString();o.length<2;)o="0"+o;for(r=1,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oLevelNumbersImgData.oData.spriteWidth%this.oLevelNumbersImgData.img.width,h=Math.floor(f/(this.oLevelNumbersImgData.img.width/this.oLevelNumbersImgData.oData.spriteWidth))*this.oLevelNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oLevelNumbersImgData.img,l,h,this.oLevelNumbersImgData.oData.spriteWidth,this.oLevelNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.levelNumberSpace*r)-this.posY-201,canvas.height/2-154,this.oLevelNumbersImgData.oData.spriteWidth*r,this.oLevelNumbersImgData.oData.spriteHeight*r)}this.flareRot+=delta/3,ctx.save(),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.scale(.5,.3),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.scale(.5,.3),ctx.rotate(-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore();break;case"levelFail":ctx.drawImage(this.oMapImgData.img,mapPosRealX,mapPosRealY,Math.min(this.oMapImgData.img.width,canvas.width),Math.min(this.oMapImgData.img.height,canvas.height),0,0,canvas.width*mapScale,canvas.height*mapScale),this.displayMapIcons(),ctx.fillStyle="rgba(0, 0, 0, 0.5)",ctx.fillRect(0,0,canvas.width,canvas.height);e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.losePanel].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.losePanel].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.losePanel].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.losePanel].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY,canvas.height/2-s/2,i,s);for(o=levelScore.toString(),r=.85,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-o.length/2*(this.largeNumberSpace*r),canvas.height/2-139,this.oRedNumbersImgData.oData.spriteWidth*r,this.oRedNumbersImgData.oData.spriteHeight*r)}for(m=0;m<3;m++){ctx.save(),levelScore>=aLevelData[levelNum].aScoreTargs[m]?ctx.globalAlpha=1:ctx.globalAlpha=.4;d=oImageIds["scoreTarget"+m];"balloons"==aLevelData[levelNum].misc.id&&(d=oImageIds["balloonTarget"+m]);e=this.oUiElementsImgData.oData.oAtlasData[d].x,a=this.oUiElementsImgData.oData.oAtlasData[d].y,i=this.oUiElementsImgData.oData.oAtlasData[d].width,s=this.oUiElementsImgData.oData.oAtlasData[d].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY-113+115*m,canvas.height/2-s+112,i,s);for(o=aLevelData[levelNum].aScoreTargs[m].toString(),r=.85,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oBlueNumbersImgData.oData.spriteWidth%this.oBlueNumbersImgData.img.width,h=Math.floor(f/(this.oBlueNumbersImgData.img.width/this.oBlueNumbersImgData.oData.spriteWidth))*this.oBlueNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oBlueNumbersImgData.img,l,h,this.oBlueNumbersImgData.oData.spriteWidth,this.oBlueNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-o.length/2*(this.largeNumberSpace*r)-118+115*m,canvas.height/2+42,this.oBlueNumbersImgData.oData.spriteWidth*r,this.oBlueNumbersImgData.oData.spriteHeight*r)}ctx.restore()}for(o=(levelNum+1).toString();o.length<2;)o="0"+o;for(r=1,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oLevelNumbersImgData.oData.spriteWidth%this.oLevelNumbersImgData.img.width,h=Math.floor(f/(this.oLevelNumbersImgData.img.width/this.oLevelNumbersImgData.oData.spriteWidth))*this.oLevelNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oLevelNumbersImgData.img,l,h,this.oLevelNumbersImgData.oData.spriteWidth,this.oLevelNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.levelNumberSpace*r)-this.posY-201,canvas.height/2-154,this.oLevelNumbersImgData.oData.spriteWidth*r,this.oLevelNumbersImgData.oData.spriteHeight*r)}this.flareRot+=delta/3,ctx.save(),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.scale(.5,.3),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.scale(.5,.3),ctx.rotate(-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore();break;case"challengeFail":ctx.drawImage(this.oMapImgData.img,mapPosRealX,mapPosRealY,Math.min(this.oMapImgData.img.width,canvas.width),Math.min(this.oMapImgData.img.height,canvas.height),0,0,canvas.width*mapScale,canvas.height*mapScale),this.displayMapIcons(),ctx.fillStyle="rgba(0, 0, 0, 0.5)",ctx.fillRect(0,0,canvas.width,canvas.height);e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.challengePanel].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.challengePanel].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.challengePanel].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.challengePanel].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY,canvas.height/2-s/2,i,s);o=levelScore.toString(),r=.85;var c=window.famobi.hasFeature("leaderboard")?0:7,g=window.famobi.hasFeature("leaderboard")?0:58;for(n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oBlueNumbersImgData.oData.spriteWidth%this.oBlueNumbersImgData.img.width,h=Math.floor(f/(this.oBlueNumbersImgData.img.width/this.oBlueNumbersImgData.oData.spriteWidth))*this.oBlueNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oBlueNumbersImgData.img,l,h,this.oBlueNumbersImgData.oData.spriteWidth,this.oBlueNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-o.length/2*(this.largeNumberSpace*r)-8+c,canvas.height/2-145+g,this.oBlueNumbersImgData.oData.spriteWidth*r,this.oBlueNumbersImgData.oData.spriteHeight*r)}for(o=saveDataHandler.oHighscoreData.stats.ever.highscore.toString(),c=window.famobi.hasFeature("leaderboard")?0:-130,g=window.famobi.hasFeature("leaderboard")?0:150,r=.5,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oBlueNumbersImgData.oData.spriteWidth%this.oBlueNumbersImgData.img.width,h=Math.floor(f/(this.oBlueNumbersImgData.img.width/this.oBlueNumbersImgData.oData.spriteWidth))*this.oBlueNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oBlueNumbersImgData.img,l,h,this.oBlueNumbersImgData.oData.spriteWidth,this.oBlueNumbersImgData.oData.spriteHeight,canvas.width/2+128+n*(this.largeNumberSpace*r)-this.posY+c,canvas.height/2-123+g,this.oBlueNumbersImgData.oData.spriteWidth*r,this.oBlueNumbersImgData.oData.spriteHeight*r)}if(window.famobi.hasFeature("leaderboard")){var u=Math.max(saveDataHandler.oHighscoreData.stats.ever.rank.toString().length*this.largeNumberSpace*.4+saveDataHandler.oHighscoreData.stats.ever.total.toString().length*this.largeNumberSpace*.6-140,30);e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.highscoreTable].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.highscoreTable].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.highscoreTable].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.highscoreTable].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY-u-35,canvas.height/2-s/2+30,i,s);for(o=saveDataHandler.oHighscoreData.stats.day.rank.toString(),r=.6,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,h=Math.floor(f/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,l,h,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-u,canvas.height/2-60,this.oGreenNumbersImgData.oData.spriteWidth*r,this.oGreenNumbersImgData.oData.spriteHeight*r)}var p=.4;l=(f=10)*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+o.length*(this.largeNumberSpace*r)-this.posY+5-u,canvas.height/2-60,this.oRedNumbersImgData.oData.spriteWidth*p,this.oRedNumbersImgData.oData.spriteHeight*p);var v=saveDataHandler.oHighscoreData.stats.day.total.toString();for(p=.4,n=0;n<v.length;n++){l=(f=parseFloat(v.charAt(n)))*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*p)+o.length*(this.largeNumberSpace*r)-this.posY+25-u,canvas.height/2-60,this.oRedNumbersImgData.oData.spriteWidth*p,this.oRedNumbersImgData.oData.spriteHeight*p)}for(o=saveDataHandler.oHighscoreData.stats.week.rank.toString(),r=.6,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,h=Math.floor(f/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,l,h,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-u,canvas.height/2-60+50,this.oGreenNumbersImgData.oData.spriteWidth*r,this.oGreenNumbersImgData.oData.spriteHeight*r)}p=.4,l=(f=10)*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+o.length*(this.largeNumberSpace*r)-this.posY+5-u,canvas.height/2-60+50,this.oRedNumbersImgData.oData.spriteWidth*p,this.oRedNumbersImgData.oData.spriteHeight*p);for(v=saveDataHandler.oHighscoreData.stats.week.total.toString(),p=.4,n=0;n<v.length;n++){l=(f=parseFloat(v.charAt(n)))*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*p)+o.length*(this.largeNumberSpace*r)-this.posY+25-u,canvas.height/2-60+50,this.oRedNumbersImgData.oData.spriteWidth*p,this.oRedNumbersImgData.oData.spriteHeight*p)}for(o=saveDataHandler.oHighscoreData.stats.month.rank.toString(),r=.6,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,h=Math.floor(f/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,l,h,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-u,canvas.height/2-60+100,this.oGreenNumbersImgData.oData.spriteWidth*r,this.oGreenNumbersImgData.oData.spriteHeight*r)}p=.4,l=(f=10)*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+o.length*(this.largeNumberSpace*r)-this.posY+5-u,canvas.height/2-60+100,this.oRedNumbersImgData.oData.spriteWidth*p,this.oRedNumbersImgData.oData.spriteHeight*p);for(v=saveDataHandler.oHighscoreData.stats.month.total.toString(),p=.4,n=0;n<v.length;n++){l=(f=parseFloat(v.charAt(n)))*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*p)+o.length*(this.largeNumberSpace*r)-this.posY+25-u,canvas.height/2-60+100,this.oRedNumbersImgData.oData.spriteWidth*p,this.oRedNumbersImgData.oData.spriteHeight*p)}for(o=saveDataHandler.oHighscoreData.stats.ever.rank.toString(),r=.6,n=0;n<o.length;n++){l=(f=parseFloat(o.charAt(n)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,h=Math.floor(f/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,l,h,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*r)-this.posY-u,canvas.height/2-60+150,this.oGreenNumbersImgData.oData.spriteWidth*r,this.oGreenNumbersImgData.oData.spriteHeight*r)}p=.4,l=(f=10)*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+o.length*(this.largeNumberSpace*r)-this.posY+5-u,canvas.height/2-60+150,this.oRedNumbersImgData.oData.spriteWidth*p,this.oRedNumbersImgData.oData.spriteHeight*p);for(v=saveDataHandler.oHighscoreData.stats.ever.total.toString(),p=.4,n=0;n<v.length;n++){var f;l=(f=parseFloat(v.charAt(n)))*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,h=Math.floor(f/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,l,h,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,canvas.width/2+n*(this.largeNumberSpace*p)+o.length*(this.largeNumberSpace*r)-this.posY+25-u,canvas.height/2-60+150,this.oRedNumbersImgData.oData.spriteWidth*p,this.oRedNumbersImgData.oData.spriteHeight*p)}}this.flareRot+=delta/3,ctx.save(),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.scale(.5,.3),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.translate(canvas.width/2+this.posY+140,canvas.height/2+170),ctx.scale(.5,.3),ctx.rotate(-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore();break;case"game":break;case"animateMap":var D;if(mapPosRealY-=8*(mapPosRealY-mapPosY)*delta,mapPosRealX-=8*(mapPosRealX-mapPosX)*delta,ctx.drawImage(this.oMapImgData.img,mapPosRealX,mapPosRealY,Math.min(this.oMapImgData.img.width,canvas.width),Math.min(this.oMapImgData.img.height,canvas.height),0,0,canvas.width*mapScale,canvas.height*mapScale),-1!=(D=saveDataHandler.getLastUnlockedLevel())){this.flareRot+=delta/3;aLevelData[D].y<200&&80,ctx.save(),ctx.translate((aLevelData[D].mapX-mapPosRealX)*mapScale,(aLevelData[D].mapY-mapPosRealY)*mapScale),ctx.scale(.5,.5),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.translate((aLevelData[D].mapX-mapPosRealX)*mapScale,(aLevelData[D].mapY-mapPosRealY)*mapScale),ctx.scale(.5,.5),ctx.rotate(-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore()}this.displayMapIcons();e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fingerPoint].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fingerPoint].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fingerPoint].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fingerPoint].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,(this.fingerX-i/2-mapPosRealX+4)*mapScale,(this.fingerY-s/2-mapPosRealY-100+50*Math.sin(this.fingerArc))*mapScale,i*mapScale,s*mapScale);break;case"pause":ctx.fillStyle="rgba(0, 0, 0, 0.75)",ctx.fillRect(0,0,canvas.width,canvas.height)}t&&this.addButs(ctx)},t.prototype.displayMapIcons=function(){for(var t=0;t<50;t++){var e=saveDataHandler.getLevelData(t).levelState;0==e&&"undefined"!=typeof famobi_unlock&&famobi_unlock.isEnabled()&&(e=1),"balloons"==aLevelData[t].misc.id&&(e+=5);var a,i,s=oImageIds["mapBut"+e];switch(saveDataHandler.getLevelData(t).levelState){case 0:a=10,i=4;break;case 1:a=4,i=4;break;case 2:case 3:case 4:a=0,i=-40}var o=this.oUiElementsImgData.oData.oAtlasData[s].x,r=this.oUiElementsImgData.oData.oAtlasData[s].y,n=this.oUiElementsImgData.oData.oAtlasData[s].width,l=this.oUiElementsImgData.oData.oAtlasData[s].height;ctx.drawImage(this.oUiElementsImgData.img,o,r,n,l,(aLevelData[t].mapX-n/2-mapPosRealX+a)*mapScale,(aLevelData[t].mapY-l/2-mapPosRealY+i)*mapScale,n*mapScale,l*mapScale)}o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fadeBorderTop].x,r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fadeBorderTop].y,n=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fadeBorderTop].width,l=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fadeBorderTop].height;ctx.drawImage(this.oUiElementsImgData.img,o,r,n,l,0,0,canvas.width,l);o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fadeBorderBottom].x,r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fadeBorderBottom].y,n=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fadeBorderBottom].width,l=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fadeBorderBottom].height;ctx.drawImage(this.oUiElementsImgData.img,o,r,n,l,0,canvas.height-l,canvas.width,l)},t.prototype.displayScore=function(){for(var t=saveDataHandler.getTotalScore().toString();t.length<6;)t="0"+t;for(var e=.7,a=0;a<t.length;a++){var i,s=(i=parseFloat(t.charAt(a)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,o=Math.floor(i/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,s,o,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,canvas.width/2+a*(this.largeNumberSpace*e)-t.length/2*(this.largeNumberSpace*e),8-this.posY,this.oGreenNumbersImgData.oData.spriteWidth*e,this.oGreenNumbersImgData.oData.spriteHeight*e)}},t.prototype.addButs=function(t){for(var e=0;e<this.aButs.length;e++){var a=this.posY,i=0;0==this.incY||this.aButs[e].noMove||(i=3*Math.sin(this.incY+45*e)),this.aButs[e].scale||(this.aButs[e].scale=1);var s=this.aButs[e].oImgData.oData.oAtlasData[this.aButs[e].id].x,o=this.aButs[e].oImgData.oData.oAtlasData[this.aButs[e].id].y,r=this.aButs[e].oImgData.oData.oAtlasData[this.aButs[e].id].width,n=this.aButs[e].oImgData.oData.oAtlasData[this.aButs[e].id].height,l=canvas.width*this.aButs[e].align[0],h=canvas.height*this.aButs[e].align[1];t.drawImage(this.aButs[e].oImgData.img,s,o,r,n,l+this.aButs[e].aPos[0]-r/2*this.aButs[e].scale+a-i/2,h+this.aButs[e].aPos[1]-n/2*this.aButs[e].scale+i/2,r*this.aButs[e].scale+i,n*this.aButs[e].scale-i)}},t}();t.Panel=e}(Elements||(Elements={})),function(t){var e=function(){function t(t){if(void 0===t&&(t=!1),this.aTargData=new Array({y:3,scale:.77,dist:30},{y:3,scale:.58,dist:50},{y:3,scale:.45,dist:70},{y:3,scale:.34,dist:90}),this.zoomScale=1,this.initialTweenX=0,this.scrollSegs=100,this.tempInc=0,this.isStartScreen=!1,this.aDistMarker=new Array(400,420,450,485),this.smallScale=.5461341790996472,this.oGameElementsImgData=assetLib.getData("gameElements"),this.oTreesImgData=assetLib.getData("trees"),"levels"==gameMode)sceneType=aLevelData[levelNum].bg,oTargetType={id:aLevelData[levelNum].id,moveDist:aLevelData[levelNum].moveDist,windMin:aLevelData[levelNum].windMin,windMax:aLevelData[levelNum].windMax},this.targPosId=aLevelData[levelNum].targPosId,levelNum<30?(this.moveSpeed=20,this.moveSpeedTarg=20):(this.moveSpeed=25,this.moveSpeedTarg=25);else{sceneType=Math.floor(5*Math.random());for(var e=this.getChallengeWind(),a=0;a<aBirds.length;a++)aBirds[a].reset();if(0==challengeLevelNum)oTargetType="static",this.challengeRot=0,oChallengeBalloon={rot:0,hyp:0,scale:Math.max(.5,1-challengeLevelNum/30)};else{(oTargetType=aTargetTypes[Math.floor(Math.random()*aTargetTypes.length)]).windMin=e,oTargetType.windMax=e,this.challengeRot=(1*Math.random()-.5)*Math.min(challengeLevelNum/10,1);Math.random();oChallengeBalloon={rot:Math.random()*(360*radian),hyp:100*Math.random(),scale:Math.max(.75,1-challengeLevelNum/100)}}this.targPosId=this.getChallengePosId(),moveIncX=0,moveIncY=0,moveState=0,this.moveSpeed=20,this.moveSpeedTarg=20,aArrowsFired=new Array}this.oGroundImgData=assetLib.getData("ground"+sceneType),this.oHorizonImgData=assetLib.getData("horizon"+sceneType),setTreeData(),this.isStartScreen=t,"challenge"==gameMode?this.targStyle=3:this.isStartScreen?this.targStyle=0:this.targStyle=aLevelData[levelNum].targType,this.isScrollingGround=!0,this.isStartScreen&&(this.scrollSegs=150,moveIncX=0,moveIncY=0,moveState=0),this.initialTweenX=-600,firstRun||this.introTween()}return t.prototype.introTween=function(){this.startTween=TweenLite.to(this,1,{initialTweenX:0,ease:"Cubic.easeOut",onComplete:function(){}})},t.prototype.getChallengePosId=function(){switch(Math.min(Math.round(Math.random()*challengeLevelNum),10)){case 0:case 1:case 2:return 0;case 3:case 4:case 5:return 1;case 6:case 7:case 8:return 2;case 9:case 10:return 3;default:return Math.random()>.2?3:Math.floor(4*Math.random())}return Math.floor(Math.random()*challengeLevelNum/5)},t.prototype.getChallengeWind=function(){return 0==challengeLevelNum?0:.5+Math.random()*Math.min(challengeLevelNum/20,2)},t.prototype.update=function(){switch("levels"==gameMode&&0!=aLevelData[levelNum].rot?targRot+=aLevelData[levelNum].rot*delta:"challenge"==gameMode&&(targRot+=this.challengeRot*delta),this.horizonY=.5*canvas.height,this.groundToHit=this.oGameElementsImgData.oData.oAtlasData[oImageIds.standSmall].height,oTargetType.id){case"horiz":this.moveSpeed-=0==moveState?.05*(this.moveSpeed-this.moveSpeedTarg):.05*(this.moveSpeed+this.moveSpeedTarg),(moveIncX+=delta*this.moveSpeed)>=oTargetType.moveDist*moveDistSeg/2?moveState=1:moveIncX<=oTargetType.moveDist*-moveDistSeg/2&&(moveState=0);break;case"vert":this.moveSpeed-=0==moveState?.05*(this.moveSpeed-this.moveSpeedTarg):.05*(this.moveSpeed+this.moveSpeedTarg),(moveIncY+=delta*this.moveSpeed)>=oTargetType.moveDist*moveDistSeg?moveState=1:moveIncY<=0&&(moveState=0);break;case"diag0":this.moveSpeed-=0==moveState?.05*(this.moveSpeed-this.moveSpeedTarg):.05*(this.moveSpeed+this.moveSpeedTarg),moveIncY+=delta*this.moveSpeed,moveIncX+=delta*this.moveSpeed,moveIncY>=oTargetType.moveDist*moveDistSeg?moveState=1:moveIncY<=0&&(moveState=0);break;case"diag1":this.moveSpeed-=0==moveState?.05*(this.moveSpeed-this.moveSpeedTarg):.05*(this.moveSpeed+this.moveSpeedTarg),moveIncY+=delta*this.moveSpeed,moveIncX-=delta*this.moveSpeed,moveIncY>=oTargetType.moveDist*moveDistSeg?moveState=1:moveIncY<=0&&(moveState=0);break;case"circle0":circleAngle+=delta*this.moveSpeed/55,moveIncX=Math.cos(circleAngle)*(200*oTargetType.moveDist),moveIncY=Math.sin(circleAngle)*(200*oTargetType.moveDist)+200*oTargetType.moveDist;break;case"circle1":circleAngle-=delta*this.moveSpeed/55,moveIncX=Math.cos(circleAngle)*(200*oTargetType.moveDist),moveIncY=Math.sin(circleAngle)*(200*oTargetType.moveDist)+200*oTargetType.moveDist;break;case"triangle0":0==moveState?moveIncX+=delta*this.moveSpeed:1==moveState?(moveIncY+=delta*this.moveSpeed*.8,moveIncX-=delta*this.moveSpeed/2):(moveIncY-=delta*this.moveSpeed*.8,moveIncX-=delta*this.moveSpeed/2),moveIncX>=oTargetType.moveDist*moveDistSeg/2?moveState=1:moveIncY>=oTargetType.moveDist*moveDistSeg*.8?moveState=2:moveIncX<=oTargetType.moveDist*-moveDistSeg/2&&(moveState=0);break;case"triangle1":0==moveState?(moveIncX-=delta*this.moveSpeed/2,moveIncY+=delta*this.moveSpeed*.8):1==moveState?moveIncX+=delta*this.moveSpeed:(moveIncY-=delta*this.moveSpeed*.8,moveIncX-=delta*this.moveSpeed/2),moveIncX<=oTargetType.moveDist*-moveDistSeg/2?moveState=1:moveIncX>=oTargetType.moveDist*moveDistSeg/2?moveState=2:moveIncY<=0&&(moveState=0);break;case"square":0==moveState?moveIncX+=delta*this.moveSpeed:1==moveState?moveIncY+=delta*this.moveSpeed:2==moveState?moveIncX-=delta*this.moveSpeed:moveIncY-=delta*this.moveSpeed,0==moveState&&moveIncX>=oTargetType.moveDist*moveDistSeg/2?moveState=1:1==moveState&&moveIncY>=oTargetType.moveDist*moveDistSeg*.8?moveState=2:2==moveState&&moveIncX<=oTargetType.moveDist*-moveDistSeg/2?moveState=3:3==moveState&&moveIncY<=0&&(moveState=0)}this.isStartScreen&&(this.initialTweenX=600*Math.sin(this.tempInc+=delta/2))},t.prototype.zoomIn=function(){this.sceneTween=TweenLite.to(this,1,{zoomScale:1.3,ease:"Quad.easeInOut"}),this.startTween.kill(),this.initialTweenX=0,this.isScrollingGround=!1},t.prototype.setThinLine=function(){ctx.strokeStyle="#8F8B7B",ctx.lineWidth=5*this.aTargData[this.targPosId].scale*this.zoomScale},t.prototype.render=function(){if(ctx.drawImage(this.oHorizonImgData.img,0,0,this.oHorizonImgData.img.width,this.oHorizonImgData.img.height,canvas.width/2-this.oHorizonImgData.img.width/2*this.zoomScale,this.horizonY-this.oHorizonImgData.img.height*this.zoomScale,this.oHorizonImgData.img.width*this.zoomScale,this.oHorizonImgData.img.height*this.zoomScale),this.isScrollingGround)for(var t=0;t<this.scrollSegs;t++)ctx.drawImage(this.oGroundImgData.img,0,this.oGroundImgData.img.height/this.scrollSegs*t,this.oGroundImgData.img.width,this.oGroundImgData.img.height/this.scrollSegs+1,canvas.width/2-(this.oGroundImgData.img.width/2+this.initialTweenX*(t/this.scrollSegs))*this.zoomScale,this.horizonY+this.oGroundImgData.img.height/this.scrollSegs*t,this.oGroundImgData.img.width*this.zoomScale,this.oGroundImgData.img.height/this.scrollSegs*this.zoomScale+1);else ctx.drawImage(this.oGroundImgData.img,0,0,this.oGroundImgData.img.width,this.oGroundImgData.img.height,canvas.width/2-this.oGroundImgData.img.width/2*this.zoomScale,this.horizonY,this.oGroundImgData.img.width*this.zoomScale,this.oGroundImgData.img.height*this.zoomScale);for(t=0;t<aBirds.length;t++)aBirds[t].update(),aBirds[t].render(ctx),aBirds[t].removeMe&&(aBirds.splice(t,1),t-=1);for(t=0;t<treeNum;t++){var e=this.oTreesImgData.oData.oAtlasData[oImageIds[aTreeData[t].idL]].x,a=this.oTreesImgData.oData.oAtlasData[oImageIds[aTreeData[t].idL]].y,i=this.oTreesImgData.oData.oAtlasData[oImageIds[aTreeData[t].idL]].width,s=this.oTreesImgData.oData.oAtlasData[oImageIds[aTreeData[t].idL]].height,o=((r=t+2)*r*r/900+.25)*aTreeData[t].scaleL;ctx.drawImage(this.oTreesImgData.img,e,a,i,s,canvas.width/2-i/2*o*this.zoomScale-50*t*o*this.zoomScale-this.initialTweenX*(o-.2)/6.5*this.zoomScale-150*this.zoomScale,this.horizonY-s*o*this.zoomScale+((12*t+15)*o+10)*this.zoomScale,i*o*this.zoomScale,s*o*this.zoomScale);var r;e=this.oTreesImgData.oData.oAtlasData[oImageIds[aTreeData[t].idR]].x,a=this.oTreesImgData.oData.oAtlasData[oImageIds[aTreeData[t].idR]].y,i=this.oTreesImgData.oData.oAtlasData[oImageIds[aTreeData[t].idR]].width,s=this.oTreesImgData.oData.oAtlasData[oImageIds[aTreeData[t].idR]].height,o=((r=t+2)*r*r/900+.25)*aTreeData[t].scaleR;ctx.drawImage(this.oTreesImgData.img,e,a,i,s,canvas.width/2-i/2*o*this.zoomScale+50*t*o*this.zoomScale-this.initialTweenX*(o-.2)/6.5*this.zoomScale+150*this.zoomScale,this.horizonY-s*o*this.zoomScale+((12*t+15)*o+10)*this.zoomScale,i*o*this.zoomScale,s*o*this.zoomScale)}var n=this.initialTweenX*(this.aTargData[this.targPosId].scale-.1)/7;e=this.oGameElementsImgData.oData.oAtlasData[oImageIds["distMarker"+this.targPosId]].x,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds["distMarker"+this.targPosId]].y,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds["distMarker"+this.targPosId]].width,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["distMarker"+this.targPosId]].height;this.targetCentreX=canvas.width/2,this.targetCentreY=this.horizonY-this.aTargData[this.targPosId].y*this.zoomScale,ctx.drawImage(this.oGameElementsImgData.img,e,a,i,s,canvas.width/2-(.6*(i/2+this.aDistMarker[this.targPosId])*this.aTargData[this.targPosId].scale+n)*this.zoomScale,this.targetCentreY+77*this.aTargData[this.targPosId].scale*this.zoomScale,i*this.aTargData[this.targPosId].scale*.6*this.zoomScale,s*this.aTargData[this.targPosId].scale*.6*this.zoomScale);e=this.oGameElementsImgData.oData.oAtlasData[oImageIds["distMarker"+this.targPosId]].x,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds["distMarker"+this.targPosId]].y,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds["distMarker"+this.targPosId]].width,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["distMarker"+this.targPosId]].height;switch(this.targetCentreX=canvas.width/2,this.targetCentreY=this.horizonY-this.aTargData[this.targPosId].y*this.zoomScale,ctx.drawImage(this.oGameElementsImgData.img,e,a,i,s,canvas.width/2-(.6*(i/2-this.aDistMarker[this.targPosId])*this.aTargData[this.targPosId].scale+n)*this.zoomScale,this.targetCentreY+77*this.aTargData[this.targPosId].scale*this.zoomScale,i*this.aTargData[this.targPosId].scale*.6*this.zoomScale,s*this.aTargData[this.targPosId].scale*.6*this.zoomScale),ctx.strokeStyle="#6D695C",ctx.lineWidth=10*this.aTargData[this.targPosId].scale*this.zoomScale,ctx.lineCap="round",oTargetType.id){case"horiz":ctx.beginPath(),ctx.moveTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.stroke();break;case"vert":ctx.beginPath(),ctx.moveTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY-moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY-moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.stroke();break;case"diag0":ctx.beginPath(),ctx.moveTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.stroke();break;case"diag1":ctx.beginPath(),ctx.moveTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.stroke();break;case"circle0":case"circle1":ctx.beginPath(),ctx.arc(this.targetCentreX-n*this.zoomScale,this.targetCentreY-200*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale,200*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale,0,2*Math.PI,!1),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.arc(this.targetCentreX-n*this.zoomScale,this.targetCentreY-200*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale,200*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale,0,2*Math.PI,!1),ctx.stroke();break;case"triangle0":ctx.beginPath(),ctx.moveTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.stroke();break;case"triangle1":ctx.beginPath(),ctx.moveTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-n*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.stroke();break;case"square":ctx.beginPath(),ctx.moveTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.stroke(),this.setThinLine(),ctx.moveTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.lineTo(this.targetCentreX-(n+moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY-.8*moveDistSeg*oTargetType.moveDist*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.lineTo(this.targetCentreX-(n-moveDistSeg*oTargetType.moveDist/2*this.aTargData[this.targPosId].scale)*this.zoomScale,this.targetCentreY),ctx.stroke()}e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.standSmall].x,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.standSmall].y,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.standSmall].width,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.standSmall].height;ctx.drawImage(this.oGameElementsImgData.img,e,a,i,s,canvas.width/2-(i/2*this.aTargData[this.targPosId].scale+n)*this.zoomScale,this.targetCentreY,i*this.aTargData[this.targPosId].scale*this.zoomScale,s*this.aTargData[this.targPosId].scale*this.zoomScale),ctx.save(),ctx.translate(this.targetCentreX-n-moveIncX*this.zoomScale*this.aTargData[this.targPosId].scale,this.targetCentreY-moveIncY*this.zoomScale*this.aTargData[this.targPosId].scale),ctx.rotate(targRot),ctx.scale(this.zoomScale*this.aTargData[this.targPosId].scale,this.zoomScale*this.aTargData[this.targPosId].scale);e=this.oGameElementsImgData.oData.oAtlasData[oImageIds["targetSmall"+this.targStyle]].x,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds["targetSmall"+this.targStyle]].y,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds["targetSmall"+this.targStyle]].width,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["targetSmall"+this.targStyle]].height;if(ctx.drawImage(this.oGameElementsImgData.img,e,a,i,s,-i/2,-s/2,i,s),ctx.restore(),"balloons"==aLevelData[levelNum].misc.id&&"levels"==gameMode)for(t=0;t<aLevelBalloonData.length;t++){e=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloonSmall"+aLevelBalloonData[t].colour]].x,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloonSmall"+aLevelBalloonData[t].colour]].y,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloonSmall"+aLevelBalloonData[t].colour]].width,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloonSmall"+aLevelBalloonData[t].colour]].height;ctx.drawImage(this.oGameElementsImgData.img,e,a,i,s,this.targetCentreX-((i/2*aLevelBalloonData[t].scale+moveIncX)*this.aTargData[this.targPosId].scale-(-Math.cos(targRot+aLevelBalloonData[t].rot)*aLevelBalloonData[t].hyp+3.5*aLevelBalloonData[t].scale)*this.smallScale*this.aTargData[this.targPosId].scale+n)*this.zoomScale,this.targetCentreY-((s/2*aLevelBalloonData[t].scale+moveIncY)*this.aTargData[this.targPosId].scale-(-Math.sin(targRot+aLevelBalloonData[t].rot)*aLevelBalloonData[t].hyp+5*aLevelBalloonData[t].scale)*this.smallScale*this.aTargData[this.targPosId].scale)*this.zoomScale,i*this.aTargData[this.targPosId].scale*this.zoomScale*aLevelBalloonData[t].scale,s*this.aTargData[this.targPosId].scale*this.zoomScale*aLevelBalloonData[t].scale)}else if("challenge"==gameMode){e=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloonSmall"+challengeLevelNum%7]].x,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloonSmall"+challengeLevelNum%7]].y,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloonSmall"+challengeLevelNum%7]].width,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloonSmall"+challengeLevelNum%7]].height;ctx.drawImage(this.oGameElementsImgData.img,e,a,i,s,this.targetCentreX-((i/2*oChallengeBalloon.scale+moveIncX)*this.aTargData[this.targPosId].scale-(-Math.cos(targRot+oChallengeBalloon.rot)*oChallengeBalloon.hyp+3.5*oChallengeBalloon.scale)*this.smallScale*this.aTargData[this.targPosId].scale+n)*this.zoomScale,this.targetCentreY-((s/2*oChallengeBalloon.scale+moveIncY)*this.aTargData[this.targPosId].scale-(-Math.sin(targRot+oChallengeBalloon.rot)*oChallengeBalloon.hyp+5*oChallengeBalloon.scale)*this.smallScale*this.aTargData[this.targPosId].scale)*this.zoomScale,i*this.aTargData[this.targPosId].scale*this.zoomScale*oChallengeBalloon.scale,s*this.aTargData[this.targPosId].scale*this.zoomScale*oChallengeBalloon.scale)}for(t=0;t<aArrowsFired.length;t++)if(aArrowsFired[t].hitTarget){e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.flushArrowHit].x,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.flushArrowHit].y,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.flushArrowHit].width,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.flushArrowHit].height;ctx.drawImage(this.oGameElementsImgData.img,e,a,i,s,this.targetCentreX-((-Math.cos(targRot+aArrowsFired[t].rot)*aArrowsFired[t].hyp*aimTargetRadius+i/2+moveIncX)*this.aTargData[this.targPosId].scale+n)*this.zoomScale,this.targetCentreY-(-Math.sin(targRot+aArrowsFired[t].rot)*aArrowsFired[t].hyp*aimTargetRadius+2.5+moveIncY)*this.aTargData[this.targPosId].scale*this.zoomScale,i*this.aTargData[this.targPosId].scale*this.zoomScale,s*this.aTargData[this.targPosId].scale*this.zoomScale)}if(this.isStartScreen)for(t=0;t<5;t++){e=this.oGameElementsImgData.oData.oAtlasData[oImageIds["lensFlare"+t%3]].x,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds["lensFlare"+t%3]].y,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds["lensFlare"+t%3]].width,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["lensFlare"+t%3]].height;var l=canvas.height/5+canvas.height/(t+t)/1-s/2;ctx.drawImage(this.oGameElementsImgData.img,e,a,i,s,canvas.width/2-canvas.width/(t+t)-i/2-this.initialTweenX*l/1e4,l,i,s)}},t}();t.ArcheryView=e}(Elements||(Elements={})),function(t){var e=function(){function t(){this.tartgDistX=66,this.dragX=0,this.dragY=0,this.targAimX=0,this.targAimY=0,this.startAimX=0,this.startAimY=0,this.isHeld=!1,this.maxMoveSpeed=10,this.easeTargX=0,this.easeTargY=0,this.arrowFireX=0,this.arrowFireY=0,this.arrowScale=1,this.aScopeOffset=new Array({x:60.5}),this.bowId=0,this.isAiming=!0,this.oGameElementsImgData=assetLib.getData("gameElements"),this.scale=.5,this.startX=25*Math.random(),this.startY=25*Math.random(),this.initialTweenX=200,this.initialTweenY=200,firstRun||this.introTween()}return t.prototype.introTween=function(){this.easeTweenX=TweenLite.to(this,1,{initialTweenX:0,ease:"Quad.easeOut"}),this.easeTweenY=TweenLite.to(this,1,{initialTweenY:0,ease:"Back.easeOut"})},t.prototype.zoomIn=function(){this.bowTween=TweenLite.to(this,.5,{scale:1,ease:"Quad.easeInOut"}),this.easeTweenX&&this.easeTweenX.kill(),this.easeTweenY&&this.easeTweenY.kill(),this.initialTweenX=0,this.initialTweenY=0},t.prototype.fireArrow=function(){TweenLite.to(this,.1,{arrowFireX:-100,arrowFireY:-100,arrowScale:.2,ease:"Quad.easeIn",onComplete:function(){initArrowFire()}}),this.isAiming=!1},t.prototype.update=function(){this.isAiming&&(this.easeTargX-=(this.easeTargX-(this.targAimX-this.startAimX))*(5*delta),this.easeTargY-=(this.easeTargY-(this.targAimY-this.startAimY))*(5*delta),this.dragX=Math.max(Math.min(this.dragX+3*this.easeTargX*delta,.4*canvas.width),.4*-canvas.width),this.dragY=Math.max(Math.min(this.dragY+3*this.easeTargY*delta,.4*canvas.height),.4*-canvas.height),this.x=canvas.width/2-this.tartgDistX*this.scale+this.startX+this.dragX+this.initialTweenX,this.y=canvas.height/2+this.startY+this.dragY+this.initialTweenY)},t.prototype.render=function(){var t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scope0].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scope0].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scope0].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scope0].height;ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,this.x,this.y-i/2*this.scale,a*this.scale,i*this.scale);t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowTop].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowTop].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowTop].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowTop].height;ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,this.x+174*this.scale,this.y-(i+338)*this.scale,a*this.scale,i*this.scale);t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowMiddle].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowMiddle].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowMiddle].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowMiddle].height;ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,this.x+170*this.scale,this.y-340*this.scale,a*this.scale,i*this.scale);t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowBottom].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowBottom].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowBottom].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowBottom].height;ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,this.x+171*this.scale,this.y+(this.oGameElementsImgData.oData.oAtlasData[oImageIds.bowMiddle].height-342)*this.scale,a*this.scale,i*this.scale);t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInBow].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInBow].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInBow].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInBow].height;ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,this.x+(220-this.initialTweenX/2+this.arrowFireX)*this.scale,this.y+(100-this.initialTweenX/2+this.arrowFireY)*this.scale,a*this.scale*this.arrowScale,i*this.scale*this.arrowScale),ctx.strokeStyle="rgba(50,50,50, 1)",ctx.lineWidth=2,ctx.beginPath(),ctx.moveTo(this.x+250*this.scale,this.y-1130*this.scale),ctx.lineTo(this.x+(610-1*(this.initialTweenX/2+this.arrowFireX))*this.scale,this.y+(475-1*(this.initialTweenX/2+this.arrowFireY))*this.scale),ctx.lineTo(this.x+250*this.scale,this.y+1423*this.scale),ctx.stroke()},t}();t.Bow=e}(Elements||(Elements={})),function(t){var e=function(){function e(){this.hasWind=!1,this.largeNumberSpace=41,this.scoreX=0,this.scoreY=0,this.levelScoreEase=0,this.windYPerc=.65,this.oGameElementsImgData=assetLib.getData("gameElements"),this.oGreenNumbersImgData=assetLib.getData("numbersGreen"),this.oBlueNumbersImgData=assetLib.getData("numbersBlue"),this.oRedNumbersImgData=assetLib.getData("numbersRed"),firstRun&&(this.tutorial=new t.Tutorial(assetLib.getData("tutorial"))),this.resetWind()}return e.prototype.easeScore=function(){TweenLite.to(this,.3,{levelScoreEase:Math.min(levelScore,aLevelData[levelNum].aScoreTargs[2]),ease:"Quad.easeOut"})},e.prototype.resetWind=function(){var t=this;if(oTargetType.windMax>0){this.hasWind=!0;var e=0;Math.random()>.5&&(e=180),"challenge"==gameMode&&(this.windYPerc=.5),this.windDir=(60*Math.random()-30+e)*radian,this.windPower=Math.round(Math.random()*(oTargetType.windMax-oTargetType.windMin)*10)/10+oTargetType.windMin,this.windX=canvas.width/2,this.windY=-100,this.windScale=1.5,TweenLite.to(this,1,{windX:canvas.width/2,windScale:1,ease:"Bounce.easeOut",onComplete:function(){TweenLite.to(t,.5,{delay:0,windX:58,windY:0,windScale:.6,ease:"Quad.easeOut",onComplete:function(){}})}})}else this.windDir=0,this.windPower=0},e.prototype.showScore=function(t){var e=this;switch(this.scoreX=0,this.scoreY=.5,this.scoreNum=t,levelScore+=this.scoreNum,this.easeScore(),this.scoreNum){case 10:case 9:playSound("cheer"+Math.floor(5*Math.random()));case 8:case 7:case 6:case 5:case 4:case 3:case 2:case 1:playSound("score"+Math.floor(5*Math.random())),addFirework(1,.2*canvas.width,.5*canvas.height,3),addFirework(1,.8*canvas.width,.5*canvas.height,3);break;case 0:playSound("crowdSad")}this.scoreTween=TweenLite.to(this,.5,{delay:.1,scoreX:.5,scoreY:.75,ease:"Back.easeOut",onComplete:function(){if(e.scoreNum>=10)for(var t=0;t<5;t++)addFirework(0,canvas.width/2-150+75*t,.75*canvas.height+200*Math.random()-100,1*Math.random()+2);e.scoreTween=TweenLite.to(e,.5,{delay:.5,scoreX:-.2,scoreY:.5,ease:"Back.easeIn",onComplete:function(){initNextShot()}})}})},e.prototype.showBalloonScore=function(t){var e=this;this.scoreX=0,this.scoreY=.5,t?("string"==typeof t?window.famobi_analytics.trackStats("target_hit",{color:t,value:1}):window.famobi_analytics.trackStats("target_hit",{value:1}),this.scoreNum=1,levelScore+=this.scoreNum,window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:levelScore}),addFirework(1,.2*canvas.width,.5*canvas.height,3),addFirework(1,.8*canvas.width,.5*canvas.height,3),playSound("cheer"+Math.floor(5*Math.random())),playSound("score"+Math.floor(5*Math.random()))):(this.scoreNum=0,playSound("crowdSad"),window.famobi_analytics.trackStats("target_missed")),this.easeScore(),this.scoreTween=TweenLite.to(this,.5,{delay:.1,scoreX:.5,scoreY:.75,ease:"Back.easeOut",onComplete:function(){for(var t=0;t<5;t++)addFirework(0,canvas.width/2-150+75*t,.75*canvas.height+200*Math.random()-100,1*Math.random()+2);e.scoreTween=TweenLite.to(e,.5,{delay:.5,scoreX:-.2,scoreY:.5,ease:"Back.easeIn",onComplete:function(){"levels"==gameMode?initNextShot():"challenge"==gameMode&&(0!=e.scoreNum||forcedModeProperties.override.endless_challenge?initNextShot():initChallengeFail())}})}})},e.prototype.update=function(){},e.prototype.render=function(){let t,e,a;if(forcedModeProperties.override.hide_ui&&(t=forcedModeProperties.override.hide_ui.includes("score"),e=forcedModeProperties.override.hide_ui.includes("arrow_indicator"),a=forcedModeProperties.override.hide_ui.includes("wind_indicator")),!t)if("levels"==gameMode){var i=30,s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar2].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar2].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar2].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar2].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,52-r/2,20,r,n);s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar1].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar1].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar1].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar1].height;ctx.drawImage(this.oGameElementsImgData.img,s,o+i+171/aLevelData[levelNum].aScoreTargs[2]*(aLevelData[levelNum].aScoreTargs[2]-aLevelData[levelNum].aScoreTargs[1]),r,171/aLevelData[levelNum].aScoreTargs[2]*aLevelData[levelNum].aScoreTargs[1],52-r/2,50+171/aLevelData[levelNum].aScoreTargs[2]*(aLevelData[levelNum].aScoreTargs[2]-aLevelData[levelNum].aScoreTargs[1]),r,171/aLevelData[levelNum].aScoreTargs[2]*aLevelData[levelNum].aScoreTargs[1]);s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar0].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar0].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar0].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressBar0].height;ctx.drawImage(this.oGameElementsImgData.img,s,o+i+171/aLevelData[levelNum].aScoreTargs[2]*(aLevelData[levelNum].aScoreTargs[2]-aLevelData[levelNum].aScoreTargs[0]),r,171/aLevelData[levelNum].aScoreTargs[2]*aLevelData[levelNum].aScoreTargs[0],52-r/2,50+171/aLevelData[levelNum].aScoreTargs[2]*(aLevelData[levelNum].aScoreTargs[2]-aLevelData[levelNum].aScoreTargs[0]),r,171/aLevelData[levelNum].aScoreTargs[2]*aLevelData[levelNum].aScoreTargs[0]);var l=0;this.levelScoreEase>=aLevelData[levelNum].aScoreTargs[2]?l=3:this.levelScoreEase>=aLevelData[levelNum].aScoreTargs[1]?l=2:this.levelScoreEase>=aLevelData[levelNum].aScoreTargs[0]&&(l=1);s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["progressMarker"+l]].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds["progressMarker"+l]].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds["progressMarker"+l]].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds["progressMarker"+l]].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,53-r/2,20-n/2+i+168-168/aLevelData[levelNum].aScoreTargs[2]*this.levelScoreEase-3,r,n);s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg0].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg0].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg0].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg0].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,58,50+171/aLevelData[levelNum].aScoreTargs[2]*(aLevelData[levelNum].aScoreTargs[2]-aLevelData[levelNum].aScoreTargs[0])-n/2,r,n);s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg1].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg1].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg1].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg1].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,3,50+171/aLevelData[levelNum].aScoreTargs[2]*(aLevelData[levelNum].aScoreTargs[2]-aLevelData[levelNum].aScoreTargs[1])-n/2,r,n);s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg0].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg0].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg0].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.progressNumBg0].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,58,50-n/2,r,n);for(var h=aLevelData[levelNum].aScoreTargs[0].toString(),m=.3,d=0;d<h.length;d++){var c=(p=parseFloat(h.charAt(d)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,g=Math.floor(p/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,c,g,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,82+d*(this.largeNumberSpace*m)-h.length/2*(this.largeNumberSpace*m),50+171/aLevelData[levelNum].aScoreTargs[2]*(aLevelData[levelNum].aScoreTargs[2]-aLevelData[levelNum].aScoreTargs[0])-9,this.oGreenNumbersImgData.oData.spriteWidth*m,this.oGreenNumbersImgData.oData.spriteHeight*m)}for(h=aLevelData[levelNum].aScoreTargs[1].toString(),d=0;d<h.length;d++){c=(p=parseFloat(h.charAt(d)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,g=Math.floor(p/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,c,g,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,18+d*(this.largeNumberSpace*m)-h.length/2*(this.largeNumberSpace*m),50+171/aLevelData[levelNum].aScoreTargs[2]*(aLevelData[levelNum].aScoreTargs[2]-aLevelData[levelNum].aScoreTargs[1])-9,this.oGreenNumbersImgData.oData.spriteWidth*m,this.oGreenNumbersImgData.oData.spriteHeight*m)}for(h=aLevelData[levelNum].aScoreTargs[2].toString(),d=0;d<h.length;d++){c=(p=parseFloat(h.charAt(d)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,g=Math.floor(p/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,c,g,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,82+d*(this.largeNumberSpace*m)-h.length/2*(this.largeNumberSpace*m),41,this.oGreenNumbersImgData.oData.spriteWidth*m,this.oGreenNumbersImgData.oData.spriteHeight*m)}if(levelScore>0)for(h=levelScore.toString(),m=.6,d=0;d<h.length;d++){c=(p=parseFloat(h.charAt(d)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,g=Math.floor(p/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,c,g,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,48+d*(this.largeNumberSpace*m)-h.length/2*(this.largeNumberSpace*m),225,this.oGreenNumbersImgData.oData.spriteWidth*m,this.oGreenNumbersImgData.oData.spriteHeight*m)}}else{s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scoreBgGame].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scoreBgGame].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scoreBgGame].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scoreBgGame].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,52-r/2,50-n/2,r,n);m=1;(h=levelScore.toString()).length>2?m=.6:h.length>1&&(m=.8);for(d=0;d<h.length;d++){c=(p=parseFloat(h.charAt(d)))*this.oGreenNumbersImgData.oData.spriteWidth%this.oGreenNumbersImgData.img.width,g=Math.floor(p/(this.oGreenNumbersImgData.img.width/this.oGreenNumbersImgData.oData.spriteWidth))*this.oGreenNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oGreenNumbersImgData.img,c,g,this.oGreenNumbersImgData.oData.spriteWidth,this.oGreenNumbersImgData.oData.spriteHeight,48+d*(this.largeNumberSpace*m)-h.length/2*(this.largeNumberSpace*m),65,this.oGreenNumbersImgData.oData.spriteWidth*m,this.oGreenNumbersImgData.oData.spriteHeight*m)}}if("levels"==gameMode&&!e){s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.quiverBgGame].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.quiverBgGame].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.quiverBgGame].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.quiverBgGame].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,58-r/2,canvas.height-n/2-60,r,n);for(h=(aLevelData[levelNum].quiver-quiver+1).toString(),m=.6,d=0;d<h.length;d++){c=(p=parseFloat(h.charAt(d)))*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,g=Math.floor(p/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,c,g,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,11,canvas.height-55.5,this.oRedNumbersImgData.oData.spriteWidth*m,this.oRedNumbersImgData.oData.spriteHeight*m)}for(h=aLevelData[levelNum].quiver.toString(),m=.6,d=0;d<h.length;d++){c=(p=parseFloat(h.charAt(d)))*this.oRedNumbersImgData.oData.spriteWidth%this.oRedNumbersImgData.img.width,g=Math.floor(p/(this.oRedNumbersImgData.img.width/this.oRedNumbersImgData.oData.spriteWidth))*this.oRedNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oRedNumbersImgData.img,c,g,this.oRedNumbersImgData.oData.spriteWidth,this.oRedNumbersImgData.oData.spriteHeight,62,canvas.height-55.5,this.oRedNumbersImgData.oData.spriteWidth*m,this.oRedNumbersImgData.oData.spriteHeight*m)}}if(this.hasWind&&!a){s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.windPanel].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.windPanel].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.windPanel].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.windPanel].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,this.windX-r/2*this.windScale,canvas.height*this.windYPerc+this.windY-n/2*this.windScale,r*this.windScale,n*this.windScale),ctx.save(),ctx.translate(this.windX-4,canvas.height*this.windYPerc+this.windY+4),ctx.rotate(this.windDir),ctx.scale(this.windScale,this.windScale);l=0;this.windDir/radian>90&&(l=1);var u=Math.round(1.66*this.windPower);s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["windArrow"+l+u]].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds["windArrow"+l+u]].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds["windArrow"+l+u]].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds["windArrow"+l+u]].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,-r/2,-n/2,r,n),ctx.restore();for(h=Math.round(10*this.windPower).toString();h.length<2;)h="0"+h;for(m=1,d=0;d<h.length;d++){var p;c=(p=parseFloat(h.charAt(d)))*this.oBlueNumbersImgData.oData.spriteWidth%this.oBlueNumbersImgData.img.width,g=Math.floor(p/(this.oBlueNumbersImgData.img.width/this.oBlueNumbersImgData.oData.spriteWidth))*this.oBlueNumbersImgData.oData.spriteHeight;ctx.drawImage(this.oBlueNumbersImgData.img,c,g,this.oBlueNumbersImgData.oData.spriteWidth,this.oBlueNumbersImgData.oData.spriteHeight,this.windX+d*(63*m*this.windScale)-65*m*this.windScale,canvas.height*this.windYPerc+this.windY+34*this.windScale,this.oBlueNumbersImgData.oData.spriteWidth*m*this.windScale,this.oBlueNumbersImgData.oData.spriteHeight*m*this.windScale)}}if(canvas.width*this.scoreX>0){s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scoreDiagBg].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scoreDiagBg].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scoreDiagBg].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.scoreDiagBg].height;if(ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,0,canvas.height*this.scoreY-n/2*(2*this.scoreX)+5,canvas.width,n*(2*this.scoreX)),"balloons"==aLevelData[levelNum].misc.id&&"levels"==gameMode)if(1==this.scoreNum){s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.balloonScore].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.balloonScore].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.balloonScore].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.balloonScore].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,canvas.width*this.scoreX-r/2,canvas.height*this.scoreY-n/2,r,n)}else{s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,canvas.width*this.scoreX-r/2,canvas.height*this.scoreY-n/2,r,n)}else if("levels"==gameMode){s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,canvas.width*this.scoreX-r/2,canvas.height*this.scoreY-n/2,r,n)}else if("challenge"==gameMode)if(1==this.scoreNum){s=this.oGameElementsImgData.oData.oAtlasData[oImageIds.thumbsUp].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds.thumbsUp].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.thumbsUp].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.thumbsUp].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,canvas.width*this.scoreX-r/2,canvas.height*this.scoreY-n/2,r,n)}else{s=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].x,o=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].y,r=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].width,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds["score"+this.scoreNum]].height;ctx.drawImage(this.oGameElementsImgData.img,s,o,r,n,canvas.width*this.scoreX-r/2,canvas.height*this.scoreY-n/2,r,n)}}firstRun&&(this.tutorial.update(),this.tutorial.render())},e}();t.Hud=e}(Elements||(Elements={})),function(t){var e=function(){function t(){var t=this;this.segNum=200,this.aRowData=new Array,this.horizon=0,this.scrollY=0,this.scrollX=0,this.targScrollSpeed=0,this.scrollSpeed=0,this.scrollInc=0,this.lineRate=1,this.goalScale=.3,this.isFlying=!0,this.jiggleInc=0,this.jiggleRot=0,this.jiggleDamp=1,this.targetCentreY=140,this.groundSkew=0,this.arrowPassedTarget=!1,this.arrowWillHit=!1,this.scaleMultiplier=1.82962962962963,this.oScrollGroundImgData=assetLib.getData("scrollGround"+sceneType),this.oGameElementsImgData=assetLib.getData("gameElements");let e,a=!1;switch(forcedModeProperties.override.slowmotion_mode){case"always":e=!0;break;case"off":a=!0}!a&&(e||"levels"==gameMode&&1==quiver||"challenge"==gameMode&&(levelScore+1)%5==0)?(this.scrollInc=150,this.specialArrowAlpha=1,this.flightTime=.7+.35+.1*archeryView.targPosId,TweenLite.to(this,this.flightTime,{scrollInc:1e3,specialArrowAlpha:0,ease:"Power4.easeIn"})):(this.specialArrowAlpha=0,this.scrollInc=1e3,this.flightTime=.35+.1*archeryView.targPosId),this.shotAngle=5,this.hitBalloon=!1,this.targetScale=.17,this.targetX=-500*this.flightTime,this.targetY=800*-this.flightTime,this.arrowX=canvas.width/3,this.arrowY=canvas.height-150,this.arrowScale=3,this.arrowRot=-18*radian;this.localMoveIncX=moveIncX*this.scaleMultiplier,this.localMoveIncY=moveIncY*this.scaleMultiplier,this.localMoveDistSeg=moveDistSeg*this.scaleMultiplier;var i=Math.sqrt(hitPosX*hitPosX+hitPosY*hitPosY),s=0+1*hitTargetRadius*hitPosX,o=this.targetCentreY+1*hitTargetRadius*hitPosY;TweenLite.to(this,this.flightTime,{targetScale:1,targetY:this.targetCentreY,targetX:0,ease:"Quad.easeIn",onComplete:function(){t.arrowPassedTarget=!0,t.isFlying=!1}}),setTimeout((function(){playSound("landTarget"+Math.floor(3*Math.random()))}),1e3*(this.flightTime-.35)),TweenLite.to(this,this.flightTime,{arrowX:s,arrowY:o,arrowScale:.4,ease:"Quad.easeInOut",onComplete:function(){if("balloons"==aLevelData[levelNum].misc.id&&"levels"==gameMode){for(var e=0;e<aLevelBalloonData.length;e++){var a=-Math.cos(targRot+aLevelBalloonData[e].rot)*aLevelBalloonData[e].hyp,i=-Math.sin(targRot+aLevelBalloonData[e].rot)*aLevelBalloonData[e].hyp,s=t.arrowX-a,o=t.arrowY-t.targetCentreY-i;if(Math.sqrt(s*s+o*o)<28.3*aLevelBalloonData[e].scale){switch(addPop(aLevelBalloonData[e].colour,canvas.width/2+t.targetX+a*t.targetScale,t.targetY+i*t.targetScale,1*aLevelBalloonData[e].scale),addFirework(0,canvas.width/2+t.targetX+a*t.targetScale,t.targetY+i*t.targetScale,.6*aLevelBalloonData[e].scale),aLevelBalloonData[e].colour){case 0:t.hitBalloon="red";break;case 1:t.hitBalloon="purple";break;case 2:t.hitBalloon="green";break;case 3:t.hitBalloon="pink";break;case 4:t.hitBalloon="yellow";break;case 5:t.hitBalloon="blue";break;case 6:t.hitBalloon="orange";break;default:console.log("no color found!")}aLevelBalloonData.splice(e,1),playSound("pop"+Math.floor(2*Math.random()))}}hud.showBalloonScore(t.hitBalloon),TweenLite.to(t,1,{jiggleDamp:0,ease:"Quad.easeOut",onComplete:function(){}})}else if("challenge"==gameMode){a=-Math.cos(targRot+oChallengeBalloon.rot)*oChallengeBalloon.hyp,i=-Math.sin(targRot+oChallengeBalloon.rot)*oChallengeBalloon.hyp,s=t.arrowX-a,o=t.arrowY-t.targetCentreY-i;Math.sqrt(s*s+o*o)<28.3*oChallengeBalloon.scale&&(addPop(challengeLevelNum%7,canvas.width/2+t.targetX+a*t.targetScale,t.targetY+i*t.targetScale,1*oChallengeBalloon.scale),addFirework(0,canvas.width/2+t.targetX+a*t.targetScale,t.targetY+i*t.targetScale,.6*oChallengeBalloon.scale),t.hitBalloon=!0,playSound("pop"+Math.floor(2*Math.random()))),hud.showBalloonScore(t.hitBalloon),TweenLite.to(t,1,{jiggleDamp:0,ease:"Quad.easeOut",onComplete:function(){}})}else t.arrowHitTarget()}}),i<1||o>this.targetCentreY+1*archeryView.groundToHit?this.arrowWillHit=!0:this.arrowWillHit=!1;for(var r=0;r<this.segNum;r++)this.aRowData.push({y:0,scale:0})}return t.prototype.arrowHitTarget=function(){var t=this.arrowX,e=this.arrowY-140,a=Math.max(10-Math.floor(Math.sqrt(t*t+e*e)/12),0);if("levels"==gameMode&&(aLevelData[levelNum].targType>0&&3!=aLevelData[levelNum].targType))if(aLevelData[levelNum].targType<3){var i=100*-Math.cos(targRot+180*radian),s=100*-Math.sin(targRot+180*radian);if(t=this.arrowX-i,e=this.arrowY-this.targetCentreY-s,Math.sqrt(t*t+e*e)<83.18&&(a=0),2==aLevelData[levelNum].targType){i=100*-Math.cos(targRot+0*radian),s=100*-Math.sin(targRot+0*radian);t=this.arrowX-i,e=this.arrowY-this.targetCentreY-s,Math.sqrt(t*t+e*e)<83.18&&(a=0)}}else if(aLevelData[levelNum].targType>3){i=63.25*-Math.cos(targRot+0*radian),s=63.25*-Math.sin(targRot+0*radian);if(t=this.arrowX-i,e=this.arrowY-this.targetCentreY-s,Math.sqrt(t*t+e*e)<36.738&&(a=0),aLevelData[levelNum].targType>4){i=63.25*-Math.cos(targRot+120*radian),s=63.25*-Math.sin(targRot+120*radian);t=this.arrowX-i,e=this.arrowY-this.targetCentreY-s,Math.sqrt(t*t+e*e)<36.738&&(a=0)}if(aLevelData[levelNum].targType>5){i=63.25*-Math.cos(targRot+240*radian),s=63.25*-Math.sin(targRot+240*radian);t=this.arrowX-i,e=this.arrowY-this.targetCentreY-s,Math.sqrt(t*t+e*e)<36.738&&(a=0)}}TweenLite.to(this,1,{jiggleDamp:0,ease:"Quad.easeOut",onComplete:function(){}}),window.famobi_analytics.trackStats("target_hit",{value:a}),hud.showScore(a)},t.prototype.setThinLine=function(){ctx.strokeStyle="#8F8B7B",ctx.lineWidth=7.5*this.targetScale},t.prototype.update=function(){this.isFlying?(this.scrollY-=this.scrollInc*delta,this.scrollY<0&&(this.scrollY+=500),this.targScrollSpeed=0):this.arrowWillHit&&(this.jiggleInc+=delta,this.jiggleRot=Math.sin(20*this.jiggleInc)/10*this.jiggleDamp),this.groundSkew=Math.max(canvas.width/canvas.height/-4,-.8)},t.prototype.render=function(){ctx.fillStyle="rgba(0, 0, 0, 1)",ctx.fillRect(0,0,canvas.width,canvas.height);for(var t=500/this.segNum,e=0,a=1500,i=0;i<this.segNum;i++){this.tempInc=i,this.easeInc=-1*(Math.sqrt(1-(this.tempInc/=this.segNum)*this.tempInc)-1)+0,this.nextRow=i+1,this.segHeightAfter=-1*(Math.sqrt(1-(this.nextRow/=this.segNum)*this.nextRow)-1)+0-this.easeInc;var s=1.4*canvas.height;if(this.aRowData[i].y=this.horizon+this.easeInc*s,0==e&&(this.rowId=i),(e+=this.segHeightAfter*s)>this.lineRate)(o=(i/this.segNum*(a/this.shotAngle)+this.scrollX)%2e3)<0&&(o+=2e3),ctx.drawImage(this.oScrollGroundImgData.img,o,this.rowId*t+this.scrollY,2e3-i/this.segNum*a,t,(canvas.width-1200)/2,this.aRowData[this.rowId].y,1200,e+1),e=0}var o;(o=this.scrollX/3%a)<0&&(o+=a);var r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.fadeBorder1].x,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.fadeBorder1].y,l=this.oGameElementsImgData.oData.oAtlasData[oImageIds.fadeBorder1].width,h=this.oGameElementsImgData.oData.oAtlasData[oImageIds.fadeBorder1].height;ctx.drawImage(this.oGameElementsImgData.img,r,n,l,h,canvas.width/2-600,0,l,canvas.height);r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.fadeBorder0].x,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.fadeBorder0].y,l=this.oGameElementsImgData.oData.oAtlasData[oImageIds.fadeBorder0].width,h=this.oGameElementsImgData.oData.oAtlasData[oImageIds.fadeBorder0].height;ctx.drawImage(this.oGameElementsImgData.img,r,n,l,h,canvas.width/2+600-l,0,l,canvas.height);switch(ctx.strokeStyle="#6D695C",ctx.lineWidth=15*this.targetScale,ctx.lineCap="round",oTargetType.id){case"horiz":ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY),ctx.stroke();break;case"vert":ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX,this.targetY-(this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX,this.targetY-(this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.stroke();break;case"diag0":ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncX)*this.targetScale,this.targetY-(this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncX)*this.targetScale,this.targetY-(this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.stroke();break;case"diag1":ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist+this.localMoveIncX)*this.targetScale,this.targetY-(this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist+this.localMoveIncX)*this.targetScale,this.targetY-(this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.stroke();break;case"circle0":case"circle1":ctx.beginPath(),ctx.arc(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale-this.scaleMultiplier*oTargetType.moveDist*200*this.targetScale,this.scaleMultiplier*oTargetType.moveDist*200*this.targetScale,0,2*Math.PI,!1),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.arc(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale-this.scaleMultiplier*oTargetType.moveDist*200*this.targetScale,this.scaleMultiplier*oTargetType.moveDist*200*this.targetScale,0,2*Math.PI,!1),ctx.stroke();break;case"triangle0":ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.stroke();break;case"triangle1":ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+this.localMoveIncX*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.stroke();break;case"square":ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.stroke(),this.setThinLine(),ctx.beginPath(),ctx.moveTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX+(this.localMoveDistSeg*oTargetType.moveDist/2+this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY-(.8*this.localMoveDistSeg*oTargetType.moveDist-this.localMoveIncY)*this.targetScale),ctx.lineTo(canvas.width/2+this.targetX-(this.localMoveDistSeg*oTargetType.moveDist/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale),ctx.stroke()}r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.stand].x,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.stand].y,l=this.oGameElementsImgData.oData.oAtlasData[oImageIds.stand].width,h=this.oGameElementsImgData.oData.oAtlasData[oImageIds.stand].height;ctx.drawImage(this.oGameElementsImgData.img,r,n,l,h,canvas.width/2+this.targetX-(l/2-this.localMoveIncX)*this.targetScale,this.targetY+this.localMoveIncY*this.targetScale,l*this.targetScale,h*this.targetScale);r=this.oGameElementsImgData.oData.oAtlasData[oImageIds["target"+archeryView.targStyle]].x,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds["target"+archeryView.targStyle]].y,l=this.oGameElementsImgData.oData.oAtlasData[oImageIds["target"+archeryView.targStyle]].width,h=this.oGameElementsImgData.oData.oAtlasData[oImageIds["target"+archeryView.targStyle]].height;if(ctx.save(),ctx.translate(canvas.width/2+this.targetX,this.targetY),ctx.rotate(targRot),ctx.scale(this.targetScale,this.targetScale),ctx.drawImage(this.oGameElementsImgData.img,r,n,l,h,-l/2,-h/2,l,h),ctx.restore(),"balloons"==aLevelData[levelNum].misc.id&&"levels"==gameMode)for(i=0;i<aLevelBalloonData.length;i++){r=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloon"+aLevelBalloonData[i].colour]].x,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloon"+aLevelBalloonData[i].colour]].y,l=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloon"+aLevelBalloonData[i].colour]].width,h=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloon"+aLevelBalloonData[i].colour]].height;ctx.drawImage(this.oGameElementsImgData.img,r,n,l,h,canvas.width/2+this.targetX-l/2*aLevelBalloonData[i].scale*this.targetScale+(-Math.cos(targRot+aLevelBalloonData[i].rot)*aLevelBalloonData[i].hyp+2.5*aLevelBalloonData[i].scale)*this.targetScale,this.targetY-h/2*aLevelBalloonData[i].scale*this.targetScale+(-Math.sin(targRot+aLevelBalloonData[i].rot)*aLevelBalloonData[i].hyp+7*aLevelBalloonData[i].scale)*this.targetScale,l*this.targetScale*aLevelBalloonData[i].scale,l*this.targetScale*aLevelBalloonData[i].scale)}else if("challenge"==gameMode&&!this.hitBalloon){r=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloon"+challengeLevelNum%7]].x,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloon"+challengeLevelNum%7]].y,l=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloon"+challengeLevelNum%7]].width,h=this.oGameElementsImgData.oData.oAtlasData[oImageIds["balloon"+challengeLevelNum%7]].height;ctx.drawImage(this.oGameElementsImgData.img,r,n,l,h,canvas.width/2+this.targetX-l/2*oChallengeBalloon.scale*this.targetScale+(-Math.cos(targRot+oChallengeBalloon.rot)*oChallengeBalloon.hyp+2.5*oChallengeBalloon.scale)*this.targetScale,this.targetY-h/2*oChallengeBalloon.scale*this.targetScale+(-Math.sin(targRot+oChallengeBalloon.rot)*oChallengeBalloon.hyp+7*oChallengeBalloon.scale)*this.targetScale,l*this.targetScale*oChallengeBalloon.scale,l*this.targetScale*oChallengeBalloon.scale)}this.renderArrow();for(i=0;i<aArrowsFired.length;i++)if(aArrowsFired[i].hitTarget){r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowShadow].x,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowShadow].y,l=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowShadow].width,h=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowShadow].height;ctx.drawImage(this.oGameElementsImgData.img,r,n,l,h,canvas.width/2+this.targetX+(Math.cos(targRot+aArrowsFired[i].rot)*aArrowsFired[i].hyp*hitTargetRadius-l/2)*this.targetScale,this.targetY+(Math.sin(targRot+aArrowsFired[i].rot)*aArrowsFired[i].hyp*hitTargetRadius-4)*this.targetScale,l*this.targetScale,h*this.targetScale),ctx.save(),ctx.translate(canvas.width/2+this.targetX+Math.cos(targRot+aArrowsFired[i].rot)*aArrowsFired[i].hyp*hitTargetRadius*this.targetScale,this.targetY+Math.sin(targRot+aArrowsFired[i].rot)*aArrowsFired[i].hyp*hitTargetRadius*this.targetScale),ctx.rotate(this.arrowRot+this.groundSkew+Math.sin(1e3*(i+1+levelNum))/6),ctx.scale(.4,.4);r=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlight].x,n=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlight].y,l=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlight].width,h=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlight].height;ctx.drawImage(this.oGameElementsImgData.img,r,n,l,h,-l/2,1,l,h),ctx.restore()}},t.prototype.renderArrow=function(){if(!this.isFlying&&this.arrowWillHit){var t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowShadow].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowShadow].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowShadow].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowShadow].height;ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,canvas.width/2+this.arrowX-a/2*this.targetScale,this.arrowY-4*this.targetScale,a*this.targetScale,i*this.targetScale)}if(this.isFlying||this.arrowWillHit){ctx.save(),ctx.translate(canvas.width/2+this.arrowX,this.arrowY),ctx.rotate(this.arrowRot+this.jiggleRot+this.groundSkew),ctx.scale(this.arrowScale,this.arrowScale);t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlight].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlight].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlight].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlight].height;if(ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,-a/2,0,a,i),this.specialArrowAlpha>0){ctx.globalAlpha=this.specialArrowAlpha-Math.random()*this.specialArrowAlpha/5;t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlightSpecial].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlightSpecial].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlightSpecial].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.arrowInFlightSpecial].height;ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,-a/2,0,a,i)}}else{var t=this.oGameElementsImgData.oData.oAtlasData[oImageIds.missCross].x,e=this.oGameElementsImgData.oData.oAtlasData[oImageIds.missCross].y,a=this.oGameElementsImgData.oData.oAtlasData[oImageIds.missCross].width,i=this.oGameElementsImgData.oData.oAtlasData[oImageIds.missCross].height;ctx.drawImage(this.oGameElementsImgData.img,t,e,a,i,canvas.width/2+this.arrowX-a/2,this.arrowY-i/2,a,i)}ctx.restore()},t}();t.ScrollGround=e}(Elements||(Elements={})),function(t){var e=function(){function t(){this.oTextData={},this.inc=0,this.createTextObjects()}return t.prototype.createTextObjects=function(){for(var t in assetLib.textData.langText.text[curLang])this.oTextData[t]={},this.oTextData[t].aLineData=this.getCharData(assetLib.textData.langText.text[curLang][t]["@text"],assetLib.textData.langText.text[curLang][t]["@fontId"]),this.oTextData[t].aLineWidths=this.getLineWidths(this.oTextData[t].aLineData),this.oTextData[t].blockWidth=this.getBlockWidth(this.oTextData[t].aLineData),this.oTextData[t].blockHeight=this.getBlockHeight(this.oTextData[t].aLineData,assetLib.textData.langText.text[curLang][t]["@fontId"]),this.oTextData[t].lineHeight=parseInt(assetLib.textData["fontData"+assetLib.textData.langText.text[curLang][t]["@fontId"]].text.common["@lineHeight"]),this.oTextData[t].oFontImgData=assetLib.getData("font"+assetLib.textData.langText.text[curLang][t]["@fontId"])},t.prototype.getLineWidths=function(t){for(var e,a=new Array,i=0;i<t.length;i++){e=0;for(var s=0;s<t[i].length;s++)e+=parseInt(t[i][s]["@xadvance"]),0==s?e-=parseInt(t[i][s]["@xoffset"]):s==t[i].length-1&&(e+=parseInt(t[i][s]["@xoffset"]));a.push(e)}return a},t.prototype.getBlockWidth=function(t){for(var e,a=0,i=0;i<t.length;i++){e=0;for(var s=0;s<t[i].length;s++)e+=parseInt(t[i][s]["@xadvance"]),0==s?e-=parseInt(t[i][s]["@xoffset"]):s==t[i].length-1&&(e+=parseInt(t[i][s]["@xoffset"]));e>a&&(a=e)}return a},t.prototype.getBlockHeight=function(t,e){return t.length*parseInt(assetLib.textData["fontData"+e].text.common["@lineHeight"])},t.prototype.getCharData=function(t,e){for(var a=new Array,i=0;i<t.length;i++){a[i]=new Array;for(var s=0;s<t[i].length;s++)for(var o=0;o<assetLib.textData["fontData"+e].text.chars.char.length;o++)t[i][s].charCodeAt()==assetLib.textData["fontData"+e].text.chars.char[o]["@id"]&&a[i].push(assetLib.textData["fontData"+e].text.chars.char[o])}return a},t.prototype.renderText=function(t){var e,a=this.oTextData[t.text].aLineData,i=this.oTextData[t.text].oFontImgData,s=0,o=0,r=0,n=1,l=0;t.lineOffsetY&&(r=t.lineOffsetY),t.scale&&(n=t.scale);var h=1*n;t.maxWidth&&this.oTextData[t.text].blockWidth*n>t.maxWidth&&(h=t.maxWidth/this.oTextData[t.text].blockWidth),t.anim&&(this.inc+=7*delta);for(var m=0;m<a.length;m++){e=0,"centre"==t.alignX&&(s=this.oTextData[t.text].aLineWidths[m]/2),"centre"==t.alignY&&(o=this.oTextData[t.text].blockHeight/2+r*(a.length-1)/2);for(var d=0;d<a[m].length;d++){var c=a[m][d]["@x"],g=a[m][d]["@y"],u=a[m][d]["@width"],p=a[m][d]["@height"];t.anim&&(l=Math.sin(this.inc+d/2)*(p/15*h)),ctx.drawImage(i.img,c,g,u,p,t.x+(e+parseInt(a[m][d]["@xoffset"])-s)*h,t.y+(parseInt(a[m][d]["@yoffset"])+m*this.oTextData[t.text].lineHeight+m*r-o)*h+l,u*h,p*h),e+=parseInt(a[m][d]["@xadvance"])}}},t}();t.TextDisplay=e}(Utils||(Utils={}));var Elements,Utils,__extends=this.__extends||function(t,e){function a(){this.constructor=t}a.prototype=e.prototype,t.prototype=new a};!function(t){var e=function(t){function e(e,a,i){t.call(this,e,25,45,a),this.setAnimType("once",a),this.shouldFall=i,this.animEndedFunc=function(){this.removeMe=!0}}return __extends(e,t),e.prototype.update=function(){t.prototype.updateAnimation.call(this,delta),this.shouldFall&&(this.y+=100*delta)},e.prototype.render=function(){t.prototype.renderSimple.call(this,ctx)},e}(Utils.AnimSprite);t.Firework=e}(Elements||(Elements={})),function(t){var e=function(t){function e(e,a){t.call(this,e,15,45,a),this.setAnimType("loop",a),this.frameInc=Math.floor(18*Math.random()),this.driftX=1*Math.random()-.5,this.driftY=1*Math.random()-.5}return __extends(e,t),e.prototype.update=function(){t.prototype.updateAnimation.call(this,delta),this.scaleX=archeryView.zoomScale,archeryView.isStartScreen?(this.x+=(this.driftX+1)*Math.cos(25*radian)*delta*50*this.scaleX,this.y+=(this.driftY+1)*Math.sin(25*radian)*delta*50*this.scaleX):(this.x+=(this.driftX+hud.windPower)*Math.cos(hud.windDir)*delta*50*this.scaleX,this.y+=(this.driftY+hud.windPower)*Math.sin(hud.windDir)*delta*50*this.scaleX),this.x>canvas.width+120*this.scaleX?this.x=-120:this.x<-120&&(this.x=canvas.width+120*this.scaleX),this.y>canvas.height+100*this.scaleX?this.y=-100:this.y<-100&&(this.y=canvas.height+100*this.scaleX)},e.prototype.render=function(){t.prototype.renderSimple.call(this,ctx)},e}(Utils.AnimSprite);t.Drifters=e}(Elements||(Elements={})),function(t){var e=function(t){function e(e){t.call(this,e,15,45,"tut0"),this.tutBg=0,this.oUiElementsImgData=assetLib.getData(window.famobi.hasFeature("leaderboard")?"uiElements":"uiElements2"),this.setAnimType("once","tut0"),this.animEndedFunc=this.switchBg1}return __extends(e,t),e.prototype.switchBg1=function(){this.setAnimType("once","tut1"),this.tutBg=1,this.animEndedFunc=this.switchBg0},e.prototype.switchBg0=function(){this.setAnimType("once","tut0"),this.tutBg=0,this.animEndedFunc=this.switchBg1},e.prototype.update=function(){t.prototype.updateAnimation.call(this,delta),this.x=canvas.width/2,this.y=canvas.height/2},e.prototype.render=function(){ctx.fillStyle="rgba(0, 0, 0, 0.75)",ctx.fillRect(0,0,canvas.width,canvas.height);var e=this.oUiElementsImgData.oData.oAtlasData[oImageIds["tutBg"+this.tutBg]].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds["tutBg"+this.tutBg]].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds["tutBg"+this.tutBg]].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds["tutBg"+this.tutBg]].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,this.x-i/2,this.y-s/2,i,s),t.prototype.renderSimple.call(this,ctx)},e}(Utils.AnimSprite);t.Tutorial=e}(Elements||(Elements={})),function(t){var e=function(t){function e(e){t.call(this,e,25,45,"fly"),this.reset()}return __extends(e,t),e.prototype.reset=function(){this.posX=Math.random()*(canvas.width+500)-(canvas.width+500)/2,this.speed=10*Math.random()+30,this.posY=200*Math.random()+150,this.scaleX=this.scaleY=.7*Math.random()+.2},e.prototype.update=function(){t.prototype.updateAnimation.call(this,delta),this.posX+=this.speed*delta*this.scaleX,this.x>canvas.width+250&&(this.posX=-(canvas.width+500)/2,this.speed=10*Math.random()+30,this.posY=200*Math.random()+150,this.scaleX=this.scaleY=.7*Math.random()+.2),this.x=canvas.width/2+this.posX*archeryView.zoomScale,this.y=canvas.height/2-this.posY*archeryView.zoomScale},e.prototype.render=function(){t.prototype.renderSimple.call(this,ctx)},e}(Utils.AnimSprite);t.Bird=e}(Elements||(Elements={})),function(t){var e=function(){function t(t){this.dataGroupNum=2,this.oHighscoreData={},this.saveDataId=t,this.oHighscoreData={stats:{day:{highscore:0,rank:0,total:0},week:{highscore:0,rank:0,total:0},month:{highscore:0,rank:0,total:0},ever:{highscore:0,rank:0,total:0}}},window.famobi=window.famobi?window.famobi:{},window.famobi.localStorage=window.famobi.localStorage?window.famobi.localStorage:window.localStorage,window.famobi.sessionStorage=window.famobi.sessionStorage?window.famobi.sessionStorage:window.sessionStorage}return t.prototype.init=function(t){this.clearData(),this.setInitialData();var e=this;if(lastUnlockedLevel=this.getLastUnlockedLevel(),window.famobi.hasFeature("leaderboard"))try{window.simpleHighscoreAPI.get((function(a){e.setHighscores(a),t()}))}catch(e){t()}else t()},t.prototype.getLevelData=function(t){return{levelState:this.aLevelStore[2*t+1],score:this.aLevelStore[2*t+1+1]}},t.prototype.setHighscores=function(t){this.oHighscoreData=t},t.prototype.setLevelData=function(t,e,a){this.aLevelStore[2*t+1]=e,a>this.aLevelStore[2*t+1]&&(this.aLevelStore[2*t+1+1]=a),this.saveData()},t.prototype.setChallengeHighscore=function(t){if(window.famobi.hasFeature("leaderboard")){var e=this;try{window.simpleHighscoreAPI.set(t,(function(t){e.setHighscores(t)}))}catch(t){}}else this.oHighscoreData.stats.ever.highscore=Math.max(this.oHighscoreData.stats.ever.highscore,t),this.saveData()},t.prototype.getTotalScore=function(){for(var t=0,e=0;e<(this.aLevelStore.length-1)/2;e++)t+=this.aLevelStore[2*e+1+1];return t},t.prototype.getLastUnlockedLevel=function(){for(var t=-1,e=0;e<(this.aLevelStore.length-1)/2;e++)if(1==this.aLevelStore[2*e+1]){t=e;break}return t},t.prototype.clearData=function(){this.aLevelStore=new Array,this.aLevelStore.push(0),this.aLevelStore.push(1),this.aLevelStore.push(0);for(var t=0;t<49;t++)this.aLevelStore.push(0),this.aLevelStore.push(0)},t.prototype.resetData=function(){this.clearData(),this.saveData()},t.prototype.setInitialData=function(){if(null!=window.famobi.localStorage.getItem(this.saveDataId)&&""!=window.famobi.localStorage.getItem(this.saveDataId)){for(var t in this.aLevelStore=window.famobi.localStorage.getItem(this.saveDataId).split(","),this.aLevelStore)this.aLevelStore[t]=parseInt(this.aLevelStore[t]);window.famobi.hasFeature("leaderboard")||(this.oHighscoreData.stats.ever.highscore=window.famobi.localStorage.getItem(this.saveDataId+"_challengeHS")||0)}else this.saveData()},t.prototype.saveData=function(){for(var t="",e=0;e<this.aLevelStore.length;e++)t+=this.aLevelStore[e],e<this.aLevelStore.length-1&&(t+=",");window.famobi.localStorage.setItem(this.saveDataId,t),window.famobi.hasFeature("leaderboard")||window.famobi.localStorage.setItem(this.saveDataId+"_challengeHS",this.oHighscoreData.stats.ever.highscore||0)},t}();t.SaveDataHandler=e}(Utils||(Utils={}));var previousTime,canvasX,canvasY,canvasScale,sound,music,assetLib,preAssetLib,delta,requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60,(new Date).getTime())},canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),minSquareSize=500,maxSquareSize=700,div=document.getElementById("canvas-wrapper"),audioType=0,muted=!1,splashTimer=0,isMobile=!1,gameState="loading",aLangs=new Array("EN"),curLang="",isBugBrowser=!1,isIE10=!1,radian=Math.PI/180,ios9FirstTouch=!1,hasFocus=!0,firstRun=!0,testVar="",saveDataHandler=new Utils.SaveDataHandler("awtfamobiv1"),famobiPauseActive=!1;navigator.userAgent.match(/MSIE\s([\d]+)/)&&(isIE10=!0);var deviceAgent=navigator.userAgent.toLowerCase();(deviceAgent.match(/(iphone|ipod|ipad)/)||deviceAgent.match(/(android)/)||deviceAgent.match(/(iemobile)/)||deviceAgent.match(/iphone/i)||deviceAgent.match(/ipad/i)||deviceAgent.match(/ipod/i)||deviceAgent.match(/blackberry/i)||deviceAgent.match(/bada/i))&&(isMobile=!0,deviceAgent.match(/(android)/)&&!/Chrome/.test(navigator.userAgent)&&(isBugBrowser=!0));var userInput=new Utils.UserInput(canvas,isBugBrowser);function visibleResume(){famobiPauseActive||(hasFocus||(userInput&&userInput.checkKeyFocus(),muted||"pause"==gameState||"splash"==gameState||"loading"==gameState||(Howler.mute(!1),playMusic())),hasFocus=!0)}function visiblePause(){famobiPauseActive||(hasFocus=!1,Howler.mute(!0),music.pause())}function playMusic(){music.playing()||music.play()}function isStock(){var t=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);return t&&parseFloat(t[1])<537}resizeCanvas(),window.onresize=function(){setTimeout((function(){resizeCanvas()}),1)},window.onpageshow=function(){famobiPauseActive||(hasFocus||(userInput&&userInput.checkKeyFocus(),muted||"pause"==gameState||"splash"==gameState||"loading"==gameState||(Howler.mute(!1),playMusic())),hasFocus=!0)},window.onpagehide=function(){famobiPauseActive||(hasFocus=!1,Howler.mute(!0),music.pause())},window.addEventListener("load",(function(){setTimeout((function(){resizeCanvas()}),0),window.addEventListener("orientationchange",(function(){setTimeout((function(){resizeCanvas()}),500),setTimeout((function(){resizeCanvas()}),2e3)}),!1)}));var panel,background,ua=navigator.userAgent,isSharpStock=/SHL24|SH-01F/i.test(ua)&&isStock(),isXperiaAStock=/SO-04E/i.test(ua)&&isStock(),isFujitsuStock=/F-01F/i.test(ua)&&isStock();isIE10||isSharpStock||isXperiaAStock||isFujitsuStock||void 0===window.AudioContext&&void 0===window.webkitAudioContext&&-1!=navigator.userAgent.indexOf("Android")?audioType=0:(audioType=1,sound=new Howl({src:["audio/sound.mp3"],sprite:{gameStart:[0,800],cheer2:[1e3,3500],winGame:[5e3,6500],cheer4:[12e3,5e3],cheer3:[17500,5e3],cheer0:[22500,3500],cheer1:[26500,4500],bow:[31500,1e3],crowdSad:[34e3,3500],gameFail:[38e3,1500],gameSuccess:[4e4,1200],score0:[41500,1500],score1:[43500,2e3],score2:[46e3,1500],score3:[48500,2e3],score4:[51500,1200],shoot0:[53500,1e3],shoot1:[55e3,1e3],shoot2:[56500,1e3],shoot3:[58e3,1e3],shoot4:[59500,1e3],landGround:[61e3,1300],landTarget0:[62500,1700],landTarget1:[64500,1500],landTarget2:[66500,1500],pop0:[68500,600],pop1:[69500,600],click:[70500,500],silence:[600,200]}}),music=new Howl({src:["audio/music.mp3"],volume:0,loop:!0}));var panelFrame,oLogoBut,musicTween,archeryView,bow,scrollGround,hitPosX,hitPosY,aArrowsFired,mapPosX,mapPosRealX,mapPosY,mapPosRealY,hud,aFireworks,aDrifters,quiver,aLevelBalloonData,gameMode,challengeLevelNum,oTargetType,sceneType,oChallengeBalloon,aBirds,totalScore=0,levelScore=0,levelNum=0,aTutorials=new Array,oLogoData={},oImageIds={},aimTargetRadius=78.25,hitTargetRadius=142,aTargetRings=new Array,moveIncX=0,moveIncY=0,moveDistSeg=400,moveState=0,targRot=0,circleAngle=0,aTreeData=new Array,treeNum=10,mapTouchFirst=!1,mapScale=1,aBalloonData=new Array([{rot:2.36,hyp:87.68,scale:1},{rot:.79,hyp:87.68,scale:1},{rot:-.79,hyp:87.68,scale:1},{rot:-2.36,hyp:87.68,scale:1},{rot:3.14,hyp:86,scale:1},{rot:1.57,hyp:86,scale:1},{rot:-1.57,hyp:86,scale:1},{rot:0,hyp:86,scale:1},{rot:0,hyp:0,scale:1}],[{rot:3.14,hyp:80,scale:.8},{rot:1.57,hyp:80,scale:.8},{rot:-1.57,hyp:80,scale:.8},{rot:0,hyp:80,scale:.8},{rot:0,hyp:0,scale:1.18}],[{rot:3.05,hyp:97.42,scale:.6},{rot:-2.67,hyp:66.19,scale:.7},{rot:.11,hyp:84.48,scale:1},{rot:-.79,hyp:42.43,scale:.9},{rot:2.65,hyp:19.24,scale:.8}],[{rot:1.77,hyp:34.71,scale:1.02},{rot:2.4,hyp:93.43,scale:.7},{rot:1.08,hyp:93.06,scale:.67},{rot:-.58,hyp:88.2,scale:.74},{rot:-2.2,hyp:83.01,scale:.67},{rot:-3.07,hyp:86.21,scale:.81},{rot:-1.5,hyp:89.2,scale:.88},{rot:.32,hyp:86.33,scale:.88},{rot:-1.2,hyp:30.08,scale:.63}],[{rot:-1.61,hyp:99.08,scale:.6},{rot:-1.04,hyp:69.46,scale:.7},{rot:1.63,hyp:83.15,scale:1},{rot:.69,hyp:45.45,scale:.9},{rot:-1.79,hyp:18.44,scale:.8}],[{rot:2.36,hyp:96.17,scale:.75},{rot:2.71,hyp:50.57,scale:.75},{rot:-.79,hyp:96.17,scale:.75},{rot:-.43,hyp:50.57,scale:.75},{rot:.79,hyp:96.17,scale:.75},{rot:1.14,hyp:50.57,scale:.75},{rot:-2.36,hyp:96.17,scale:.75},{rot:-2,hyp:50.57,scale:.75},{rot:0,hyp:0,scale:.75}],[{rot:0,hyp:0,scale:.68},{rot:2.35,hyp:95.46,scale:.68},{rot:.79,hyp:96.17,scale:.68},{rot:-.79,hyp:96.17,scale:.68},{rot:-2.35,hyp:95.46,scale:.68},{rot:3.14,hyp:90,scale:.68},{rot:1.57,hyp:90,scale:.68},{rot:-1.57,hyp:91,scale:.68},{rot:0,hyp:91,scale:.68}],[{rot:-.8,hyp:68.59,scale:.94},{rot:-2.32,hyp:69.35,scale:.94},{rot:2.6,hyp:87.46,scale:.75},{rot:1.98,hyp:78.39,scale:.75},{rot:1.27,hyp:75.29,scale:.75},{rot:.59,hyp:84.31,scale:.75}],[{rot:3.14,hyp:100,scale:.6},{rot:3.14,hyp:55,scale:.8},{rot:0,hyp:100,scale:.6},{rot:0,hyp:55,scale:.8},{rot:1.57,hyp:100,scale:.6},{rot:1.57,hyp:54,scale:.8},{rot:-1.57,hyp:100,scale:.6},{rot:-1.57,hyp:56,scale:.8},{rot:0,hyp:0,scale:1}],[{rot:2.46,hyp:42.64,scale:.73},{rot:1.1,hyp:41.59,scale:.73},{rot:-.81,hyp:33.24,scale:.73},{rot:-2.17,hyp:46.04,scale:.73},{rot:2.31,hyp:97.67,scale:.73},{rot:.16,hyp:73.98,scale:.73},{rot:-1.12,hyp:91.24,scale:.73},{rot:-2.49,hyp:95.6,scale:.73},{rot:3.09,hyp:94.13,scale:.73},{rot:.74,hyp:103.32,scale:.73},{rot:-1.8,hyp:95.57,scale:.73},{rot:-.51,hyp:98.49,scale:.73},{rot:1.62,hyp:95.13,scale:.73}]),aLevelData=new Array({id:"static",misc:{id:null,num:null},targType:0,rot:0,bg:0,targPosId:0,moveDist:0,windMin:0,windMax:0,aScoreTargs:[6,8,10],quiver:5,mapX:133,mapY:618},{id:"static",misc:{id:null,num:null},targType:0,rot:0,bg:0,targPosId:1,moveDist:0,windMin:.2,windMax:.7,aScoreTargs:[9,12,15],quiver:3,mapX:271,mapY:649},{id:"static",misc:{id:null,num:null},targType:0,rot:0,bg:0,targPosId:2,moveDist:0,windMin:.4,windMax:.9,aScoreTargs:[12,16,20],quiver:3,mapX:422,mapY:592},{id:"static",misc:{id:null,num:null},targType:0,rot:0,bg:0,targPosId:3,moveDist:0,windMin:.5,windMax:1,aScoreTargs:[15,20,25],quiver:3,mapX:592,mapY:595},{id:"static",misc:{id:"balloons",num:0},targType:3,rot:.1,bg:0,targPosId:1,moveDist:0,windMin:.5,windMax:1,aScoreTargs:[2,3,4],quiver:4,mapX:749,mapY:590},{id:"horiz",misc:{id:null,num:null},targType:0,rot:0,bg:0,targPosId:0,moveDist:.3,windMin:0,windMax:0,aScoreTargs:[20,25,30],quiver:4,mapX:862,mapY:499},{id:"horiz",misc:{id:null,num:null},targType:0,rot:0,bg:0,targPosId:1,moveDist:.3,windMin:.5,windMax:1,aScoreTargs:[20,25,30],quiver:4,mapX:720,mapY:435},{id:"horiz",misc:{id:null,num:null},targType:0,rot:0,bg:0,targPosId:2,moveDist:.3,windMin:.75,windMax:1.25,aScoreTargs:[20,25,30],quiver:4,mapX:564,mapY:443},{id:"horiz",misc:{id:null,num:null},targType:0,rot:0,bg:0,targPosId:3,moveDist:.3,windMin:1,windMax:1.5,aScoreTargs:[20,25,30],quiver:4,mapX:400,mapY:449},{id:"vert",misc:{id:"balloons",num:1},targType:3,rot:.1,bg:0,targPosId:0,moveDist:.2,windMin:0,windMax:0,aScoreTargs:[2,3,4],quiver:4,mapX:269,mapY:412},{id:"vert",misc:{id:null,num:null},targType:4,rot:.2,bg:1,targPosId:1,moveDist:.2,windMin:.5,windMax:1,aScoreTargs:[25,30,35],quiver:4,mapX:177,mapY:307},{id:"vert",misc:{id:null,num:null},targType:0,rot:0,bg:1,targPosId:2,moveDist:.2,windMin:1,windMax:2,aScoreTargs:[25,30,35],quiver:4,mapX:139,mapY:163},{id:"vert",misc:{id:null,num:null},targType:0,rot:0,bg:1,targPosId:3,moveDist:.2,windMin:1,windMax:2,aScoreTargs:[27,31,35],quiver:4,mapX:277,mapY:186},{id:"diag0",misc:{id:null,num:null},targType:4,rot:-.2,bg:1,targPosId:1,moveDist:.2,windMin:1,windMax:2,aScoreTargs:[27,31,35],quiver:4,mapX:357,mapY:304},{id:"diag1",misc:{id:"balloons",num:2},targType:3,rot:-.15,bg:1,targPosId:2,moveDist:.2,windMin:1,windMax:1.5,aScoreTargs:[2,3,4],quiver:4,mapX:433,mapY:171},{id:"diag0",misc:{id:null,num:null},targType:0,rot:0,bg:1,targPosId:3,moveDist:.2,windMin:1,windMax:2,aScoreTargs:[30,33,36],quiver:4,mapX:518,mapY:300},{id:"circle0",misc:{id:null,num:null},targType:5,rot:.2,bg:1,targPosId:0,moveDist:.2,windMin:1,windMax:2,aScoreTargs:[30,33,36],quiver:4,mapX:587,mapY:160},{id:"circle1",misc:{id:null,num:null},targType:0,rot:0,bg:1,targPosId:1,moveDist:.3,windMin:1,windMax:2,aScoreTargs:[30,33,36],quiver:4,mapX:666,mapY:300},{id:"circle0",misc:{id:null,num:null},targType:4,rot:-.2,bg:1,targPosId:2,moveDist:.4,windMin:1,windMax:2,aScoreTargs:[30,33,36],quiver:4,mapX:761,mapY:171},{id:"circle1",misc:{id:"balloons",num:3},targType:3,rot:.15,bg:1,targPosId:1,moveDist:.5,windMin:1,windMax:2,aScoreTargs:[3,4,5],quiver:5,mapX:823,mapY:296},{id:"static",misc:{id:null,num:null},targType:1,rot:-.2,bg:2,targPosId:0,moveDist:0,windMin:1,windMax:2,aScoreTargs:[30,34,37],quiver:4,mapX:949,mapY:373},{id:"static",misc:{id:null,num:null},targType:1,rot:.3,bg:2,targPosId:1,moveDist:0,windMin:1,windMax:2,aScoreTargs:[30,34,37],quiver:4,mapX:974,mapY:241},{id:"static",misc:{id:null,num:null},targType:1,rot:-.4,bg:2,targPosId:2,moveDist:0,windMin:1,windMax:2,aScoreTargs:[30,34,37],quiver:4,mapX:1089,mapY:162},{id:"static",misc:{id:null,num:null},targType:1,rot:.5,bg:2,targPosId:3,moveDist:0,windMin:1,windMax:2,aScoreTargs:[30,34,37],quiver:4,mapX:1240,mapY:147},{id:"triangle0",misc:{id:"balloons",num:4},targType:3,rot:-.2,bg:2,targPosId:1,moveDist:.4,windMin:1,windMax:2,aScoreTargs:[3,4,5],quiver:5,mapX:1361,mapY:232},{id:"horiz",misc:{id:null,num:null},targType:1,rot:.2,bg:2,targPosId:0,moveDist:.3,windMin:1,windMax:1.5,aScoreTargs:[31,34,37],quiver:4,mapX:1358,mapY:373},{id:"vert",misc:{id:null,num:null},targType:6,rot:-.2,bg:2,targPosId:1,moveDist:.2,windMin:1,windMax:1.5,aScoreTargs:[31,34,37],quiver:4,mapX:1335,mapY:500},{id:"horiz",misc:{id:null,num:null},targType:1,rot:.3,bg:2,targPosId:2,moveDist:.3,windMin:1,windMax:1.5,aScoreTargs:[31,34,37],quiver:4,mapX:1191,mapY:441},{id:"vert",misc:{id:null,num:null},targType:6,rot:-.3,bg:2,targPosId:3,moveDist:.2,windMin:1,windMax:1.5,aScoreTargs:[31,34,37],quiver:4,mapX:1062,mapY:474},{id:"horiz",misc:{id:"balloons",num:5},targType:3,rot:.3,bg:2,targPosId:2,moveDist:.3,windMin:1,windMax:1.5,aScoreTargs:[3,4,5],quiver:5,mapX:1e3,mapY:592},{id:"triangle0",misc:{id:null,num:null},targType:0,rot:0,bg:3,targPosId:1,moveDist:.4,windMin:1.5,windMax:2,aScoreTargs:[31,34,37],quiver:4,mapX:924,mapY:702},{id:"triangle1",misc:{id:null,num:null},targType:4,rot:.3,bg:3,targPosId:2,moveDist:.4,windMin:1.5,windMax:2,aScoreTargs:[31,34,37],quiver:4,mapX:757,mapY:746},{id:"triangle0",misc:{id:null,num:null},targType:1,rot:-.25,bg:3,targPosId:3,moveDist:.4,windMin:1.5,windMax:2,aScoreTargs:[31,34,37],quiver:4,mapX:865,mapY:842},{id:"triangle1",misc:{id:null,num:null},targType:1,rot:.25,bg:3,targPosId:2,moveDist:.3,windMin:1.5,windMax:2,aScoreTargs:[31,34,37],quiver:4,mapX:1033,mapY:831},{id:"triangle0",misc:{id:"balloons",num:6},targType:3,rot:.25,bg:3,targPosId:0,moveDist:.3,windMin:1.5,windMax:2,aScoreTargs:[3,4,5],quiver:5,mapX:1119,mapY:697},{id:"square",misc:{id:null,num:null},targType:1,rot:.3,bg:3,targPosId:0,moveDist:.3,windMin:1,windMax:2,aScoreTargs:[33,35,37],quiver:4,mapX:1275,mapY:679},{id:"square",misc:{id:null,num:null},targType:2,rot:-.15,bg:3,targPosId:1,moveDist:.3,windMin:1,windMax:2,aScoreTargs:[33,35,37],quiver:4,mapX:1351,mapY:779},{id:"square",misc:{id:null,num:null},targType:6,rot:.15,bg:3,targPosId:2,moveDist:.3,windMin:1,windMax:2,aScoreTargs:[33,35,37],quiver:4,mapX:1361,mapY:914},{id:"square",misc:{id:null,num:null},targType:2,rot:-.15,bg:3,targPosId:3,moveDist:.3,windMin:.5,windMax:1,aScoreTargs:[33,35,37],quiver:4,mapX:1230,mapY:982},{id:"square",misc:{id:"balloons",num:7},targType:3,rot:.25,bg:3,targPosId:2,moveDist:.3,windMin:1.5,windMax:2.5,aScoreTargs:[3,4,5],quiver:5,mapX:1062,mapY:998},{id:"circle1",misc:{id:null,num:null},targType:0,rot:.4,bg:4,targPosId:3,moveDist:.3,windMin:1.7,windMax:2.5,aScoreTargs:[33,35,37],quiver:4,mapX:900,mapY:998},{id:"vert",misc:{id:null,num:null},targType:6,rot:.2,bg:4,targPosId:2,moveDist:.2,windMin:1.7,windMax:2.5,aScoreTargs:[33,35,37],quiver:4,mapX:737,mapY:990},{id:"triangle0",misc:{id:null,num:null},targType:1,rot:.4,bg:4,targPosId:3,moveDist:.3,windMin:1.7,windMax:2.5,aScoreTargs:[33,35,37],quiver:4,mapX:603,mapY:937},{id:"diag1",misc:{id:null,num:null},targType:0,rot:.4,bg:4,targPosId:3,moveDist:.2,windMin:1.7,windMax:2.5,aScoreTargs:[33,35,37],quiver:4,mapX:479,mapY:973},{id:"horiz",misc:{id:"balloons",num:8},targType:3,rot:.3,bg:4,targPosId:2,moveDist:.3,windMin:1.7,windMax:2.5,aScoreTargs:[6,7,8],quiver:8,mapX:334,mapY:987},{id:"circle0",misc:{id:null,num:null},targType:4,rot:.5,bg:4,targPosId:2,moveDist:.3,windMin:2,windMax:3,aScoreTargs:[34,36,38],quiver:4,mapX:189,mapY:988},{id:"diag0",misc:{id:null,num:null},targType:2,rot:.3,bg:4,targPosId:3,moveDist:.2,windMin:1,windMax:2,aScoreTargs:[34,36,38],quiver:4,mapX:64,mapY:930},{id:"triangle1",misc:{id:null,num:null},targType:6,rot:.3,bg:4,targPosId:2,moveDist:.4,windMin:2,windMax:3,aScoreTargs:[34,36,38],quiver:4,mapX:103,mapY:812},{id:"square",misc:{id:null,num:null},targType:2,rot:.3,bg:4,targPosId:3,moveDist:.3,windMin:1,windMax:2,aScoreTargs:[34,36,38],quiver:4,mapX:234,mapY:805},{id:"circle1",misc:{id:"balloons",num:9},targType:3,rot:.2,bg:4,targPosId:2,moveDist:.3,windMin:1.8,windMax:2.5,aScoreTargs:[7,8,9],quiver:9,mapX:374,mapY:857},{id:"static",misc:{id:null,num:null},targType:3,bg:1,targPosId:0,moveDist:0,windMin:.5,windMax:1,aScoreTargs:[6,8,10],quiver:5,mapX:133,mapY:618}),aTargetTypes=new Array({id:"horiz",moveDist:.3},{id:"vert",moveDist:.2},{id:"diag0",moveDist:.2},{id:"diag1",moveDist:.2},{id:"circle0",moveDist:.3},{id:"circle1",moveDist:.3},{id:"triangle0",moveDist:.3},{id:"triangle1",moveDist:.3},{id:"square",moveDist:.3});function extGameLoad(){loadPreAssets()}function initSplash(){gameState="splash",resizeCanvas(),window.famobi_onPauseRequested=function(){Howler.mute(!0),music.pause(),famobiPauseActive=!0},window.famobi_onResumeRequested=function(){muted||"pause"==gameState||(Howler.mute(!1),music.play()),famobiPauseActive=!1},window.famobi.localStorage.getItem("muted")&&(muted=!1,toggleMute(!0)),1!=audioType||muted||(playMusic(),hasFocus||music.pause()),window.famobi_game={},window.famobi_game.startGame=function(t){initStartScreen(),forcedMode&&((forcedModeProperties=famobi.getFeatureProperties("forced_mode")).state=forcedModeProperties.state||{},forcedModeProperties.override=forcedModeProperties.override||{},skipTitle?(userInput.removeHitArea("backFromMap"),userInput.removeHitArea("mapTouch"),userInput.removeHitArea("mute")):(userInput.removeHitArea("playFromStart0"),userInput.removeHitArea("playFromStart1"),userInput.removeHitArea("moreGamesFromStart"),userInput.removeHitArea("creditsFromStart"),userInput.removeHitArea("mute")),window.famobi.hasFeature("external_start")&&!t||window.famobi_game.startLevel(),window.famobi.gameReady())},window.famobi_game.startLevel=function(){let t,e=!1;if(-2==(levelNum=forcedModeProperties.state.level?forcedModeProperties.state.level:0)?(levelNum=0,t=!0):-1==levelNum&&(levelNum=0,e=!0),forcedModeProperties.override.endless_normal&&(aLevelData[levelNum].quiver=1/0),initGame(e?"challenge":"levels",!1),t){let t="static";if("number"==typeof forcedModeProperties.override.movement_size&&(aLevelData[levelNum].moveDist=Math.min(Math.max(forcedModeProperties.override.movement_size,0),1),aLevelData[levelNum].moveDist>0))switch(forcedModeProperties.override.movement_shape){case 0:t="static";break;case 1:t="triangle0";break;case 2:t="triangle1";break;case 3:t="square";break;case 4:t="circle0";break;case 5:t="circle1";break;case 6:t="horiz";break;case 7:t="vert";break;case 8:t="diag0";break;case 9:t="diag1"}"number"!=typeof forcedModeProperties.override.score_bronze&&(forcedModeProperties.override.score_bronze=aLevelData[levelNum].aScoreTargs[0]),"number"!=typeof forcedModeProperties.override.score_silver&&(forcedModeProperties.override.score_silver=aLevelData[levelNum].aScoreTargs[1]),"number"!=typeof forcedModeProperties.override.score_gold&&(forcedModeProperties.override.score_gold=aLevelData[levelNum].aScoreTargs[2]),forcedModeProperties.override.score_bronze=Math.max(forcedModeProperties.override.score_bronze,0),forcedModeProperties.override.score_silver=Math.max(forcedModeProperties.override.score_silver,forcedModeProperties.override.score_bronze+1),forcedModeProperties.override.score_gold=Math.max(forcedModeProperties.override.score_gold,forcedModeProperties.override.score_silver+1),aLevelData[levelNum].aScoreTargs=[forcedModeProperties.override.score_bronze,forcedModeProperties.override.score_silver,forcedModeProperties.override.score_gold],"number"==typeof forcedModeProperties.override.target_type&&(aLevelData[levelNum].targType=Math.min(Math.max(forcedModeProperties.override.target_type,0),6)),aLevelData[levelNum].id=t,"number"==typeof forcedModeProperties.override.target_distance&&(aLevelData[levelNum].targPosId=Math.min(Math.max(forcedModeProperties.override.target_distance,0),3)),"number"!=typeof forcedModeProperties.override.balloon_layout&&(forcedModeProperties.override.balloon_layout=0),aLevelData[levelNum].misc={id:forcedModeProperties.override.is_balloon_level?"balloons":null,num:Math.min(Math.max(forcedModeProperties.override.balloon_layout,0),9)},"number"==typeof forcedModeProperties.override.arrow_amount&&(forcedModeProperties.override.arrow_amount<=0?aLevelData[levelNum].quiver=1/0:aLevelData[levelNum].quiver=Math.min(Math.max(forcedModeProperties.override.arrow_amount,1),9),quiver=aLevelData[levelNum].quiver),"number"==typeof forcedModeProperties.override.wind_strength_min&&(aLevelData[levelNum].windMin=Math.min(Math.max(forcedModeProperties.override.wind_strength_min,0),3),aLevelData[levelNum].windMax=aLevelData[levelNum].windMin),"number"==typeof forcedModeProperties.override.wind_strength_max&&(aLevelData[levelNum].windMax=Math.min(Math.max(forcedModeProperties.override.wind_strength_max,aLevelData[levelNum].windMin),3)),"number"==typeof forcedModeProperties.override.target_rotation_speed&&(aLevelData[levelNum].rot=Math.min(Math.max(forcedModeProperties.override.target_rotation_speed,-10),10))}skipTutorial||butEventHandler("tutDone")},saveDataHandler.init(window.famobi_game.startGame)}function initStartScreen(){if(skipTitle)butEventHandler("playFromStart0");else{gameState="start";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_HOME)}catch(t){}levelNum=0,gameMode="levels",userInput.removeHitArea("moreGames"),1==audioType&&music.fade(music.volume(),.25*masterVolume,500),(saveDataHandler.getTotalScore()>0||saveDataHandler.oHighscoreData.stats.ever.highscore>0)&&(firstRun=!1),skipTutorial&&(firstRun=!1);var t={oImgData:assetLib.getData("uiButs"),aPos:[-86,-2],align:[.5,.7],id:oImageIds.playBut0},e={oImgData:assetLib.getData("uiButs"),aPos:[100,0],align:[.5,.7],id:oImageIds.playBut1},a={oImgData:assetLib.getData("moreGamesBut"),aPos:[82,-40],align:[0,1],id:"none",scale:.25,noMove:!0},i={oImgData:assetLib.getData("uiButs"),aPos:[-95+offsetButtons.x,32+offsetButtons.y],align:[1,0],id:oImageIds.infoBut,noMove:!0};userInput.addHitArea("playFromStart0",butEventHandler,null,"image",t),userInput.addHitArea("playFromStart1",butEventHandler,null,"image",e),userInput.addHitArea("moreGamesFromStart",butEventHandler,null,"image",a);var s=new Array(t,e,a,i);window.famobi.hasFeature("credits")?userInput.addHitArea("creditsFromStart",butEventHandler,null,"image",i):s=new Array(t,e,a),addMuteBut(s),aArrowsFired=new Array,aBirds=new Array;for(var o=Math.floor(4*Math.random())+4,r=0;r<o;r++)addBird();if("balloons"==aLevelData[levelNum=50].misc.id){aLevelBalloonData=new Array;for(r=0;r<aBalloonData[aLevelData[levelNum].misc.num].length;r++)aLevelBalloonData.push({rot:aBalloonData[aLevelData[levelNum].misc.num][r].rot,hyp:aBalloonData[aLevelData[levelNum].misc.num][r].hyp,scale:aBalloonData[aLevelData[levelNum].misc.num][r].scale,colour:r%7})}archeryView=new Elements.ArcheryView(!0),panel=new Elements.Panel(gameState,s),aDrifters=new Array;for(r=0;r<4;r++){var n=new Elements.Drifters(assetLib.getData("drifters"),"ambient");n.x=canvas.width/2*(r%2)+canvas.width/4,n.y=canvas.height/2*Math.floor(r/2)+canvas.height/4,n.scaleX=n.scaleY=.4*Math.random()+.8,aDrifters.push(n)}panel.startTween1(),previousTime=(new Date).getTime(),updateStartScreenEvent(),forcedMode||window.famobi.gameReady()}}function addMuteBut(t){if(!externalMute&&1==audioType){var e=oImageIds.muteBut0;muted&&(e=oImageIds.muteBut1);var a={oImgData:assetLib.getData("uiButs"),aPos:[-32+offsetButtons.x,32+offsetButtons.y],align:[1,0],id:e,noMove:!0};userInput.addHitArea("mute",butEventHandler,null,"image",a),t.push(a)}}function initCreditsScreen(){gameState="credits";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_CREDITS)}catch(t){}var t={oImgData:assetLib.getData("uiButs"),aPos:[55,-35],align:[0,1],id:oImageIds.backBut,noMove:!0},e={oImgData:assetLib.getData("uiButs"),aPos:[-55,-35],align:[1,1],id:oImageIds.resetBut,noMove:!0};userInput.addHitArea("backFromCredits",butEventHandler,null,"image",t),userInput.addHitArea("resetData",butEventHandler,null,"image",e);var a=new Array;if(showCrossPromo){var i={oImgData:assetLib.getData("crossPromoBut"),aPos:[0,130],align:[.5,.5],id:"none",scale:.3,noMove:!0};userInput.addHitArea("crossPromoClicked",butEventHandler,null,"image",i),a=new Array(t,e,i)}else a=new Array(t,e);addMuteBut(a),(panel=new Elements.Panel(gameState,a)).startTween1(),aArrowsFired=new Array,archeryView=new Elements.ArcheryView(!0),previousTime=(new Date).getTime(),updateCreditsScreenEvent()}function setTreeData(){aTreeData=new Array;for(var t=0;t<treeNum;t++)aTreeData.push({scaleL:.1*Math.random()+.9,idL:"tree"+sceneType+Math.floor(3*Math.random()),scaleR:.1*Math.random()+.9,idR:"tree"+sceneType+Math.floor(3*Math.random())})}function initMap(){gameState="map";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_LEVELSELECT)}catch(t){}1==audioType&&music.fade(music.volume(),.25*masterVolume,500);var t={oImgData:assetLib.getData("uiButs"),aPos:[55,-35],align:[0,1],id:oImageIds.backBut,noMove:!0},e=new Array;skipTitle||(userInput.addHitArea("backFromMap",butEventHandler,null,"image",t),e=new Array(t)),addMuteBut(e),panel=new Elements.Panel(gameState,e),userInput.addHitArea("mapTouch",butEventHandler,{isDraggable:!0,multiTouch:!0},"rect",{aRect:[0,0,canvas.width,canvas.height]},!0),panel.mapButIdToHighlight=-1,setMapData(),panel.startTween1(),aFireworks=new Array,previousTime=(new Date).getTime(),updateMapScreenEvent(),forcedMode||window.famobi.gameReady()}function setMapData(){var t=saveDataHandler.getLastUnlockedLevel();-1==t&&(t=49),mapPosX=mapPosRealX=Math.max(Math.min(aLevelData[t].mapX-canvas.width/2,1446-canvas.width),0),mapPosY=mapPosRealY=Math.max(Math.min(aLevelData[t].mapY-canvas.height/2,1111-canvas.height),0),mapScale=1,canvas.width>1446&&(mapScale=canvas.width/1446),canvas.height>1111&&(mapScale=Math.max(canvas.height/1111,mapScale))}function initLevelPreview(){gameState="levelPreview";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_LEVELINTRO)}catch(t){}var t={oImgData:assetLib.getData("uiButs"),aPos:[140,170],align:[.5,.5],id:oImageIds.nextBut},e={oImgData:assetLib.getData("uiButs"),aPos:[55,-35],align:[0,1],id:oImageIds.backBut,noMove:!0};userInput.addHitArea("nextFromPreview",butEventHandler,null,"image",t),userInput.addHitArea("backFromPreview",butEventHandler,null,"image",e);var a=new Array(e,t);addMuteBut(a),setMapData(),(panel=new Elements.Panel(gameState,a)).startTween1(),previousTime=(new Date).getTime(),updateLevelPreviewEvent()}function initGame(t,e){window.famobi_analytics.trackEvent(e?famobi_analytics.EVENT_LEVELRESTART:famobi_analytics.EVENT_LEVELSTART,{levelName:"levels"==t?(levelNum+1).toString():"challenge"}).then((function(){_initGame(t,e)}))}function _initGame(t,e){gameState="game",gameMode=t,challengeLevelNum=0,1==audioType&&music.fade(music.volume(),.5*masterVolume,1e3),aArrowsFired=new Array,targRot=aLevelData[levelNum].targType>0&&aLevelData[levelNum].targType<3?360*Math.random()*radian:0,playSound("gameStart");var a=new Array;if(addMuteBut(a),skipTutorial&&(firstRun=!1),firstRun){var i={oImgData:assetLib.getData("uiButs"),aPos:[5,155],align:[.5,.5],id:oImageIds.nextBut};userInput.addHitArea("tutDone",butEventHandler,null,"image",i),a.push(i)}else{var s={oImgData:assetLib.getData("uiButs"),aPos:[-95+offsetButtons.x,32+offsetButtons.y],align:[1,0],id:oImageIds.pauseBut,noMove:!0};externalPause||(userInput.addHitArea("pause",butEventHandler,null,"image",s),a.push(s)),userInput.addHitArea("gameTouch",butEventHandler,{isDraggable:!0,multiTouch:!0},"rect",{aRect:[0,65,canvas.width,canvas.height]},!0)}if(panel=new Elements.Panel(gameState,a),"balloons"==aLevelData[levelNum].misc.id){aLevelBalloonData=new Array;for(var o=0;o<aBalloonData[aLevelData[levelNum].misc.num].length;o++)aLevelBalloonData.push({rot:aBalloonData[aLevelData[levelNum].misc.num][o].rot,hyp:aBalloonData[aLevelData[levelNum].misc.num][o].hyp,scale:aBalloonData[aLevelData[levelNum].misc.num][o].scale,colour:o%7})}aBirds=new Array;var r=Math.floor(4*Math.random())+4;for(o=0;o<r;o++)addBird();archeryView=new Elements.ArcheryView,aDrifters=new Array;for(o=0;o<4;o++){var n=new Elements.Drifters(assetLib.getData("drifters"),"ambient");n.x=canvas.width/2*(o%2)+canvas.width/4,n.y=canvas.height/2*Math.floor(o/2)+canvas.height/4,n.scaleX=n.scaleY=.4*Math.random()+.8,aDrifters.push(n)}bow=new Elements.Bow,hud=new Elements.Hud,panel.startTween1(),aFireworks=new Array,moveIncX=0,moveIncY=0,moveState=0,levelScore=0,quiver=aLevelData[levelNum].quiver,previousTime=(new Date).getTime(),updateGameEvent(),firstRun||window.famobi.playerReady()}function resumeGame(){gameState="game";var t={oImgData:assetLib.getData("uiButs"),aPos:[-95+offsetButtons.x,32+offsetButtons.y],align:[1,0],id:oImageIds.pauseBut,noMove:!0},e=new Array;externalPause||(userInput.addHitArea("pause",butEventHandler,null,"image",t),e=new Array(t)),addMuteBut(e),userInput.addHitArea("gameTouch",butEventHandler,{isDraggable:!0,multiTouch:!0},"rect",{aRect:[0,65,canvas.width,canvas.height]},!0),(panel=new Elements.Panel(gameState,e)).startTween1(),previousTime=(new Date).getTime(),updateGameEvent()}function initPause(){gameState="pause";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_PAUSE)}catch(t){}var t={oImgData:assetLib.getData("uiButs"),aPos:[0,-90],align:[.5,.5],id:oImageIds.nextBut,noMove:!0},e={oImgData:assetLib.getData("uiButs"),aPos:[0,0],align:[.5,.5],id:oImageIds.restart1But,noMove:!0},a={oImgData:assetLib.getData("uiButs"),aPos:[0,90],align:[.5,.5],id:oImageIds.quitBut,noMove:!0};userInput.addHitArea("resumeGameFromPause",butEventHandler,null,"image",t),userInput.addHitArea("restartGameFromPause",butEventHandler,null,"image",e),userInput.addHitArea("quitGameFromPause",butEventHandler,null,"image",a);var i=new Array;if(showCrossPromo){var s={oImgData:assetLib.getData("crossPromoBut"),aPos:[0,190],align:[.5,.5],scale:.3,id:"none",noMove:!0};userInput.addHitArea("crossPromoClicked",butEventHandler,null,"image",s),i=new Array(t,e,a,s)}else i=new Array(t,e,a);(panel=new Elements.Panel(gameState,i)).startTween1(),previousTime=(new Date).getTime(),background=new Elements.Background,updatePauseEvent()}function initAnimateMap(){gameState="animateMap";var t=new Array;addMuteBut(t),panel=new Elements.Panel(gameState,t),setMapData(),panel.startTween1(),panel.tweenFinger(),previousTime=(new Date).getTime(),updateAnimateMapEvent()}function butEventHandler(t,e){if(!window.famobi.paused)switch(t){case"langSelect":curLang=e.lang,ctx.clearRect(0,0,canvas.width,canvas.height),userInput.removeHitArea("langSelect"),(preAssetLib=new Utils.AssetLoader(curLang,[{id:"preloadImage",file:"images/preloadImage.jpg"}],ctx,canvas.width,canvas.height,!1)).onReady(initLoadAssets);break;case"creditsFromStart":playSound("click"),userInput.removeHitArea("playFromStart0"),userInput.removeHitArea("playFromStart1"),userInput.removeHitArea("moreGamesFromStart"),userInput.removeHitArea("creditsFromStart"),userInput.removeHitArea("mute"),initCreditsScreen();break;case"backFromCredits":playSound("click"),userInput.removeHitArea("backFromCredits"),userInput.removeHitArea("crossPromoClicked"),userInput.removeHitArea("resetData"),userInput.removeHitArea("mute"),initStartScreen();break;case"moreGamesFromStart":case"moreGamesPause":playSound("click");try{window.famobi.moreGamesLink()}catch(t){}break;case"resetData":playSound("click"),userInput.removeHitArea("backFromCredits"),userInput.removeHitArea("crossPromoClicked"),userInput.removeHitArea("resetData"),userInput.removeHitArea("mute"),saveDataHandler.resetData(),firstRun=!0,skipTutorial&&(firstRun=!1),levelNum=0,initStartScreen();break;case"crossPromoClicked":if(playSound("click"),showCrossPromo)window.open(window.famobi.getAppLink(),"_blank");break;case"playFromStart0":playSound("click"),userInput.removeHitArea("playFromStart0"),userInput.removeHitArea("playFromStart1"),userInput.removeHitArea("moreGamesFromStart"),userInput.removeHitArea("creditsFromStart"),userInput.removeHitArea("mute"),initMap();break;case"playFromStart1":playSound("click"),userInput.removeHitArea("playFromStart0"),userInput.removeHitArea("playFromStart1"),userInput.removeHitArea("moreGamesFromStart"),userInput.removeHitArea("creditsFromStart"),userInput.removeHitArea("mute"),initGame("challenge",!1);break;case"mapTouch":if(e.isBeingDragged&&!e.hasLeft&&mapTouchFirst)mapPosX=Math.max(Math.min(panel.mapStartX-e.x,1446-canvas.width),0),mapPosY=Math.max(Math.min(panel.mapStartY-e.y,1111-canvas.height),0);else if(e.isDown&&0==e.isBeingDragged)panel.mapTween&&panel.mapTween.kill(),panel.mapStartX=mapPosRealX+e.x,panel.mapDragX=e.x,panel.mapStartY=mapPosRealY+e.y,panel.mapDragY=e.y,mapTouchFirst=!0;else if(mapTouchFirst&&(mapTouchFirst=!1,Math.abs(panel.mapDragY-e.y)<10))for(var a=0;a<50;a++){var i=saveDataHandler.getLastUnlockedLevel();if(("undefined"!=typeof famobi_unlock&&famobi_unlock.isEnabled()||a<=i||-1==i)&&e.x>(aLevelData[a].mapX-50-mapPosRealX)*mapScale&&e.x<(aLevelData[a].mapX+50-mapPosRealX)*mapScale&&e.y>(aLevelData[a].mapY-50-mapPosRealY)*mapScale&&e.y<(aLevelData[a].mapY+50-mapPosRealY)*mapScale){levelNum=a,userInput.removeHitArea("backFromMap"),userInput.removeHitArea("mapTouch"),userInput.removeHitArea("mute"),playSound("click"),initLevelPreview();break}}break;case"backFromMap":playSound("click"),userInput.removeHitArea("backFromMap"),userInput.removeHitArea("mapTouch"),userInput.removeHitArea("mute"),initStartScreen();break;case"nextFromPreview":playSound("click"),userInput.removeHitArea("nextFromPreview"),userInput.removeHitArea("backFromPreview"),userInput.removeHitArea("mute"),initGame("levels",!1);break;case"backFromPreview":playSound("click"),userInput.removeHitArea("nextFromPreview"),userInput.removeHitArea("backFromPreview"),userInput.removeHitArea("mute"),initMap();break;case"tutDone":playSound("click"),userInput.removeHitArea("mute"),userInput.removeHitArea("tutDone");try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_TUTORIALCOMPLETED),window.famobi.playerReady()}catch(t){}var s={oImgData:assetLib.getData("uiButs"),aPos:[-95+offsetButtons.x,32+offsetButtons.y],align:[1,0],id:oImageIds.pauseBut,noMove:!0};panel.aButs=new Array,externalPause||(userInput.addHitArea("pause",butEventHandler,null,"image",s),panel.aButs=new Array(s)),userInput.addHitArea("gameTouch",butEventHandler,{isDraggable:!0,multiTouch:!0},"rect",{aRect:[0,65,canvas.width,canvas.height]},!0),addMuteBut(panel.aButs),firstRun=!1,null!=archeryView&&(archeryView.introTween(),null!=bow&&bow.introTween());break;case"gameTouch":if(e.isBeingDragged&&!e.hasLeft&&bow.isHeld)bow.targAimX=e.x,bow.targAimY=e.y;else if(e.isDown&&0==e.isBeingDragged)bow.startAimX=bow.targAimX=e.x,bow.startAimY=bow.targAimY=e.y,bow.isHeld=!0,playSound("bow"),bow.zoomIn(),archeryView.zoomIn();else if(bow.isHeld){var o=hud.windPower*Math.cos(hud.windDir)*(.003*archeryView.aTargData[archeryView.targPosId].dist),r=hud.windPower*Math.sin(hud.windDir)*(.003*archeryView.aTargData[archeryView.targPosId].dist),n=5e-4*archeryView.aTargData[archeryView.targPosId].dist;hitPosX=(bow.x+bow.aScopeOffset[bow.bowId].x-archeryView.targetCentreX+moveIncX*archeryView.zoomScale*archeryView.aTargData[archeryView.targPosId].scale)/archeryView.aTargData[archeryView.targPosId].scale/archeryView.zoomScale/aimTargetRadius+o,hitPosY=(bow.y-archeryView.targetCentreY+moveIncY*archeryView.zoomScale*archeryView.aTargData[archeryView.targPosId].scale)/archeryView.aTargData[archeryView.targPosId].scale/archeryView.zoomScale/aimTargetRadius+r+n,bow.startAimX=bow.targAimX=0,bow.startAimY=bow.targAimY=0,userInput.removeHitArea("gameTouch"),userInput.removeHitArea("mute"),userInput.removeHitArea("pause"),playSound("shoot"+Math.floor(5*Math.random())),bow.fireArrow()}break;case"nextLevel":playSound("click"),userInput.removeHitArea("jumpHeight"),userInput.removeHitArea("dashLength"),userInput.removeHitArea("turnRate"),userInput.removeHitArea("nextLevel"),levelScore=0,levelNum++,initGame("levels",!1);break;case"retryFromEnd":playSound("click"),userInput.removeHitArea("retryFromEnd"),userInput.removeHitArea("quitFromEnd"),levelScore=0,initGame(gameMode,!0);break;case"quitFromEnd":playSound("click"),userInput.removeHitArea("retryFromEnd"),userInput.removeHitArea("quitFromEnd"),initStartScreen();break;case"mute":playSound("click"),toggleMute(),muted?panel.switchBut(oImageIds.muteBut0,oImageIds.muteBut1):panel.switchBut(oImageIds.muteBut1,oImageIds.muteBut0);break;case"enableAudio":muted&&(toggleMute(!e),muted?panel.switchBut(oImageIds.muteBut0,oImageIds.muteBut1):panel.switchBut(oImageIds.muteBut1,oImageIds.muteBut0));break;case"disableAudio":muted||(toggleMute(!e),muted?panel.switchBut(oImageIds.muteBut0,oImageIds.muteBut1):panel.switchBut(oImageIds.muteBut1,oImageIds.muteBut0));break;case"pause":!0!==e&&playSound("click"),1==audioType?(Howler.mute(!0),music.pause()):2==audioType&&music.pause(),userInput.removeHitArea("pause"),userInput.removeHitArea("gameTouch"),userInput.removeHitArea("mute"),initPause();break;case"resumeGameFromPause":!0!==e&&playSound("click"),1==audioType?muted||(Howler.mute(!1),playMusic()):2==audioType&&(muted||playMusic()),userInput.removeHitArea("resumeGameFromPause"),userInput.removeHitArea("crossPromoClicked"),userInput.removeHitArea("restartGameFromPause"),userInput.removeHitArea("quitGameFromPause"),userInput.removeHitArea("mute"),resumeGame();break;case"restartGameFromPause":if(playSound("click"),"levels"==gameMode)try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELFAIL,{levelName:(levelNum+1).toString(),reason:"draw"})}catch(t){}else try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELFAIL,{levelName:(challengeLevelNum+1).toString(),reason:"draw"})}catch(t){}1==audioType?muted||(Howler.mute(!1),playMusic()):2==audioType&&(muted||playMusic()),userInput.removeHitArea("resumeGameFromPause"),userInput.removeHitArea("crossPromoClicked"),userInput.removeHitArea("restartGameFromPause"),userInput.removeHitArea("quitGameFromPause"),userInput.removeHitArea("mute"),initGame(gameMode,!0);break;case"quitGameFromPause":playSound("click"),1==audioType?muted||(Howler.mute(!1),playMusic()):2==audioType&&(muted||playMusic()),userInput.removeHitArea("resumeGameFromPause"),userInput.removeHitArea("crossPromoClicked"),userInput.removeHitArea("restartGameFromPause"),userInput.removeHitArea("quitGameFromPause"),userInput.removeHitArea("mute"),levelScore=0,gameState="start",window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELFAIL,{levelName:""+("levels"==gameMode?levelNum+1:"challenge"),reason:"quit"}).then(initStartScreen,initStartScreen);break;case"nextFromLevelSuccess":playSound("click"),userInput.removeHitArea("nextFromLevelSuccess"),userInput.removeHitArea("replayFromLevelSuccess"),userInput.removeHitArea("crossPromoClicked"),userInput.removeHitArea("backFromLevelSuccess"),levelNum+1==saveDataHandler.getLastUnlockedLevel()?initAnimateMap():initMap();break;case"replayFromLevelSuccess":playSound("click"),userInput.removeHitArea("nextFromLevelSuccess"),userInput.removeHitArea("replayFromLevelSuccess"),userInput.removeHitArea("crossPromoClicked"),userInput.removeHitArea("backFromLevelSuccess"),initGame(gameMode,!0);break;case"backFromLevelSuccess":playSound("click"),userInput.removeHitArea("nextFromLevelSuccess"),userInput.removeHitArea("replayFromLevelSuccess"),userInput.removeHitArea("crossPromoClicked"),userInput.removeHitArea("backFromLevelSuccess"),initMap();break;case"replayFromLevelFail":playSound("click"),userInput.removeHitArea("replayFromLevelFail"),userInput.removeHitArea("backFromLevelFail"),userInput.removeHitArea("crossPromoClicked"),initGame(gameMode,!0);break;case"backFromLevelFail":playSound("click"),userInput.removeHitArea("replayFromLevelFail"),userInput.removeHitArea("backFromLevelFail"),userInput.removeHitArea("crossPromoClicked"),initMap();break;case"replayFromChallengeFail":playSound("click"),userInput.removeHitArea("replayFromChallengeFail"),userInput.removeHitArea("backFromChallengeFail"),userInput.removeHitArea("crossPromoClicked"),initGame(gameMode,!0);break;case"backFromChallengeFail":playSound("click"),userInput.removeHitArea("replayFromChallengeFail"),userInput.removeHitArea("backFromChallengeFail"),userInput.removeHitArea("crossPromoClicked"),initStartScreen()}}function addFirework(t,e,a,i,s){if(void 0===i&&(i=1),void 0===s&&(s=!0),!(aFireworks.length>15)){var o=new Elements.Firework(assetLib.getData("firework"+t),"explode",s);o.x=e,o.y=a,o.scaleX=o.scaleY=i,aFireworks.push(o)}}function addBird(){var t=new Elements.Bird(assetLib.getData("bird"));aBirds.push(t)}function addPop(t,e,a,i,s){if(void 0===i&&(i=1),void 0===s&&(s=!1),!(aFireworks.length>15)){var o="explode"+t,r=new Elements.Firework(assetLib.getData("balloonPop"),o,s);r.x=e,r.y=a,r.scaleX=r.scaleY=i,aFireworks.push(r)}}function initArrowFire(){gameState="arrowFire",scrollGround=new Elements.ScrollGround;var t=new Array;addMuteBut(t),(panel=new Elements.Panel(gameState,t)).startTween1(),previousTime=(new Date).getTime(),updateArrowFire()}function initNextShot(){if("levels"==gameMode&&quiver--,!forcedModeProperties.override.endless_normal&&"levels"==gameMode&&(levelScore>=aLevelData[levelNum].aScoreTargs[2]||quiver<=0))levelScore>=aLevelData[levelNum].aScoreTargs[0]?initLevelSuccess():initLevelFail();else{gameState="game",challengeLevelNum++,aArrowsFired.push({x:hitPosX,y:hitPosY,rot:Math.atan2(hitPosY,hitPosX)-targRot,hyp:Math.sqrt(hitPosX*hitPosX+hitPosY*hitPosY),hitTarget:Math.sqrt(hitPosX*hitPosX+hitPosY*hitPosY)<=1});var t={oImgData:assetLib.getData("uiButs"),aPos:[-95+offsetButtons.x,32+offsetButtons.y],align:[1,0],id:oImageIds.pauseBut,noMove:!0},e=new Array;externalPause||(userInput.addHitArea("pause",butEventHandler,null,"image",t),e=new Array(t)),addMuteBut(e),userInput.addHitArea("gameTouch",butEventHandler,{isDraggable:!0,multiTouch:!0},"rect",{aRect:[0,65,canvas.width,canvas.height]},!0),panel=new Elements.Panel(gameState,e),archeryView=new Elements.ArcheryView,bow=new Elements.Bow,hud.resetWind(),panel.startTween1(),previousTime=(new Date).getTime(),updateGameEvent()}}function updateScore(t){levelScore+=t}function initLevelSuccess(){Promise.all([window.famobi_analytics.trackEvent(famobi_analytics.EVENT_CUSTOM,{event:"EVENT_LEVELSUCCESS",levelName:(levelNum+1).toString()}),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_CUSTOM,{event:"EVENT_LEVELSCORE",levelName:(levelNum+1).toString(),levelScore:levelScore})]).then(_initLevelSuccess,_initLevelSuccess)}function _initLevelSuccess(){var t,e;gameState="levelSuccess",playSound("cheer"+Math.floor(5*Math.random())),playSound("gameSuccess"),levelScore>=aLevelData[levelNum].aScoreTargs[2]?(t=aLevelData[levelNum].aScoreTargs[2],e=4):levelScore>=aLevelData[levelNum].aScoreTargs[1]?(t=aLevelData[levelNum].aScoreTargs[1],e=3):(t=aLevelData[levelNum].aScoreTargs[0],e=2),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"success",score:t}).then((function(){levelNum<49&&levelNum==saveDataHandler.getLastUnlockedLevel()&&saveDataHandler.setLevelData(levelNum+1,1,0),window.famobi_analytics.trackStats("stars_gained",e-1),saveDataHandler.setLevelData(levelNum,e,t),saveDataHandler.saveData(),userInput.removeHitArea("gameTouch"),userInput.removeHitArea("pause");var a={oImgData:assetLib.getData("uiButs"),aPos:[140,170],align:[.5,.5],id:oImageIds.nextBut,scale:1e-4},i={oImgData:assetLib.getData("uiButs"),aPos:[-135,170],align:[.5,.5],id:oImageIds.restart1But,noMove:!0,scale:1e-4},s={oImgData:assetLib.getData("uiButs"),aPos:[55,-35],align:[0,1],id:oImageIds.backBut,noMove:!0,scale:1e-4},o=new Array;if(showCrossPromo){var r={oImgData:assetLib.getData("crossPromoBut"),aPos:[0,-200],align:[.5,.5],id:"none",noMove:!0,scale:1e-4};o=new Array(s,a,i,r)}else o=new Array(s,a,i);addMuteBut(o),setMapData(),aFireworks=new Array,(panel=new Elements.Panel(gameState,o)).startTween1(),previousTime=(new Date).getTime(),updateLevelSuccess();var n=function(){forcedMode||(i.scale=1,s.scale=1,a.scale=1,userInput.addHitArea("nextFromLevelSuccess",butEventHandler,null,"image",a),userInput.addHitArea("replayFromLevelSuccess",butEventHandler,null,"image",i),userInput.addHitArea("backFromLevelSuccess",butEventHandler,null,"image",s)),showCrossPromo&&(r.scale=.3,userInput.addHitArea("crossPromoClicked",butEventHandler,null,"image",r))};lastUnlockedLevel!=saveDataHandler.getLastUnlockedLevel()&&(lastUnlockedLevel=saveDataHandler.getLastUnlockedLevel(),window.famobi_analytics.trackStats("level_unlocked",{level:lastUnlockedLevel})),setTimeout(function(){Promise.all([window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_LEVELRESULT),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELSUCCESS,{levelName:(levelNum+1).toString()}),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELSCORE,{levelName:"levels",levelScore:saveDataHandler.getTotalScore()}),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELSCORE,{levelName:""+levelNum,levelScore:levelScore})]).then(n,n)}.bind(this),1500)}),(function(){}))}function initLevelFail(){window.famobi_analytics.trackEvent(famobi_analytics.EVENT_CUSTOM,{event:"EVENT_LEVELFAIL",levelName:(levelNum+1).toString(),reason:"dead"}).then(_initLevelFail,_initLevelFail)}function _initLevelFail(){gameState="levelFail",1==audioType&&music.fade(music.volume(),.25*masterVolume,500),playSound("gameFail"),playSound("crowdSad"),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:levelScore}).then((function(){userInput.removeHitArea("gameTouch"),userInput.removeHitArea("pause");var t={oImgData:assetLib.getData("uiButs"),aPos:[140,170],align:[.5,.5],id:oImageIds.restart0But,scale:1e-4},e={oImgData:assetLib.getData("uiButs"),aPos:[55,-35],align:[0,1],id:oImageIds.backBut,noMove:!0,scale:1e-4},a=new Array;if(showCrossPromo){var i={oImgData:assetLib.getData("crossPromoBut"),aPos:[0,-200],align:[.5,.5],id:"none",noMove:!0,scale:1e-4};a=new Array(t,e,i)}else a=new Array(t,e);addMuteBut(a),setMapData(),(panel=new Elements.Panel(gameState,a)).startTween1(),previousTime=(new Date).getTime(),updateLevelFail();var s=function(){forcedMode||(t.scale=1,e.scale=1,userInput.addHitArea("replayFromLevelFail",butEventHandler,null,"image",t),userInput.addHitArea("backFromLevelFail",butEventHandler,null,"image",e),showCrossPromo&&(i.scale=.3,userInput.addHitArea("crossPromoClicked",butEventHandler,null,"image",i)))};setTimeout(function(){Promise.all([window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_LEVELRESULT),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELFAIL,{levelName:(levelNum+1).toString(),reason:"dead"})]).then(s,s)}.bind(this),1500)}),(function(){}))}function initChallengeFail(){Promise.all([window.famobi_analytics.trackEvent(famobi_analytics.EVENT_CUSTOM,{event:"EVENT_LEVELFAIL",levelName:"challenge",reason:"dead"}),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_CUSTOM,{event:"EVENT_LEVELSCORE",levelName:"challenge",levelScore:challengeLevelNum})]).then(_initChallengeFail,_initChallengeFail)}function _initChallengeFail(){gameState="challengeFail",1==audioType&&music.fade(music.volume(),.25*masterVolume,500),playSound("gameSuccess"),playSound("cheer"+Math.floor(5*Math.random())),window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"fail",score:levelScore}).then((function(){saveDataHandler.setChallengeHighscore(levelScore),userInput.removeHitArea("gameTouch"),userInput.removeHitArea("pause");var t={oImgData:assetLib.getData("uiButs"),aPos:[140,170],align:[.5,.5],id:oImageIds.restart0But,scale:1e-4},e={oImgData:assetLib.getData("uiButs"),aPos:[55,-35],align:[0,1],id:oImageIds.backBut,noMove:!0,scale:1e-4},a=new Array;if(showCrossPromo){var i={oImgData:assetLib.getData("crossPromoBut"),aPos:[0,-200],align:[.5,.5],id:"none",noMove:!0,scale:1e-4};a=new Array(t,e,i)}else a=new Array(t,e);addMuteBut(a),setMapData(),aFireworks=new Array,(panel=new Elements.Panel(gameState,a)).startTween1(),previousTime=(new Date).getTime(),updateChallengeFail();var s=function(){t.scale=1,e.scale=1,userInput.addHitArea("replayFromChallengeFail",butEventHandler,null,"image",t),userInput.addHitArea("backFromChallengeFail",butEventHandler,null,"image",e),showCrossPromo&&(i.scale=.3,userInput.addHitArea("crossPromoClicked",butEventHandler,null,"image",i))};setTimeout(function(){Promise.all([window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_GAMERESULT),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELFAIL,{levelName:"challenge",reason:"dead"}),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELSCORE,{levelName:"challenge",levelScore:challengeLevelNum})]).then(s,s)}.bind(this),1500)}),(function(){}))}function updateGameEvent(){if("game"==gameState){delta=getDelta(),ctx.fillStyle="rgba(255, 255, 255, 1)",ctx.fillRect(0,0,canvas.width,canvas.height/2),ctx.fillStyle="rgba(0, 0, 0, 1)",ctx.fillRect(0,canvas.height/2,canvas.width,canvas.height),archeryView.update(),archeryView.render(),bow.update(),bow.render();for(var t=0;t<aDrifters.length;t++)aDrifters[t].update(),aDrifters[t].render(ctx);hud.update(),hud.render();for(t=0;t<aFireworks.length;t++)aFireworks[t].update(),aFireworks[t].render(ctx),aFireworks[t].removeMe&&(aFireworks.splice(t,1),t-=1);panel.update(),panel.render(),requestAnimFrame(updateGameEvent)}}function updateArrowFire(){if("arrowFire"==gameState){delta=getDelta(),scrollGround.update(),scrollGround.render(),hud.update(),hud.render();for(var t=0;t<aFireworks.length;t++)aFireworks[t].update(),aFireworks[t].render(ctx),aFireworks[t].removeMe&&(aFireworks.splice(t,1),t-=1);panel.update(),panel.render(),requestAnimFrame(updateArrowFire)}}function updateMapScreenEvent(){if("map"==gameState){delta=getDelta(),-1==saveDataHandler.getLastUnlockedLevel()&&Math.random()<.1&&addFirework(Math.floor(2*Math.random()),Math.random()*canvas.width,Math.random()*canvas.height,1*Math.random()+2),panel.update(),panel.render();for(var t=0;t<aFireworks.length;t++)aFireworks[t].update(),aFireworks[t].render(ctx),aFireworks[t].removeMe&&(aFireworks.splice(t,1),t-=1);requestAnimFrame(updateMapScreenEvent)}}function updateAnimateMapEvent(){"animateMap"==gameState&&(delta=getDelta(),panel.update(),panel.render(),requestAnimFrame(updateAnimateMapEvent))}function updateLevelPreviewEvent(){"levelPreview"==gameState&&(delta=getDelta(),panel.update(),panel.render(),requestAnimFrame(updateLevelPreviewEvent))}function updateCreditsScreenEvent(){"credits"==gameState&&(delta=getDelta(),ctx.fillStyle="rgba(255, 255, 255, 1)",ctx.fillRect(0,0,canvas.width,canvas.height/2),ctx.fillStyle="rgba(0, 0, 0, 1)",ctx.fillRect(0,canvas.height/2,canvas.width,canvas.height),archeryView.update(),archeryView.render(),panel.update(),panel.render(),ctx.fillStyle="#ffffff",ctx.textAlign="center",ctx.font="15px Helvetica",ctx.fillText("v1.0.5",canvas.width/2+panel.posY,canvas.height-10),requestAnimFrame(updateCreditsScreenEvent))}function updateLevelSuccess(){if("levelSuccess"==gameState){delta=getDelta(),Math.random()<.1&&addFirework(Math.floor(2*Math.random()),Math.random()*canvas.width,Math.random()*canvas.height,1*Math.random()+2),panel.update(),panel.render();for(var t=0;t<aFireworks.length;t++)aFireworks[t].update(),aFireworks[t].render(ctx),aFireworks[t].removeMe&&(aFireworks.splice(t,1),t-=1);requestAnimFrame(updateLevelSuccess)}}function updateLevelFail(){"levelFail"==gameState&&(delta=getDelta(),panel.update(),panel.render(),requestAnimFrame(updateLevelFail))}function updateChallengeFail(){if("challengeFail"==gameState){delta=getDelta(),Math.random()<.1&&addFirework(Math.floor(2*Math.random()),Math.random()*canvas.width,Math.random()*canvas.height,1*Math.random()+2),panel.update(),panel.render();for(var t=0;t<aFireworks.length;t++)aFireworks[t].update(),aFireworks[t].render(ctx),aFireworks[t].removeMe&&(aFireworks.splice(t,1),t-=1);requestAnimFrame(updateChallengeFail)}}function updateSplashScreenEvent(){if("splash"==gameState){if(delta=getDelta(),(splashTimer+=delta)>2.5)return 1!=audioType||muted||(playMusic(),hasFocus||music.pause()),void initStartScreen();background.render(),panel.update(),panel.render(),requestAnimFrame(updateSplashScreenEvent)}}function updateStartScreenEvent(){if("start"==gameState){delta=getDelta(),ctx.fillStyle="rgba(255, 255, 255, 1)",ctx.fillRect(0,0,canvas.width,canvas.height/2),ctx.fillStyle="rgba(0, 0, 0, 1)",ctx.fillRect(0,canvas.height/2,canvas.width,canvas.height),archeryView.update(),archeryView.render();for(var t=0;t<aDrifters.length;t++)aDrifters[t].update(),aDrifters[t].render(ctx);panel.update(),panel.render(),requestAnimFrame(updateStartScreenEvent)}}function updateLoaderEvent(){"load"==gameState&&(delta=getDelta(),assetLib.render(),requestAnimFrame(updateLoaderEvent))}function updatePauseEvent(){"pause"==gameState&&(delta=getDelta(),background.render(),panel.render(),requestAnimFrame(updatePauseEvent))}function getDelta(){var t=(new Date).getTime(),e=(t-previousTime)/1e3;return previousTime=t,e>.5&&(e=0),e}function checkSpriteCollision(t,e){var a=t.x,i=t.y,s=e.x,o=e.y;return(a-s)*(a-s)+(i-o)*(i-o)<t.radius*e.radius}function getScaleImageToMax(t,e){return t.isSpriteSheet?e[0]/t.oData.spriteWidth<e[1]/t.oData.spriteHeight?Math.min(e[0]/t.oData.spriteWidth,1):Math.min(e[1]/t.oData.spriteHeight,1):e[0]/t.img.width<e[1]/t.img.height?Math.min(e[0]/t.img.width,1):Math.min(e[1]/t.img.height,1)}function getCentreFromTopLeft(t,e,a){var i=new Array;return i.push(t[0]+e.oData.spriteWidth/2*a),i.push(t[1]+e.oData.spriteHeight/2*a),i}function loadPreAssets(){if(aLangs.length>1){for(var t=new Array,e=0;e<aLangs.length;e++)t.push({id:"lang"+aLangs[e],file:"images/lang"+aLangs[e]+".png"});(preAssetLib=new Utils.AssetLoader(curLang,t,ctx,canvas.width,canvas.height,!1)).onReady(initLangSelect)}else curLang=aLangs[0],(preAssetLib=new Utils.AssetLoader(curLang,[{id:"loader",file:"images/loader.png"},{id:"loadSpinner",file:"images/loadSpinner.png"}],ctx,canvas.width,canvas.height,!1)).onReady(initLoadAssets)}function initLangSelect(){for(var t,e,a,i,s=0,o=0;o<aLangs.length&&(o+1)*(1*(t=preAssetLib.getData("lang"+aLangs[o])).img.width)+10*(o+2)<canvas.width;o++)s++;i=Math.ceil(aLangs.length/s);for(o=0;o<aLangs.length;o++){t=preAssetLib.getData("lang"+aLangs[o]),e=canvas.width/2-s/2*(1*t.img.width)-(s-1)/2*10,e+=o%s*(1*t.img.width+10),a=canvas.height/2-i/2*(1*t.img.height)-(i-1)/2*10,a+=Math.floor(o/s)%i*(1*t.img.height+10),ctx.drawImage(t.img,0,0,t.img.width,t.img.height,e,a,1*t.img.width,1*t.img.height);var r={oImgData:t,aPos:[e+1*t.img.width/2,a+1*t.img.height/2],scale:1,id:"none",noMove:!0};userInput.addHitArea("langSelect",butEventHandler,{lang:aLangs[o]},"image",r)}}function initLoadAssets(){loadAssets()}function loadAssets(){var t;try{t=window.famobi.getBrandingButtonImage()}catch(e){t="images/BrandingPlaceholderButton.png"}assetLib=new Utils.AssetLoader(curLang,[{id:"background",file:"images/bgMain.jpg"},{id:"splashLogo",file:"images/splashLogo.png"},{id:"flare",file:"images/flare.png"},{id:"uiButs",file:"images/uiButs.png",oAtlasData:{id0:{x:375,y:0,width:58,height:64},id1:{x:139,y:364,width:65,height:66},id10:{x:278,y:218,width:136,height:98},id11:{x:172,y:0,width:136,height:98},id12:{x:0,y:280,width:137,height:87},id13:{x:0,y:134,width:159,height:144},id2:{x:310,y:0,width:63,height:65},id3:{x:0,y:0,width:170,height:132},id4:{x:139,y:280,width:137,height:82},id5:{x:161,y:134,width:137,height:82},id6:{x:0,y:369,width:96,height:58},id7:{x:206,y:364,width:64,height:68},id8:{x:300,y:100,width:96,height:81},id9:{x:278,y:318,width:136,height:83}}},{id:window.famobi.hasFeature("leaderboard")?"uiElements":"uiElements2",file:window.famobi.hasFeature("leaderboard")?"images/uiElements.png":"images/uiElements2.png",oAtlasData:{id0:{x:0,y:0,width:528,height:137},id1:{x:561,y:993,width:185,height:149},id10:{x:0,y:865,width:255,height:83},id11:{x:0,y:950,width:240,height:43},id12:{x:652,y:0,width:120,height:133},id13:{x:937,y:175,width:119,height:173},id14:{x:870,y:842,width:120,height:200},id15:{x:0,y:139,width:472,height:361},id16:{x:561,y:842,width:185,height:149},id17:{x:0,y:995,width:185,height:149},id18:{x:374,y:865,width:185,height:149},id19:{x:257,y:865,width:108,height:104},id2:{x:187,y:995,width:185,height:149},id20:{x:937,y:350,width:86,height:68},id21:{x:530,y:0,width:120,height:133},id22:{x:937,y:0,width:119,height:173},id23:{x:748,y:842,width:120,height:200},id24:{x:474,y:139,width:461,height:350},id25:{x:824,y:491,width:348,height:349},id26:{x:474,y:491,width:348,height:349},id27:{x:858,y:1125,width:34,height:40},id28:{x:1030,y:924,width:79,height:193},id3:{x:374,y:1016,width:185,height:149},id4:{x:748,y:1044,width:108,height:104},id5:{x:858,y:1044,width:87,height:70},id6:{x:774,y:0,width:88,height:131},id7:{x:947,y:1044,width:81,height:79},id8:{x:992,y:842,width:81,height:80},id9:{x:0,y:502,width:472,height:361}}},{id:"gameElements",file:"images/gameElements.png",oAtlasData:{id0:{x:554,y:753,width:274,height:274},id1:{x:0,y:246,width:508,height:229},id10:{x:680,y:472,width:169,height:121},id11:{x:1389,y:1348,width:74,height:123},id12:{x:1210,y:992,width:101,height:126},id13:{x:1288,y:1348,width:99,height:126},id14:{x:1288,y:1120,width:101,height:124},id15:{x:1134,y:865,width:105,height:125},id16:{x:1344,y:798,width:95,height:122},id17:{x:1096,y:1019,width:112,height:128},id18:{x:1313,y:991,width:98,height:127},id19:{x:1241,y:865,width:101,height:124},id2:{x:982,y:0,width:150,height:1017},id20:{x:510,y:246,width:224,height:224},id21:{x:830,y:1052,width:150,height:187},id22:{x:736,y:167,width:151,height:150},id23:{x:761,y:1305,width:151,height:150},id24:{x:889,y:315,width:85,height:86},id25:{x:0,y:0,width:700,height:244},id26:{x:889,y:130,width:91,height:90},id27:{x:1285,y:0,width:145,height:796},id28:{x:1134,y:0,width:149,height:752},id29:{x:554,y:1305,width:205,height:75},id3:{x:0,y:477,width:401,height:387},id30:{x:554,y:1459,width:205,height:75},id31:{x:333,y:866,width:205,height:75},id32:{x:554,y:1382,width:205,height:75},id33:{x:1432,y:0,width:63,height:66},id34:{x:1409,y:922,width:63,height:66},id35:{x:1344,y:922,width:63,height:66},id36:{x:1390,y:1246,width:63,height:66},id37:{x:1413,y:990,width:63,height:66},id38:{x:1391,y:1120,width:63,height:66},id39:{x:889,y:403,width:63,height:66},id4:{x:1465,y:1120,width:25,height:358},id40:{x:0,y:988,width:275,height:274},id41:{x:830,y:900,width:150,height:150},id42:{x:875,y:1496,width:36,height:37},id43:{x:1096,y:1149,width:36,height:37},id44:{x:875,y:1457,width:36,height:37},id45:{x:495,y:943,width:36,height:37},id46:{x:457,y:943,width:36,height:37},id47:{x:876,y:1241,width:36,height:37},id48:{x:419,y:943,width:36,height:37},id49:{x:702,y:0,width:163,height:165},id5:{x:0,y:866,width:331,height:120},id50:{x:1432,y:68,width:35,height:205},id51:{x:1432,y:275,width:35,height:205},id52:{x:1432,y:482,width:35,height:205},id53:{x:449,y:818,width:44,height:45},id54:{x:403,y:818,width:44,height:45},id55:{x:830,y:1241,width:44,height:45},id56:{x:495,y:818,width:44,height:45},id57:{x:333,y:943,width:41,height:21},id58:{x:1288,y:1246,width:100,height:100},id59:{x:1134,y:754,width:109,height:109},id6:{x:517,y:753,width:10,height:54},id60:{x:889,y:222,width:91,height:91},id61:{x:851,y:536,width:102,height:47},id62:{x:1066,y:1344,width:103,height:47},id63:{x:833,y:595,width:128,height:136},id64:{x:914,y:1393,width:123,height:124},id65:{x:376,y:943,width:41,height:21},id66:{x:1180,y:1149,width:106,height:360},id67:{x:277,y:988,width:275,height:274},id68:{x:736,y:319,width:151,height:150},id69:{x:554,y:1029,width:274,height:274},id7:{x:1413,y:1058,width:59,height:60},id70:{x:914,y:1241,width:150,height:150},id71:{x:403,y:477,width:275,height:274},id72:{x:0,y:1264,width:275,height:274},id73:{x:277,y:1264,width:275,height:274},id74:{x:680,y:595,width:151,height:150},id75:{x:851,y:471,width:112,height:63},id76:{x:867,y:0,width:112,height:63},id77:{x:867,y:65,width:112,height:63},id78:{x:982,y:1019,width:112,height:63},id79:{x:761,y:1457,width:112,height:63},id8:{x:529,y:753,width:6,height:25},id80:{x:982,y:1149,width:112,height:63},id81:{x:1039,y:1458,width:112,height:63},id82:{x:1039,y:1393,width:112,height:63},id83:{x:1066,y:1214,width:112,height:63},id84:{x:1066,y:1279,width:112,height:63},id85:{x:982,y:1084,width:112,height:63},id86:{x:403,y:753,width:112,height:63},id9:{x:830,y:747,width:150,height:151}}},{id:"horizon0",file:"images/horizon0.jpg"},{id:"horizon1",file:"images/horizon1.jpg"},{id:"horizon2",file:"images/horizon2.jpg"},{id:"horizon3",file:"images/horizon3.jpg"},{id:"horizon4",file:"images/horizon4.jpg"},{id:"ground0",file:"images/ground0.jpg"},{id:"ground1",file:"images/ground1.jpg"},{id:"ground2",file:"images/ground2.jpg"},{id:"ground3",file:"images/ground3.jpg"},{id:"ground4",file:"images/ground4.jpg"},{id:"scrollGround0",file:"images/scrollGround0.jpg"},{id:"scrollGround1",file:"images/scrollGround1.jpg"},{id:"scrollGround2",file:"images/scrollGround2.jpg"},{id:"scrollGround3",file:"images/scrollGround3.jpg"},{id:"scrollGround4",file:"images/scrollGround4.jpg"},{id:"map",file:"images/mapBg.jpg"},{id:"numbersBlue",file:"images/numbersBlue_51x63.png"},{id:"numbersGreen",file:"images/numbersGreen_51x63.png"},{id:"numbersRed",file:"images/numbersRed_51x63.png"},{id:"numbersLevel",file:"images/numbersLevel_21x37.png"},{id:"firework0",file:"images/firework0_150x150.png",oAnims:{explode:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}},{id:"firework1",file:"images/firework1_175x175.png",oAnims:{explode:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]}},{id:"balloonPop",file:"images/balloonPop_86x85.png",oAnims:{explode0:[0,1,2,3,4],explode1:[5,6,7,8,9],explode2:[10,11,12,13,14],explode3:[15,16,17,18,19],explode4:[20,21,22,23,24],explode5:[25,26,27,28,29],explode6:[30,31,32,33,34]}},{id:"drifters",file:"images/drifters_210x194.png",oAnims:{ambient:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1]}},{id:"trees",file:"images/trees.png",oAtlasData:{id0:{x:0,y:0,width:289,height:388},id1:{x:855,y:840,width:283,height:390},id10:{x:1140,y:0,width:273,height:534},id11:{x:1140,y:1072,width:273,height:534},id12:{x:285,y:789,width:283,height:357},id13:{x:0,y:1148,width:283,height:356},id14:{x:0,y:789,width:283,height:357},id2:{x:0,y:390,width:284,height:397},id3:{x:855,y:420,width:283,height:418},id4:{x:570,y:426,width:283,height:417},id5:{x:576,y:0,width:283,height:418},id6:{x:570,y:845,width:283,height:424},id7:{x:285,y:1148,width:283,height:424},id8:{x:291,y:0,width:283,height:424},id9:{x:1140,y:536,width:273,height:534}}},{id:"tutorial",file:"images/tutorial_264x261.png",oAnims:{tut0:[0,0,0,0,0,1,2,3,4,5,6,7,8,9,9,9,9,9,10,11,12,13,14,15,16,17,18,19,20,20,20,20,20,21,22,23,24,25,26,27,28,29,30,31,32,33,33,33,33,33,34,35,36,37,38],tut1:[39,40,41,42,43,44,45,46,45,44,43,44,45,46,45,44,43,44,45,46]}},{id:"bird",file:"images/bird_12x10.png",oAnims:{fly:[0,1,2,3,4,5,6,7,8,9,8,7,6,5,4,3,2,1]}},{id:"moreGamesBut",file:t},{id:"crossPromoBut",file:"images/cross-promo-btn.png"}],ctx,canvas.width,canvas.height),oImageIds.infoBut="id0",oImageIds.muteBut1="id1",oImageIds.muteBut0="id2",oImageIds.playBut1="id3",oImageIds.moreGamesBut="id4",oImageIds.crossPromoBut="id4",oImageIds.mapBut="id5",oImageIds.backBut="id6",oImageIds.pauseBut="id7",oImageIds.resetBut="id8",oImageIds.nextBut="id9",oImageIds.restart0But="id10",oImageIds.restart1But="id11",oImageIds.quitBut="id12",oImageIds.playBut0="id13",oImageIds.titleLogo="id0",oImageIds.mapBut2="id1",oImageIds.mapBut3="id2",oImageIds.mapBut4="id3",oImageIds.mapBut1="id4",oImageIds.mapBut0="id5",oImageIds.fingerPoint="id6",oImageIds.fadeBorderBottom="id7",oImageIds.fadeBorderTop="id8",oImageIds.bluePanel="id9",oImageIds.scoreBgWin="id10",oImageIds.quiver="id11",oImageIds.scoreTarget0="id12",oImageIds.scoreTarget1="id13",oImageIds.scoreTarget2="id14",oImageIds.losePanel="id15",oImageIds.mapBut7="id16",oImageIds.mapBut8="id17",oImageIds.mapBut9="id18",oImageIds.mapBut6="id19",oImageIds.mapBut5="id20",oImageIds.balloonTarget0="id21",oImageIds.balloonTarget1="id22",oImageIds.balloonTarget2="id23",oImageIds.challengePanel="id24",oImageIds.tutBg0="id25",oImageIds.tutBg1="id26",oImageIds.miniCup="id27",oImageIds.highscoreTable="id28",oImageIds.target0="id0",oImageIds.stand="id1",oImageIds.bowMiddle="id2",oImageIds.arrowInBow="id3",oImageIds.arrowInFlight="id4",oImageIds.scope0="id5",oImageIds.arrowShadow="id6",oImageIds.missCross="id7",oImageIds.flushArrowHit="id8",oImageIds.targetSmall0="id9",oImageIds.standSmall="id10",oImageIds.score1="id11",oImageIds.score2="id12",oImageIds.score3="id13",oImageIds.score4="id14",oImageIds.score5="id15",oImageIds.score6="id16",oImageIds.score7="id17",oImageIds.score8="id18",oImageIds.score9="id19",oImageIds.score10="id20",oImageIds.windPanel="id21",oImageIds.targetSmall5="id22",oImageIds.targetSmall6="id23",oImageIds.scoreBgGame="id24",oImageIds.scoreDiagBg="id25",oImageIds.quiverBgGame="id26",oImageIds.bowTop="id27",oImageIds.bowBottom="id28",oImageIds.distMarker0="id29",oImageIds.distMarker1="id30",oImageIds.distMarker2="id31",oImageIds.distMarker3="id32",oImageIds.balloon0="id33",oImageIds.balloon1="id34",oImageIds.balloon2="id35",oImageIds.balloon3="id36",oImageIds.balloon4="id37",oImageIds.balloon5="id38",oImageIds.balloon6="id39",oImageIds.target3="id40",oImageIds.targetSmall3="id41",oImageIds.balloonSmall0="id42",oImageIds.balloonSmall1="id43",oImageIds.balloonSmall2="id44",oImageIds.balloonSmall3="id45",oImageIds.balloonSmall4="id46",oImageIds.balloonSmall5="id47",oImageIds.balloonSmall6="id48",oImageIds.balloonScore="id49",oImageIds.progressBar0="id50",oImageIds.progressBar1="id51",oImageIds.progressBar2="id52",oImageIds.progressMarker0="id53",oImageIds.progressMarker1="id54",oImageIds.progressMarker2="id55",oImageIds.progressMarker3="id56",oImageIds.progressNumBg0="id57",oImageIds.lensFlare0="id58",oImageIds.lensFlare1="id59",oImageIds.lensFlare2="id60",oImageIds.fadeBorder0="id61",oImageIds.fadeBorder1="id62",oImageIds.thumbsUp="id63",oImageIds.score0="id64",oImageIds.progressNumBg1="id65",oImageIds.arrowInFlightSpecial="id66",oImageIds.target2="id67",oImageIds.targetSmall2="id68",oImageIds.target1="id69",oImageIds.targetSmall1="id70",oImageIds.target4="id71",oImageIds.target5="id72",oImageIds.target6="id73",oImageIds.targetSmall4="id74",oImageIds.windArrow00="id75",oImageIds.windArrow01="id76",oImageIds.windArrow02="id77",oImageIds.windArrow03="id78",oImageIds.windArrow04="id79",oImageIds.windArrow05="id80",oImageIds.windArrow10="id81",oImageIds.windArrow11="id82",oImageIds.windArrow12="id83",oImageIds.windArrow13="id84",oImageIds.windArrow14="id85",oImageIds.windArrow15="id86",oImageIds.tree00="id0",oImageIds.tree01="id1",oImageIds.tree02="id2",oImageIds.tree10="id3",oImageIds.tree11="id4",oImageIds.tree12="id5",oImageIds.tree20="id6",oImageIds.tree21="id7",oImageIds.tree22="id8",oImageIds.tree30="id9",oImageIds.tree31="id10",oImageIds.tree32="id11",oImageIds.tree40="id12",oImageIds.tree41="id13",oImageIds.tree42="id14",assetLib.onReady(initSplash),gameState="load",previousTime=(new Date).getTime(),updateLoaderEvent()}function resizeCanvas(){var t=fenster.innerWidth,e=fenster.innerHeight;if(canvas.height=e,canvas.width=t,canvas.style.width=t+"px",canvas.style.height=e+"px",t>e?canvas.height<minSquareSize?(canvas.height=minSquareSize,canvas.width=minSquareSize*(t/e),canvasScale=minSquareSize/e):canvas.height>maxSquareSize?(canvas.height=maxSquareSize,canvas.width=maxSquareSize*(t/e),canvasScale=maxSquareSize/e):canvasScale=1:canvas.width<minSquareSize?(canvas.width=minSquareSize,canvas.height=minSquareSize*(e/t),canvasScale=minSquareSize/t):canvas.width>maxSquareSize?(canvas.width=maxSquareSize,canvas.height=maxSquareSize*(e/t),canvasScale=maxSquareSize/t):canvasScale=1,"game"==gameState)bow.isHeld||(userInput.removeHitArea("gameTouch"),userInput.addHitArea("gameTouch",butEventHandler,{isDraggable:!0,multiTouch:!0},"rect",{aRect:[0,65,canvas.width,canvas.height]},!0));else if("map"==gameState){userInput.removeHitArea("mapTouch"),userInput.addHitArea("mapTouch",butEventHandler,{isDraggable:!0,multiTouch:!0},"rect",{aRect:[0,0,canvas.width,canvas.height]},!0),mapScale=1,canvas.width>1446&&(mapScale=canvas.width/1446),canvas.height>1111&&(mapScale=Math.max(canvas.height/1111,mapScale)),-1==(a=saveDataHandler.getLastUnlockedLevel())&&(a=49),mapPosX=mapPosRealX=Math.max(Math.min(aLevelData[a].mapX-canvas.width/2,1446-canvas.width),0),mapPosY=mapPosRealY=Math.max(Math.min(aLevelData[a].mapY-canvas.height/2,1111-canvas.height),0)}else if("levelPreview"==gameState||"levelSuccess"==gameState||"levelFail"==gameState||"challengeFail"==gameState){var a;mapScale=1,canvas.width>1446&&(mapScale=canvas.width/1446),canvas.height>1111&&(mapScale=Math.max(canvas.height/1111,mapScale)),-1==(a=saveDataHandler.getLastUnlockedLevel())&&(a=49),mapPosX=mapPosRealX=Math.max(Math.min(aLevelData[a].mapX-canvas.width/2,1446-canvas.width),0),mapPosY=mapPosRealY=Math.max(Math.min(aLevelData[a].mapY-canvas.height/2,1111-canvas.height),0)}window.scrollTo(0,0)}function playSound(t){1==audioType&&sound.play(t)}function toggleMute(t){muted=!muted,1==audioType?muted?(Howler.mute(!0),music.pause(),t||(window.famobi_analytics.trackEvent("EVENT_VOLUMECHANGE",{bgmVolume:0,sfxVolume:0}),window.famobi.localStorage.setItem("muted","1"))):(Howler.mute(!1),playMusic(),sound._volume=masterVolume,"game"==gameState?music.volume(.5*masterVolume):music.volume(.25*masterVolume),t||(window.famobi_analytics.trackEvent("EVENT_VOLUMECHANGE",{bgmVolume:1*masterVolume,sfxVolume:1*masterVolume}),window.famobi.localStorage.removeItem("muted"))):2==audioType&&(muted?music.pause():playMusic())}