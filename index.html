<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Home - Dunkin's Games</title>
      <link rel="shortcut icon" type="image/png" href="favicon.png">
  </head>
  <style>
    .Fantasy {
      font-family: "Fantasy", Helvetica, sans-serif;
    }
  </style>
  <body background="background.png">
    <div id="Header">
      <p class="Fantasy" style="text-align: center;"><strong>Dunkin's Games</strong></p>
      <p class="Fantasy" style="text-align: center;"><span style="text-decoration: underline;"><strong>No Ads, No Lag! (Hopefully...)</strong></span></p>
      <p class="Fantasy" style="text-align: left;">&nbsp;</p>
    </div>
    <div id="Sort">
      <center>
        <select id="listSort" onchange="makeList()">
          <option value="New-Old">Sort By Newest To Oldest</option>
          <option value="Old-New">Sort By Oldest To Newest</option>
          <option value="A-Z">Sort By A To Z</option>
          <option value="Z-A">Sort By Z To A</option>
        </select>
        <br><br>
      </center>
    </div>
    <div id="ChartBody">
      <center>
        <table class="Fantasy" style="border-collapse: collapse; width: 75%; height: 85px;" border="10">
          <tbody id="DaChart">
          </tbody>
        </table>
      </center>
      <script>
        function clearList(){
          document.getElementById("DaChart").innerHTML = "";
        }
        function sortByNewOld(a, b) {
          if (a.id > b.id) {
            return -1;
          }
          if (a.id < b.id) {
            return 1;
          }
          return 0;
        }
        function sortByOldNew(a, b) {
          if (a.id < b.id) {
            return -1;
          }
          if (a.id > b.id) {
            return 1;
          }
          return 0;
        }
        function sortByAZ(a, b) {
          if (a.name < b.name) {
            return -1;
          }
          if (a.name > b.name) {
            return 1;
          }
          return 0;
        }
        function sortByZA(a, b) {
          if (a.name > b.name) {
            return -1;
          }
          if (a.name < b.name) {
            return 1;
          }
          return 0;
        }
        function makeList(){
          clearList();
          fetch("https://realdunkin.github.io/dunkingames/game_list.json").then(response => response.json()).then(data => {
                  sortValue = document.getElementById("listSort").value
                  switch (sortValue) {
                    case "New-Old":
                      data.games.sort(sortByNewOld);
                      console.log("Sorted By Newest To Oldest");
                      break;
                    case "Old-New":
                      data.games.sort(sortByOldNew);
                      console.log("Sorted By Oldest To Newest");
                      break;
                    case "A-Z":
                      data.games.sort(sortByAZ);
                      console.log("Sorted By A To Z");
                      break;
                    case "Z-A":
                      data.games.sort(sortByZA);
                      console.log("Sorted By Z To A");
                      break;
                    default:
                      console.log("Sorted By None");
                      break;
                  }
                  for (let index = 0; index < data.games.length; index++) {
                      const tblrow = document.createElement("tr");
                      tblrow.style.height = "85px";

                      const linkCell = document.createElement("td");
                      linkCell.style.width = "50%";
                      linkCell.style.height = "85px";

                      const linkData = document.createElement("a");
                      linkData.href = "https://realdunkin.github.io/dunkingames/games/" + data.games[index].url + "/";
                      
                      const strong1 = document.createElement("strong");
                      strong1.innerHTML = data.games[index].name;

                      const descCell = document.createElement("td");
                      descCell.style.width = "50%";
                      descCell.style.height = "85px";

                      const strong2 = document.createElement("strong");
                      strong2.innerHTML = data.games[index].description;
                      
                      linkData.append(strong1);
                      linkCell.append(linkData);
                      tblrow.append(linkCell);

                      descCell.append(strong2);
                      tblrow.append(descCell);

                      const chart = document.getElementById("DaChart");
                      chart.append(tblrow); 
                    }
                  })
        }
        makeList()
      </script>
    </div>
  </body>
</html>